(function(Yt,Bt){typeof exports=="object"&&typeof module<"u"?Bt(exports):typeof define=="function"&&define.amd?define(["exports"],Bt):(Yt=typeof globalThis<"u"?globalThis:Yt||self,Bt(Yt.jellyfish={}))})(this,function(Yt){"use strict";var Bt=document.createElement("style");Bt.textContent=`body{margin:0;font-family:Arial,Helvetica,sans-serif}#title{font-family:Nerko One,cursive,sans-serif;font-weight:400;font-style:normal;font-size:3rem;position:absolute;top:.2em;left:.4em;margin:0;color:#e0e0e0}.jellyfish-gui{position:absolute;top:0;right:0;bottom:0;left:0}.jellyfish-plot-container{display:grid;place-items:center;position:absolute;top:0;right:0;bottom:0;left:0;overflow-x:hidden;overflow-y:auto}.jellyfish-patient-nav{display:flex;justify-content:space-between;position:absolute;--margin: 2em;bottom:var(--margin);left:var(--margin);right:var(--margin)}.jellyfish-patient-nav>button{font-family:Nerko One,cursive,sans-serif;font-weight:400;font-style:normal;font-size:1.2rem;padding:.5em .8em;border:none;border-radius:.5em;background-color:#f0f0f0;color:gray;cursor:pointer;border-bottom:1px solid #d0d0d0;display:flex;align-items:center;gap:.4em}.jellyfish-patient-nav>button>svg{height:.7em}.jellyfish-patient-nav>button:hover{background-color:#e8e8e8}.jellyfish-gui .lil-gui{--background-color: #f3f3f3;--text-color: #3d3d3d;--title-background-color: #e0e0e0;--title-text-color: #3d3d3d;--widget-color: #e3e3e3;--hover-color: #d8d8d8;--focus-color: #fafafa;--number-color: #0d8eab;--string-color: #738500}.jellyfish-gui .lil-gui.root{position:absolute;right:2em}.jellyfish-error-message{color:#b00}@media print{.lil-gui.root,.jellyfish-patient-nav,#title{display:none}}@font-face{font-family:Nerko One;font-style:normal;font-weight:400;font-display:swap;src:url(data:font/woff2;base64,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) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
`,document.head.appendChild(Bt);/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.19.2
 * @author George Michael Brower
 * @license MIT
 */let Gt=class An{constructor(t,n,i,r,s="div"){this.parent=t,this.object=n,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(s),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),An.nextNameID=An.nextNameID||0,this.$name.id=`lil-gui-name-${++An.nextNameID}`,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",o=>o.stopPropagation()),this.domElement.addEventListener("keyup",o=>o.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(t){return this._name=t,this.$name.textContent=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled?this:(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t),this)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const n=this.parent.add(this.object,this.property,t);return n.name(this._name),this.destroy(),n}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.getValue()!==t&&(this.object[this.property]=t,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}};class Zo extends Gt{constructor(t,n,i){super(t,n,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function kn(e){let t,n;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),n?"#"+n:!1}const Ko={isPrimitive:!0,match:e=>typeof e=="string",fromHexString:kn,toHexString:kn},he={isPrimitive:!0,match:e=>typeof e=="number",fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},Qo=[Ko,he,{isPrimitive:!1,match:e=>Array.isArray(e),fromHexString(e,t,n=1){const i=he.fromHexString(e);t[0]=(i>>16&255)/255*n,t[1]=(i>>8&255)/255*n,t[2]=(i&255)/255*n},toHexString([e,t,n],i=1){i=255/i;const r=e*i<<16^t*i<<8^n*i<<0;return he.toHexString(r)}},{isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t,n=1){const i=he.fromHexString(e);t.r=(i>>16&255)/255*n,t.g=(i>>8&255)/255*n,t.b=(i&255)/255*n},toHexString({r:e,g:t,b:n},i=1){i=255/i;const r=e*i<<16^t*i<<8^n*i<<0;return he.toHexString(r)}}];function ta(e){return Qo.find(t=>t.match(e))}class ea extends Gt{constructor(t,n,i,r){super(t,n,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=ta(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=kn(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const n=this._format.fromHexString(t);this.setValue(n)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class _n extends Gt{constructor(t,n,i){super(t,n,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class na extends Gt{constructor(t,n,i,r,s,o){super(t,n,i,"number"),this._initInput(),this.min(r),this.max(s);const a=o!==void 0;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,n=!0){return this._step=t,this._stepExplicit=n,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let n=(t-this._min)/(this._max-this._min);n=Math.max(0,Math.min(n,1)),this.$fill.style.width=n*100+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const n=()=>{let b=parseFloat(this.$input.value);isNaN(b)||(this._stepExplicit&&(b=this._snap(b)),this.setValue(this._clamp(b)))},i=b=>{const x=parseFloat(this.$input.value);isNaN(x)||(this._snapClampSetValue(x+b),this.$input.value=this.getValue())},r=b=>{b.key==="Enter"&&this.$input.blur(),b.code==="ArrowUp"&&(b.preventDefault(),i(this._step*this._arrowKeyMultiplier(b))),b.code==="ArrowDown"&&(b.preventDefault(),i(this._step*this._arrowKeyMultiplier(b)*-1))},s=b=>{this._inputFocused&&(b.preventDefault(),i(this._step*this._normalizeMouseWheel(b)))};let o=!1,a,l,u,h,c;const f=5,d=b=>{a=b.clientX,l=u=b.clientY,o=!0,h=this.getValue(),c=0,window.addEventListener("mousemove",m),window.addEventListener("mouseup",y)},m=b=>{if(o){const x=b.clientX-a,A=b.clientY-l;Math.abs(A)>f?(b.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(x)>f&&y()}if(!o){const x=b.clientY-u;c-=x*this._step*this._arrowKeyMultiplier(b),h+c>this._max?c=this._max-h:h+c<this._min&&(c=this._min-h),this._snapClampSetValue(h+c)}u=b.clientY},y=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y)},g=()=>{this._inputFocused=!0},p=()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()};this.$input.addEventListener("input",n),this.$input.addEventListener("keydown",r),this.$input.addEventListener("wheel",s,{passive:!1}),this.$input.addEventListener("mousedown",d),this.$input.addEventListener("focus",g),this.$input.addEventListener("blur",p)}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=(p,b,x,A,M)=>(p-b)/(x-b)*(M-A)+A,n=p=>{const b=this.$slider.getBoundingClientRect();let x=t(p,b.left,b.right,this._min,this._max);this._snapClampSetValue(x)},i=p=>{this._setDraggingStyle(!0),n(p.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",s)},r=p=>{n(p.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s)};let o=!1,a,l;const u=p=>{p.preventDefault(),this._setDraggingStyle(!0),n(p.touches[0].clientX),o=!1},h=p=>{p.touches.length>1||(this._hasScrollBar?(a=p.touches[0].clientX,l=p.touches[0].clientY,o=!0):u(p),window.addEventListener("touchmove",c,{passive:!1}),window.addEventListener("touchend",f))},c=p=>{if(o){const b=p.touches[0].clientX-a,x=p.touches[0].clientY-l;Math.abs(b)>Math.abs(x)?u(p):(window.removeEventListener("touchmove",c),window.removeEventListener("touchend",f))}else p.preventDefault(),n(p.touches[0].clientX)},f=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",f)},d=this._callOnFinishChange.bind(this),m=400;let y;const g=p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();const x=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+x),this.$input.value=this.getValue(),clearTimeout(y),y=setTimeout(d,m)};this.$slider.addEventListener("mousedown",i),this.$slider.addEventListener("touchstart",h,{passive:!1}),this.$slider.addEventListener("wheel",g,{passive:!1})}_setDraggingStyle(t,n="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${n}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:n,deltaY:i}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(n=0,i=-t.wheelDelta/120,i*=this._stepExplicit?1:10),n+-i}_arrowKeyMultiplier(t){let n=this._stepExplicit?1:10;return t.shiftKey?n*=10:t.altKey&&(n/=10),n}_snap(t){const n=Math.round(t/this._step)*this._step;return parseFloat(n.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class ia extends Gt{constructor(t,n,i,r){super(t,n,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(r)}options(t){return this._values=Array.isArray(t)?t:Object.values(t),this._names=Array.isArray(t)?t:Object.keys(t),this.$select.replaceChildren(),this._names.forEach(n=>{const i=document.createElement("option");i.textContent=n,this.$select.appendChild(i)}),this.updateDisplay(),this}updateDisplay(){const t=this.getValue(),n=this._values.indexOf(t);return this.$select.selectedIndex=n,this.$display.textContent=n===-1?t:this._names[n],this}}class ra extends Gt{constructor(t,n,i){super(t,n,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}const sa=`.lil-gui {
  font-family: var(--font-family);
  font-size: var(--font-size);
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  text-align: left;
  color: var(--text-color);
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  --background-color: #1f1f1f;
  --text-color: #ebebeb;
  --title-background-color: #111111;
  --title-text-color: #ebebeb;
  --widget-color: #424242;
  --hover-color: #4f4f4f;
  --focus-color: #595959;
  --number-color: #2cc9ff;
  --string-color: #a2db3c;
  --font-size: 11px;
  --input-font-size: 11px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;
  --padding: 4px;
  --spacing: 4px;
  --widget-height: 20px;
  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);
  --name-width: 45%;
  --slider-knob-width: 2px;
  --slider-input-width: 27%;
  --color-input-width: 27%;
  --slider-input-min-width: 45px;
  --color-input-min-width: 45px;
  --folder-indent: 7px;
  --widget-padding: 0 0 0 3px;
  --widget-border-radius: 2px;
  --checkbox-size: calc(0.75 * var(--widget-height));
  --scrollbar-width: 5px;
}
.lil-gui, .lil-gui * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
.lil-gui.root {
  width: var(--width, 245px);
  display: flex;
  flex-direction: column;
  background: var(--background-color);
}
.lil-gui.root > .title {
  background: var(--title-background-color);
  color: var(--title-text-color);
}
.lil-gui.root > .children {
  overflow-x: hidden;
  overflow-y: auto;
}
.lil-gui.root > .children::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background: var(--background-color);
}
.lil-gui.root > .children::-webkit-scrollbar-thumb {
  border-radius: var(--scrollbar-width);
  background: var(--focus-color);
}
@media (pointer: coarse) {
  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {
    --widget-height: 28px;
    --padding: 6px;
    --spacing: 6px;
    --font-size: 13px;
    --input-font-size: 16px;
    --folder-indent: 10px;
    --scrollbar-width: 7px;
    --slider-input-min-width: 50px;
    --color-input-min-width: 65px;
  }
}
.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {
  --widget-height: 28px;
  --padding: 6px;
  --spacing: 6px;
  --font-size: 13px;
  --input-font-size: 16px;
  --folder-indent: 10px;
  --scrollbar-width: 7px;
  --slider-input-min-width: 50px;
  --color-input-min-width: 65px;
}
.lil-gui.autoPlace {
  max-height: 100%;
  position: fixed;
  top: 0;
  right: 15px;
  z-index: 1001;
}

.lil-gui .controller {
  display: flex;
  align-items: center;
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
}
.lil-gui .controller.disabled {
  opacity: 0.5;
}
.lil-gui .controller.disabled, .lil-gui .controller.disabled * {
  pointer-events: none !important;
}
.lil-gui .controller > .name {
  min-width: var(--name-width);
  flex-shrink: 0;
  white-space: pre;
  padding-right: var(--spacing);
  line-height: var(--widget-height);
}
.lil-gui .controller .widget {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: var(--widget-height);
}
.lil-gui .controller.string input {
  color: var(--string-color);
}
.lil-gui .controller.boolean {
  cursor: pointer;
}
.lil-gui .controller.color .display {
  width: 100%;
  height: var(--widget-height);
  border-radius: var(--widget-border-radius);
  position: relative;
}
@media (hover: hover) {
  .lil-gui .controller.color .display:hover:before {
    content: " ";
    display: block;
    position: absolute;
    border-radius: var(--widget-border-radius);
    border: 1px solid #fff9;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
}
.lil-gui .controller.color input[type=color] {
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.lil-gui .controller.color input[type=text] {
  margin-left: var(--spacing);
  font-family: var(--font-family-mono);
  min-width: var(--color-input-min-width);
  width: var(--color-input-width);
  flex-shrink: 0;
}
.lil-gui .controller.option select {
  opacity: 0;
  position: absolute;
  width: 100%;
  max-width: 100%;
}
.lil-gui .controller.option .display {
  position: relative;
  pointer-events: none;
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  line-height: var(--widget-height);
  max-width: 100%;
  overflow: hidden;
  word-break: break-all;
  padding-left: 0.55em;
  padding-right: 1.75em;
  background: var(--widget-color);
}
@media (hover: hover) {
  .lil-gui .controller.option .display.focus {
    background: var(--focus-color);
  }
}
.lil-gui .controller.option .display.active {
  background: var(--focus-color);
}
.lil-gui .controller.option .display:after {
  font-family: "lil-gui";
  content: "↕";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding-right: 0.375em;
}
.lil-gui .controller.option .widget,
.lil-gui .controller.option select {
  cursor: pointer;
}
@media (hover: hover) {
  .lil-gui .controller.option .widget:hover .display {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number input {
  color: var(--number-color);
}
.lil-gui .controller.number.hasSlider input {
  margin-left: var(--spacing);
  width: var(--slider-input-width);
  min-width: var(--slider-input-min-width);
  flex-shrink: 0;
}
.lil-gui .controller.number .slider {
  width: 100%;
  height: var(--widget-height);
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  padding-right: var(--slider-knob-width);
  overflow: hidden;
  cursor: ew-resize;
  touch-action: pan-y;
}
@media (hover: hover) {
  .lil-gui .controller.number .slider:hover {
    background: var(--hover-color);
  }
}
.lil-gui .controller.number .slider.active {
  background: var(--focus-color);
}
.lil-gui .controller.number .slider.active .fill {
  opacity: 0.95;
}
.lil-gui .controller.number .fill {
  height: 100%;
  border-right: var(--slider-knob-width) solid var(--number-color);
  box-sizing: content-box;
}

.lil-gui-dragging .lil-gui {
  --hover-color: var(--widget-color);
}
.lil-gui-dragging * {
  cursor: ew-resize !important;
}

.lil-gui-dragging.lil-gui-vertical * {
  cursor: ns-resize !important;
}

.lil-gui .title {
  height: var(--title-height);
  line-height: calc(var(--title-height) - 4px);
  font-weight: 600;
  padding: 0 var(--padding);
  -webkit-tap-highlight-color: transparent;
  cursor: pointer;
  outline: none;
  text-decoration-skip: objects;
}
.lil-gui .title:before {
  font-family: "lil-gui";
  content: "▾";
  padding-right: 2px;
  display: inline-block;
}
.lil-gui .title:active {
  background: var(--title-background-color);
  opacity: 0.75;
}
@media (hover: hover) {
  body:not(.lil-gui-dragging) .lil-gui .title:hover {
    background: var(--title-background-color);
    opacity: 0.85;
  }
  .lil-gui .title:focus {
    text-decoration: underline var(--focus-color);
  }
}
.lil-gui.root > .title:focus {
  text-decoration: none !important;
}
.lil-gui.closed > .title:before {
  content: "▸";
}
.lil-gui.closed > .children {
  transform: translateY(-7px);
  opacity: 0;
}
.lil-gui.closed:not(.transition) > .children {
  display: none;
}
.lil-gui.transition > .children {
  transition-duration: 300ms;
  transition-property: height, opacity, transform;
  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);
  overflow: hidden;
  pointer-events: none;
}
.lil-gui .children:empty:before {
  content: "Empty";
  padding: 0 var(--padding);
  margin: var(--spacing) 0;
  display: block;
  height: var(--widget-height);
  font-style: italic;
  line-height: var(--widget-height);
  opacity: 0.5;
}
.lil-gui.root > .children > .lil-gui > .title {
  border: 0 solid var(--widget-color);
  border-width: 1px 0;
  transition: border-color 300ms;
}
.lil-gui.root > .children > .lil-gui.closed > .title {
  border-bottom-color: transparent;
}
.lil-gui + .controller {
  border-top: 1px solid var(--widget-color);
  margin-top: 0;
  padding-top: var(--spacing);
}
.lil-gui .lil-gui .lil-gui > .title {
  border: none;
}
.lil-gui .lil-gui .lil-gui > .children {
  border: none;
  margin-left: var(--folder-indent);
  border-left: 2px solid var(--widget-color);
}
.lil-gui .lil-gui .controller {
  border: none;
}

.lil-gui label, .lil-gui input, .lil-gui button {
  -webkit-tap-highlight-color: transparent;
}
.lil-gui input {
  border: 0;
  outline: none;
  font-family: var(--font-family);
  font-size: var(--input-font-size);
  border-radius: var(--widget-border-radius);
  height: var(--widget-height);
  background: var(--widget-color);
  color: var(--text-color);
  width: 100%;
}
@media (hover: hover) {
  .lil-gui input:hover {
    background: var(--hover-color);
  }
  .lil-gui input:active {
    background: var(--focus-color);
  }
}
.lil-gui input:disabled {
  opacity: 1;
}
.lil-gui input[type=text],
.lil-gui input[type=number] {
  padding: var(--widget-padding);
  -moz-appearance: textfield;
}
.lil-gui input[type=text]:focus,
.lil-gui input[type=number]:focus {
  background: var(--focus-color);
}
.lil-gui input[type=checkbox] {
  appearance: none;
  width: var(--checkbox-size);
  height: var(--checkbox-size);
  border-radius: var(--widget-border-radius);
  text-align: center;
  cursor: pointer;
}
.lil-gui input[type=checkbox]:checked:before {
  font-family: "lil-gui";
  content: "✓";
  font-size: var(--checkbox-size);
  line-height: var(--checkbox-size);
}
@media (hover: hover) {
  .lil-gui input[type=checkbox]:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button {
  outline: none;
  cursor: pointer;
  font-family: var(--font-family);
  font-size: var(--font-size);
  color: var(--text-color);
  width: 100%;
  height: var(--widget-height);
  text-transform: none;
  background: var(--widget-color);
  border-radius: var(--widget-border-radius);
  border: none;
}
@media (hover: hover) {
  .lil-gui button:hover {
    background: var(--hover-color);
  }
  .lil-gui button:focus {
    box-shadow: inset 0 0 0 1px var(--focus-color);
  }
}
.lil-gui button:active {
  background: var(--focus-color);
}

@font-face {
  font-family: "lil-gui";
  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");
}`;function oa(e){const t=document.createElement("style");t.innerHTML=e;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(t,n):document.head.appendChild(t)}let fr=!1;class Sn{constructor({parent:t,autoPlace:n=t===void 0,container:i,width:r,title:s="Controls",closeFolders:o=!1,injectStyles:a=!0,touchStyles:l=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",u=>{(u.code==="Enter"||u.code==="Space")&&(u.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent){this.parent.children.push(this),this.parent.folders.push(this),this.parent.$children.appendChild(this.domElement);return}this.domElement.classList.add("root"),l&&this.domElement.classList.add("allow-touch-styles"),!fr&&a&&(oa(sa),fr=!0),i?i.appendChild(this.domElement):n&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=o}add(t,n,i,r,s){if(Object(i)===i)return new ia(this,t,n,i);const o=t[n];switch(typeof o){case"number":return new na(this,t,n,i,r,s);case"boolean":return new Zo(this,t,n);case"string":return new ra(this,t,n);case"function":return new _n(this,t,n)}console.error(`gui.add failed
	property:`,n,`
	object:`,t,`
	value:`,o)}addColor(t,n,i=1){return new ea(this,t,n,i)}addFolder(t){const n=new Sn({parent:this,title:t});return this.root._closeFolders&&n.close(),n}load(t,n=!0){return t.controllers&&this.controllers.forEach(i=>{i instanceof _n||i._name in t.controllers&&i.load(t.controllers[i._name])}),n&&t.folders&&this.folders.forEach(i=>{i._title in t.folders&&i.load(t.folders[i._title])}),this}save(t=!0){const n={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof _n)){if(i._name in n.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);n.controllers[i._name]=i.save()}}),t&&this.folders.forEach(i=>{if(i._title in n.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);n.folders[i._title]=i.save()}),n}open(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(t){this._closed!==t&&(this._closed=t,this._callOnOpenClose(this))}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const n=this.$children.clientHeight;this.$children.style.height=n+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.textContent=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onOpenClose(t){return this._onOpenClose=t,this}_callOnOpenClose(t){this.parent&&this.parent._callOnOpenClose(t),this._onOpenClose!==void 0&&this._onOpenClose.call(this,t)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(n=>{t=t.concat(n.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(n=>{t=t.concat(n.foldersRecursive())}),t}}function De(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dr(e){let t,n,i;e.length!==2?(t=De,n=(a,l)=>De(e(a),l),i=(a,l)=>e(a)-l):(t=e===De||e===aa?e:la,n=e,i=e);function r(a,l,u=0,h=a.length){if(u<h){if(t(l,l)!==0)return h;do{const c=u+h>>>1;n(a[c],l)<0?u=c+1:h=c}while(u<h)}return u}function s(a,l,u=0,h=a.length){if(u<h){if(t(l,l)!==0)return h;do{const c=u+h>>>1;n(a[c],l)<=0?u=c+1:h=c}while(u<h)}return u}function o(a,l,u=0,h=a.length){const c=r(a,l,u,h-1);return c>u&&i(a[c-1],l)>-i(a[c],l)?c-1:c}return{left:r,center:o,right:s}}function la(){return 0}function ua(e){return e===null?NaN:+e}const ha=dr(De).right;dr(ua).center;class ca extends Map{constructor(t,n=pa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(pr(this,t))}has(t){return super.has(pr(this,t))}set(t,n){return super.set(fa(this,t),n)}delete(t){return super.delete(da(this,t))}}function pr({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function fa({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function da({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function pa(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mr(e){return e}function gr(e,t,...n){return br(e,mr,t,n)}function ma(e,...t){return br(e,mr,ga,t)}function ga(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function br(e,t,n,i){return function r(s,o){if(o>=i.length)return n(s);const a=new ca,l=i[o++];let u=-1;for(const h of s){const c=l(h,++u,s),f=a.get(c);f?f.push(h):a.set(c,[h])}for(const[h,c]of a)a.set(h,r(c,o));return t(a)}(e,0)}const ba=Math.sqrt(50),ya=Math.sqrt(10),xa=Math.sqrt(2);function Fe(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=ba?10:s>=ya?5:s>=xa?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,r)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?Fe(e,t,n*2):[a,l,u]}function En(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,o]=i?Fe(t,e,n):Fe(e,t,n);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(i)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(r+u)/-o;else for(let u=0;u<a;++u)l[u]=(r+u)*o;return l}function Cn(e,t,n){return t=+t,e=+e,n=+n,Fe(e,t,n)[2]}function wa(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Cn(t,e,n):Cn(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function va(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Ma(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function Aa(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Tn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yr(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ce(){}var fe=.7,qe=1/fe,Xt="\\s*([+-]?\\d+)\\s*",de="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ka=/^#([0-9a-f]{3,8})$/,_a=new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),Sa=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),Ea=new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${de}\\)$`),Ca=new RegExp(`^rgba\\(${ht},${ht},${ht},${de}\\)$`),Ta=new RegExp(`^hsl\\(${de},${ht},${ht}\\)$`),Na=new RegExp(`^hsla\\(${de},${ht},${ht},${de}\\)$`),xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(ce,Tt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wr,formatHex:wr,formatHex8:La,formatHsl:Pa,formatRgb:vr,toString:vr});function wr(){return this.rgb().formatHex()}function La(){return this.rgb().formatHex8()}function Pa(){return Sr(this).formatHsl()}function vr(){return this.rgb().formatRgb()}function Tt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ka.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mr(t):n===3?new Q(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?je(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?je(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_a.exec(e))?new Q(t[1],t[2],t[3],1):(t=Sa.exec(e))?new Q(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ea.exec(e))?je(t[1],t[2],t[3],t[4]):(t=Ca.exec(e))?je(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ta.exec(e))?_r(t[1],t[2]/100,t[3]/100,1):(t=Na.exec(e))?_r(t[1],t[2]/100,t[3]/100,t[4]):xr.hasOwnProperty(e)?Mr(xr[e]):e==="transparent"?new Q(NaN,NaN,NaN,0):null}function Mr(e){return new Q(e>>16&255,e>>8&255,e&255,1)}function je(e,t,n,i){return i<=0&&(e=t=n=NaN),new Q(e,t,n,i)}function za(e){return e instanceof ce||(e=Tt(e)),e?(e=e.rgb(),new Q(e.r,e.g,e.b,e.opacity)):new Q}function Nn(e,t,n,i){return arguments.length===1?za(e):new Q(e,t,n,i??1)}function Q(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Tn(Q,Nn,yr(ce,{brighter(e){return e=e==null?qe:Math.pow(qe,e),new Q(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fe:Math.pow(fe,e),new Q(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Q(Nt(this.r),Nt(this.g),Nt(this.b),He(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ar,formatHex:Ar,formatHex8:Ra,formatRgb:kr,toString:kr}));function Ar(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}`}function Ra(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}${Lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function kr(){const e=He(this.opacity);return`${e===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${e===1?")":`, ${e})`}`}function He(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lt(e){return e=Nt(e),(e<16?"0":"")+e.toString(16)}function _r(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new at(e,t,n,i)}function Sr(e){if(e instanceof at)return new at(e.h,e.s,e.l,e.opacity);if(e instanceof ce||(e=Tt(e)),!e)return new at;if(e instanceof at)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new at(o,a,l,e.opacity)}function Ia(e,t,n,i){return arguments.length===1?Sr(e):new at(e,t,n,i??1)}function at(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Tn(at,Ia,yr(ce,{brighter(e){return e=e==null?qe:Math.pow(qe,e),new at(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fe:Math.pow(fe,e),new at(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Q(Ln(e>=240?e-240:e+120,r,i),Ln(e,r,i),Ln(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new at(Er(this.h),Ye(this.s),Ye(this.l),He(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=He(this.opacity);return`${e===1?"hsl(":"hsla("}${Er(this.h)}, ${Ye(this.s)*100}%, ${Ye(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Er(e){return e=(e||0)%360,e<0?e+360:e}function Ye(e){return Math.max(0,Math.min(1,e||0))}function Ln(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Pn=e=>()=>e;function Oa(e,t){return function(n){return e+n*t}}function Da(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Fa(e){return(e=+e)==1?Cr:function(t,n){return n-t?Da(t,n,e):Pn(isNaN(t)?n:t)}}function Cr(e,t){var n=t-e;return n?Oa(e,n):Pn(isNaN(e)?t:e)}const Tr=function e(t){var n=Fa(t);function i(r,s){var o=n((r=Nn(r)).r,(s=Nn(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),u=Cr(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=a(h),r.b=l(h),r.opacity=u(h),r+""}}return i.gamma=e,i}(1);function qa(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function ja(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ha(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=In(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function Ya(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Be(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ba(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=In(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rn=new RegExp(zn.source,"g");function Ga(e){return function(){return e}}function Xa(e){return function(t){return e(t)+""}}function Ua(e,t){var n=zn.lastIndex=Rn.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(i=zn.exec(e))&&(r=Rn.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Be(i,r)})),n=Rn.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Xa(l[0].x):Ga(t):(t=l.length,function(u){for(var h=0,c;h<t;++h)a[(c=l[h]).i]=c.x(u);return a.join("")})}function In(e,t){var n=typeof t,i;return t==null||n==="boolean"?Pn(t):(n==="number"?Be:n==="string"?(i=Tt(t))?(t=i,Tr):Ua:t instanceof Tt?Tr:t instanceof Date?Ya:ja(t)?qa:Array.isArray(t)?Ha:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ba:Be)(e,t)}function Va(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}const On=Math.PI,Dn=2*On,Pt=1e-6,$a=Dn-Pt;function Nr(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ja(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Nr;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let Wa=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Nr:Ja(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-t,u=r-n,h=o-t,c=a-n,f=h*h+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Pt)if(!(Math.abs(c*l-u*h)>Pt)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=i-o,m=r-a,y=l*l+u*u,g=d*d+m*m,p=Math.sqrt(y),b=Math.sqrt(f),x=s*Math.tan((On-Math.acos((y+f-g)/(2*p*b)))/2),A=x/b,M=x/p;Math.abs(A-1)>Pt&&this._append`L${t+A*h},${n+A*c}`,this._append`A${s},${s},0,0,${+(c*d>h*m)},${this._x1=t+M*l},${this._y1=n+M*u}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),u=t+a,h=n+l,c=1^o,f=o?r-s:s-r;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Pt||Math.abs(this._y1-h)>Pt)&&this._append`L${u},${h}`,i&&(f<0&&(f=f%Dn+Dn),f>$a?this._append`A${i},${i},0,1,${c},${t-a},${n-l}A${i},${i},0,1,${c},${this._x1=u},${this._y1=h}`:f>Pt&&this._append`A${i},${i},0,${+(f>=On)},${c},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Fn(e=3){return new Wa(+e)}function Za(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ge(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Ut(e){return e=Ge(Math.abs(e)),e?e[1]:NaN}function Ka(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Qa(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var tl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pe(e){if(!(t=tl.exec(e)))throw new Error("invalid format: "+e);var t;return new qn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}pe.prototype=qn.prototype;function qn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function el(e){t:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var Lr;function nl(e,t){var n=Ge(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(Lr=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ge(e,Math.max(0,t+s-1))[0]}function Pr(e,t){var n=Ge(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const zr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Za,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Pr(e*100,t),r:Pr,s:nl,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Rr(e){return e}var Ir=Array.prototype.map,Or=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function il(e){var t=e.grouping===void 0||e.thousands===void 0?Rr:Ka(Ir.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Rr:Qa(Ir.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(c){c=pe(c);var f=c.fill,d=c.align,m=c.sign,y=c.symbol,g=c.zero,p=c.width,b=c.comma,x=c.precision,A=c.trim,M=c.type;M==="n"?(b=!0,M="g"):zr[M]||(x===void 0&&(x=12),A=!0,M="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var k=y==="$"?n:y==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",I=y==="$"?i:/[%p]/.test(M)?o:"",_=zr[M],L=/[defgprs%]/.test(M);x=x===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function q(E){var B=k,U=I,nt,dt,ut;if(M==="c")U=_(E)+U,E="";else{E=+E;var pt=E<0||1/E<0;if(E=isNaN(E)?l:_(Math.abs(E),x),A&&(E=el(E)),pt&&+E==0&&m!=="+"&&(pt=!1),B=(pt?m==="("?m:a:m==="-"||m==="("?"":m)+B,U=(M==="s"?Or[8+Lr/3]:"")+U+(pt&&m==="("?")":""),L){for(nt=-1,dt=E.length;++nt<dt;)if(ut=E.charCodeAt(nt),48>ut||ut>57){U=(ut===46?r+E.slice(nt+1):E.slice(nt))+U,E=E.slice(0,nt);break}}}b&&!g&&(E=t(E,1/0));var mt=B.length+E.length+U.length,Z=mt<p?new Array(p-mt+1).join(f):"";switch(b&&g&&(E=t(Z+E,Z.length?p-U.length:1/0),Z=""),d){case"<":E=B+E+U+Z;break;case"=":E=B+Z+E+U;break;case"^":E=Z.slice(0,mt=Z.length>>1)+B+E+U+Z.slice(mt);break;default:E=Z+B+E+U;break}return s(E)}return q.toString=function(){return c+""},q}function h(c,f){var d=u((c=pe(c),c.type="f",c)),m=Math.max(-8,Math.min(8,Math.floor(Ut(f)/3)))*3,y=Math.pow(10,-m),g=Or[8+m/3];return function(p){return d(y*p)+g}}return{format:u,formatPrefix:h}}var Xe,Ue,Dr;rl({thousands:",",grouping:[3],currency:["$",""]});function rl(e){return Xe=il(e),Ue=Xe.format,Dr=Xe.formatPrefix,Xe}function sl(e){return Math.max(0,-Ut(Math.abs(e)))}function ol(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ut(t)/3)))*3-Ut(Math.abs(e)))}function al(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ut(t)-Ut(e))+1}function Fr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ll(e){return function(){return e}}function ul(e){return+e}var qr=[0,1];function Vt(e){return e}function jn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ll(isNaN(t)?NaN:.5)}function hl(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function cl(e,t,n){var i=e[0],r=e[1],s=t[0],o=t[1];return r<i?(i=jn(r,i),s=n(o,s)):(i=jn(i,r),s=n(s,o)),function(a){return s(i(a))}}function fl(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=jn(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=ha(e,a,1,i)-1;return s[l](r[l](a))}}function jr(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hr(){var e=qr,t=qr,n=In,i,r,s,o=Vt,a,l,u;function h(){var f=Math.min(e.length,t.length);return o!==Vt&&(o=hl(e[0],e[f-1])),a=f>2?fl:cl,l=u=null,c}function c(f){return f==null||isNaN(f=+f)?s:(l||(l=a(e.map(i),t,n)))(i(o(f)))}return c.invert=function(f){return o(r((u||(u=a(t,e.map(i),Be)))(f)))},c.domain=function(f){return arguments.length?(e=Array.from(f,ul),h()):e.slice()},c.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},c.rangeRound=function(f){return t=Array.from(f),n=Va,h()},c.clamp=function(f){return arguments.length?(o=f?!0:Vt,h()):o!==Vt},c.interpolate=function(f){return arguments.length?(n=f,h()):n},c.unknown=function(f){return arguments.length?(s=f,c):s},function(f,d){return i=f,r=d,h()}}function dl(){return Hr()(Vt,Vt)}function pl(e,t,n,i){var r=wa(e,t,n),s;switch(i=pe(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=ol(r,o))&&(i.precision=s),Dr(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=al(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=sl(r))&&(i.precision=s-(i.type==="%")*2);break}}return Ue(i)}function ml(e){var t=e.domain;return e.ticks=function(n){var i=t();return En(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return pl(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,o=i[r],a=i[s],l,u,h=10;for(a<o&&(u=o,o=a,a=u,u=r,r=s,s=u);h-- >0;){if(u=Cn(o,a,n),u===l)return i[r]=o,i[s]=a,t(i);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function Hn(){var e=dl();return e.copy=function(){return jr(e,Hn())},Fr.apply(e,arguments),ml(e)}function gl(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),e[n]=t.floor(r),e[i]=t.ceil(s),e}function Yr(e){return Math.log(e)}function Br(e){return Math.exp(e)}function bl(e){return-Math.log(-e)}function yl(e){return-Math.exp(-e)}function xl(e){return isFinite(e)?+("1e"+e):e<0?0:e}function wl(e){return e===10?xl:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vl(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gr(e){return(t,n)=>-e(-t,n)}function Ml(e){const t=e(Yr,Br),n=t.domain;let i=10,r,s;function o(){return r=vl(i),s=wl(i),n()[0]<0?(r=Gr(r),s=Gr(s),e(bl,yl)):e(Yr,Br),t}return t.base=function(a){return arguments.length?(i=+a,o()):i},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let u=l[0],h=l[l.length-1];const c=h<u;c&&([u,h]=[h,u]);let f=r(u),d=r(h),m,y;const g=a==null?10:+a;let p=[];if(!(i%1)&&d-f<g){if(f=Math.floor(f),d=Math.ceil(d),u>0){for(;f<=d;++f)for(m=1;m<i;++m)if(y=f<0?m/s(-f):m*s(f),!(y<u)){if(y>h)break;p.push(y)}}else for(;f<=d;++f)for(m=i-1;m>=1;--m)if(y=f>0?m/s(-f):m*s(f),!(y<u)){if(y>h)break;p.push(y)}p.length*2<g&&(p=En(u,h,g))}else p=En(f,d,Math.min(d-f,g)).map(s);return c?p.reverse():p},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=pe(l)).precision==null&&(l.trim=!0),l=Ue(l)),a===1/0)return l;const u=Math.max(1,i*a/t.ticks().length);return h=>{let c=h/s(Math.round(r(h)));return c*i<i-.5&&(c*=i),c<=u?l(h):""}},t.nice=()=>n(gl(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),t}function Xr(){const e=Ml(Hr()).domain([1,10]);return e.copy=()=>jr(e,Xr()).base(e.base()),Fr.apply(e,arguments),e}function me(e,t,n){this.k=e,this.x=t,this.y=n}me.prototype={constructor:me,scale:function(e){return e===1?this:new me(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new me(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},me.prototype;function Al(e,t){return{ranks:e.ranks,samples:e.samples.filter(n=>n.patient==t),phylogeny:e.phylogeny.filter(n=>n.patient==t),compositions:e.compositions.filter(n=>n.patient==t)}}const Ur=(e,t)=>{if(typeof e=="number"){if(t===3)return{mode:"rgb",r:(e>>8&15|e>>4&240)/255,g:(e>>4&15|e&240)/255,b:(e&15|e<<4&240)/255};if(t===4)return{mode:"rgb",r:(e>>12&15|e>>8&240)/255,g:(e>>8&15|e>>4&240)/255,b:(e>>4&15|e&240)/255,alpha:(e&15|e<<4&240)/255};if(t===6)return{mode:"rgb",r:(e>>16&255)/255,g:(e>>8&255)/255,b:(e&255)/255};if(t===8)return{mode:"rgb",r:(e>>24&255)/255,g:(e>>16&255)/255,b:(e>>8&255)/255,alpha:(e&255)/255}}},kl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_l=e=>Ur(kl[e.toLowerCase()],6),Sl=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,El=e=>{let t;return(t=e.match(Sl))?Ur(parseInt(t[1],16),t[1].length):void 0},vt="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",ge=`${vt}%`,Yn=`(?:${vt}%|${vt})`,Cl=`(?:${vt}(deg|grad|rad|turn)|${vt})`,$t="\\s*,\\s*",Tl=new RegExp(`^rgba?\\(\\s*${vt}${$t}${vt}${$t}${vt}\\s*(?:,\\s*${Yn}\\s*)?\\)$`),Nl=new RegExp(`^rgba?\\(\\s*${ge}${$t}${ge}${$t}${ge}\\s*(?:,\\s*${Yn}\\s*)?\\)$`),Ll=e=>{let t={mode:"rgb"},n;if(n=e.match(Tl))n[1]!==void 0&&(t.r=n[1]/255),n[2]!==void 0&&(t.g=n[2]/255),n[3]!==void 0&&(t.b=n[3]/255);else if(n=e.match(Nl))n[1]!==void 0&&(t.r=n[1]/100),n[2]!==void 0&&(t.g=n[2]/100),n[3]!==void 0&&(t.b=n[3]/100);else return;return n[4]!==void 0?t.alpha=Math.max(0,Math.min(1,n[4]/100)):n[5]!==void 0&&(t.alpha=Math.max(0,Math.min(1,+n[5]))),t},Ve=(e,t)=>e===void 0?void 0:typeof e!="object"?jl(e):e.mode!==void 0?e:t?{...e,mode:t}:void 0,gt=(e="rgb")=>t=>(t=Ve(t,e))!==void 0?t.mode===e?t:ct[t.mode][e]?ct[t.mode][e](t):e==="rgb"?ct[t.mode].rgb(t):ct.rgb[e](ct[t.mode].rgb(t)):void 0,ct={},Vr={},$e=[],$r={},Pl=e=>e,O=e=>(ct[e.mode]={...ct[e.mode],...e.toMode},Object.keys(e.fromMode||{}).forEach(t=>{ct[t]||(ct[t]={}),ct[t][e.mode]=e.fromMode[t]}),e.ranges||(e.ranges={}),e.difference||(e.difference={}),e.channels.forEach(t=>{if(e.ranges[t]===void 0&&(e.ranges[t]=[0,1]),!e.interpolate[t])throw new Error(`Missing interpolator for: ${t}`);typeof e.interpolate[t]=="function"&&(e.interpolate[t]={use:e.interpolate[t]}),e.interpolate[t].fixup||(e.interpolate[t].fixup=Pl)}),Vr[e.mode]=e,(e.parse||[]).forEach(t=>{zl(t,e.mode)}),gt(e.mode)),be=e=>Vr[e],zl=(e,t)=>{if(typeof e=="string"){if(!t)throw new Error("'mode' required when 'parser' is a string");$r[e]=t}else typeof e=="function"&&$e.indexOf(e)<0&&$e.push(e)},Bn=/[^\x00-\x7F]|[a-zA-Z_]/,Rl=/[^\x00-\x7F]|[-\w]/,w={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"};let C=0;function Je(e){let t=e[C],n=e[C+1];return t==="-"||t==="+"?/\d/.test(n)||n==="."&&/\d/.test(e[C+2]):t==="."?/\d/.test(n):/\d/.test(t)}function Gn(e){if(C>=e.length)return!1;let t=e[C];if(Bn.test(t))return!0;if(t==="-"){if(e.length-C<2)return!1;let n=e[C+1];return!!(n==="-"||Bn.test(n))}return!1}const Il={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function ye(e){let t="";if((e[C]==="-"||e[C]==="+")&&(t+=e[C++]),t+=We(e),e[C]==="."&&/\d/.test(e[C+1])&&(t+=e[C++]+We(e)),(e[C]==="e"||e[C]==="E")&&((e[C+1]==="-"||e[C+1]==="+")&&/\d/.test(e[C+2])?t+=e[C++]+e[C++]+We(e):/\d/.test(e[C+1])&&(t+=e[C++]+We(e))),Gn(e)){let n=Ze(e);return n==="deg"||n==="rad"||n==="turn"||n==="grad"?{type:w.Hue,value:t*Il[n]}:void 0}return e[C]==="%"?(C++,{type:w.Percentage,value:+t}):{type:w.Number,value:+t}}function We(e){let t="";for(;/\d/.test(e[C]);)t+=e[C++];return t}function Ze(e){let t="";for(;C<e.length&&Rl.test(e[C]);)t+=e[C++];return t}function Ol(e){let t=Ze(e);return e[C]==="("?(C++,{type:w.Function,value:t}):t==="none"?{type:w.None,value:void 0}:{type:w.Ident,value:t}}function Dl(e=""){let t=e.trim(),n=[],i;for(C=0;C<t.length;){if(i=t[C++],i===`
`||i==="	"||i===" "){for(;C<t.length&&(t[C]===`
`||t[C]==="	"||t[C]===" ");)C++;continue}if(i===",")return;if(i===")"){n.push({type:w.ParenClose});continue}if(i==="+"){if(C--,Je(t)){n.push(ye(t));continue}return}if(i==="-"){if(C--,Je(t)){n.push(ye(t));continue}if(Gn(t)){n.push({type:w.Ident,value:Ze(t)});continue}return}if(i==="."){if(C--,Je(t)){n.push(ye(t));continue}return}if(i==="/"){for(;C<t.length&&(t[C]===`
`||t[C]==="	"||t[C]===" ");)C++;let r;if(Je(t)&&(r=ye(t),r.type!==w.Hue)){n.push({type:w.Alpha,value:r});continue}if(Gn(t)&&Ze(t)==="none"){n.push({type:w.Alpha,value:{type:w.None,value:void 0}});continue}return}if(/\d/.test(i)){C--,n.push(ye(t));continue}if(Bn.test(i)){C--,n.push(Ol(t));continue}return}return n}function Fl(e){e._i=0;let t=e[e._i++];if(!t||t.type!==w.Function||t.value!=="color"||(t=e[e._i++],t.type!==w.Ident))return;const n=$r[t.value];if(!n)return;const i={mode:n},r=Jr(e,!1);if(!r)return;const s=be(n).channels;for(let o=0,a,l;o<s.length;o++)a=r[o],l=s[o],a.type!==w.None&&(i[l]=a.type===w.Number?a.value:a.value/100,l==="alpha"&&(i[l]=Math.max(0,Math.min(1,i[l]))));return i}function Jr(e,t){const n=[];let i;for(;e._i<e.length;){if(i=e[e._i++],i.type===w.None||i.type===w.Number||i.type===w.Alpha||i.type===w.Percentage||t&&i.type===w.Hue){n.push(i);continue}if(i.type===w.ParenClose){if(e._i<e.length)return;continue}return}if(!(n.length<3||n.length>4)){if(n.length===4){if(n[3].type!==w.Alpha)return;n[3]=n[3].value}return n.length===3&&n.push({type:w.None,value:void 0}),n.every(r=>r.type!==w.Alpha)?n:void 0}}function ql(e,t){e._i=0;let n=e[e._i++];if(!n||n.type!==w.Function)return;let i=Jr(e,t);if(i)return i.unshift(n.value),i}const jl=e=>{if(typeof e!="string")return;const t=Dl(e),n=t?ql(t,!0):void 0;let i,r=0,s=$e.length;for(;r<s;)if((i=$e[r++](e,n))!==void 0)return i;return t?Fl(t):void 0};function Hl(e,t){if(!t||t[0]!=="rgb"&&t[0]!=="rgba")return;const n={mode:"rgb"},[,i,r,s,o]=t;if(!(i.type===w.Hue||r.type===w.Hue||s.type===w.Hue))return i.type!==w.None&&(n.r=i.type===w.Number?i.value/255:i.value/100),r.type!==w.None&&(n.g=r.type===w.Number?r.value/255:r.value/100),s.type!==w.None&&(n.b=s.type===w.Number?s.value/255:s.value/100),o.type!==w.None&&(n.alpha=Math.min(1,Math.max(0,o.type===w.Number?o.value:o.value/100))),n}const Yl=e=>e==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,Bl=(e,t,n)=>e+n*(t-e),Gl=e=>{let t=[];for(let n=0;n<e.length-1;n++){let i=e[n],r=e[n+1];i===void 0&&r===void 0?t.push(void 0):i!==void 0&&r!==void 0?t.push([i,r]):t.push(i!==void 0?[i,i]:[r,r])}return t},v=(e=>t=>{let n=Gl(t);return i=>{let r=i*n.length,s=i>=1?n.length-1:Math.max(Math.floor(r),0),o=n[s];return o===void 0?void 0:e(o[0],o[1],r-s)}})(Bl),V=e=>{let t=!1,n=e.map(i=>i!==void 0?(t=!0,i):1);return t?n:e},Jt={mode:"rgb",channels:["r","g","b","alpha"],parse:[Hl,El,Ll,_l,Yl,"srgb"],serialize:"srgb",interpolate:{r:v,g:v,b:v,alpha:{use:v,fixup:V}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},Xn=(e=0)=>Math.pow(Math.abs(e),563/256)*Math.sign(e),Wr=e=>{let t=Xn(e.r),n=Xn(e.g),i=Xn(e.b),r={mode:"xyz65",x:.5766690429101305*t+.1855582379065463*n+.1882286462349947*i,y:.297344975250536*t+.6273635662554661*n+.0752914584939979*i,z:.0270313613864123*t+.0706888525358272*n+.9913375368376386*i};return e.alpha!==void 0&&(r.alpha=e.alpha),r},Un=e=>Math.pow(Math.abs(e),256/563)*Math.sign(e),Zr=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"a98",r:Un(e*2.0415879038107465-t*.5650069742788597-.3447313507783297*n),g:Un(e*-.9692436362808798+t*1.8759675015077206+.0415550574071756*n),b:Un(e*.0134442806320312-t*.1183623922310184+1.0151749943912058*n)};return i!==void 0&&(r.alpha=i),r},Vn=(e=0)=>{const t=Math.abs(e);return t<=.04045?e/12.92:(Math.sign(e)||1)*Math.pow((t+.055)/1.055,2.4)},Wt=({r:e,g:t,b:n,alpha:i})=>{let r={mode:"lrgb",r:Vn(e),g:Vn(t),b:Vn(n)};return i!==void 0&&(r.alpha=i),r},zt=e=>{let{r:t,g:n,b:i,alpha:r}=Wt(e),s={mode:"xyz65",x:.4123907992659593*t+.357584339383878*n+.1804807884018343*i,y:.2126390058715102*t+.715168678767756*n+.0721923153607337*i,z:.0193308187155918*t+.119194779794626*n+.9505321522496607*i};return r!==void 0&&(s.alpha=r),s},$n=(e=0)=>{const t=Math.abs(e);return t>.0031308?(Math.sign(e)||1)*(1.055*Math.pow(t,1/2.4)-.055):e*12.92},Zt=({r:e,g:t,b:n,alpha:i},r="rgb")=>{let s={mode:r,r:$n(e),g:$n(t),b:$n(n)};return i!==void 0&&(s.alpha=i),s},Rt=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Zt({r:e*3.2409699419045226-t*1.537383177570094-.4986107602930034*n,g:e*-.9692436362808796+t*1.8759675015077204+.0415550574071756*n,b:e*.0556300796969936-t*.2039769588889765+1.0569715142428784*n});return i!==void 0&&(r.alpha=i),r},Xl={...Jt,mode:"a98",parse:["a98-rgb"],serialize:"a98-rgb",fromMode:{rgb:e=>Zr(zt(e)),xyz65:Zr},toMode:{rgb:e=>Rt(Wr(e)),xyz65:Wr}},J=e=>(e=e%360)<0?e+360:e,Ul=(e,t)=>e.map((n,i,r)=>{if(n===void 0)return n;let s=J(n);return i===0||e[i-1]===void 0?s:t(s-J(r[i-1]))}).reduce((n,i)=>!n.length||i===void 0||n[n.length-1]===void 0?(n.push(i),n):(n.push(i+n[n.length-1]),n),[]),bt=e=>Ul(e,t=>Math.abs(t)<=180?t:t-360*Math.sign(t)),$=[-.14861,1.78277,-.29227,-.90649,1.97294,0],Vl=Math.PI/180,$l=180/Math.PI;let Kr=$[3]*$[4],Qr=$[1]*$[4],ts=$[1]*$[2]-$[0]*$[3];const Jl=({r:e,g:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(ts*n+e*Kr-t*Qr)/(ts+Kr-Qr),s=n-r,o=($[4]*(t-r)-$[2]*s)/$[3],a={mode:"cubehelix",l:r,s:r===0||r===1?void 0:Math.sqrt(s*s+o*o)/($[4]*r*(1-r))};return a.s&&(a.h=Math.atan2(o,s)*$l-120),i!==void 0&&(a.alpha=i),a},Wl=({h:e,s:t,l:n,alpha:i})=>{let r={mode:"rgb"};e=(e===void 0?0:e+120)*Vl,n===void 0&&(n=0);let s=t===void 0?0:t*n*(1-n),o=Math.cos(e),a=Math.sin(e);return r.r=n+s*($[0]*o+$[1]*a),r.g=n+s*($[2]*o+$[3]*a),r.b=n+s*($[4]*o+$[5]*a),i!==void 0&&(r.alpha=i),r},Ke=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.s||!t.s)return 0;let n=J(e.h),i=J(t.h),r=Math.sin((i-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.s*t.s)*r},Zl=(e,t)=>{if(e.h===void 0||t.h===void 0)return 0;let n=J(e.h),i=J(t.h);return Math.abs(i-n)>180?n-(i-360*Math.sign(i-n)):i-n},Qe=(e,t)=>{if(e.h===void 0||t.h===void 0||!e.c||!t.c)return 0;let n=J(e.h),i=J(t.h),r=Math.sin((i-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.c*t.c)*r},Kl=(e="rgb",t=[1,1,1,0])=>{let n=be(e),i=n.channels,r=n.difference,s=gt(e);return(o,a)=>{let l=s(o),u=s(a);return Math.sqrt(i.reduce((h,c,f)=>{let d=r[c]?r[c](l,u):l[c]-u[c];return h+(t[f]||0)*Math.pow(isNaN(d)?0:d,2)},0))}},yt=e=>{let t=e.reduce((i,r)=>{if(r!==void 0){let s=r*Math.PI/180;i.sin+=Math.sin(s),i.cos+=Math.cos(s)}return i},{sin:0,cos:0}),n=Math.atan2(t.sin,t.cos)*180/Math.PI;return n<0?360+n:n},Ql={mode:"cubehelix",channels:["h","s","l","alpha"],parse:["--cubehelix"],serialize:"--cubehelix",ranges:{h:[0,360],s:[0,4.614],l:[0,1]},fromMode:{rgb:Jl},toMode:{rgb:Wl},interpolate:{h:{use:v,fixup:bt},s:v,l:v,alpha:{use:v,fixup:V}},difference:{h:Ke},average:{h:yt}},Mt=({l:e,a:t,b:n,alpha:i},r="lch")=>{t===void 0&&(t=0),n===void 0&&(n=0);let s=Math.sqrt(t*t+n*n),o={mode:r,l:e,c:s};return s&&(o.h=J(Math.atan2(n,t)*180/Math.PI)),i!==void 0&&(o.alpha=i),o},At=({l:e,c:t,h:n,alpha:i},r="lab")=>{n===void 0&&(n=0);let s={mode:r,l:e,a:t?t*Math.cos(n/180*Math.PI):0,b:t?t*Math.sin(n/180*Math.PI):0};return i!==void 0&&(s.alpha=i),s},es=Math.pow(29,3)/Math.pow(3,3),ns=Math.pow(6,3)/Math.pow(29,3),X={X:.3457/.3585,Y:1,Z:(1-.3457-.3585)/.3585},Kt={X:.3127/.329,Y:1,Z:(1-.3127-.329)/.329};let Jn=e=>Math.pow(e,3)>ns?Math.pow(e,3):(116*e-16)/es;const is=({l:e,a:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(e+16)/116,s=t/500+r,o=r-n/200,a={mode:"xyz65",x:Jn(s)*Kt.X,y:Jn(r)*Kt.Y,z:Jn(o)*Kt.Z};return i!==void 0&&(a.alpha=i),a},tn=e=>Rt(is(e)),Wn=e=>e>ns?Math.cbrt(e):(es*e+16)/116,rs=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Wn(e/Kt.X),s=Wn(t/Kt.Y),o=Wn(n/Kt.Z),a={mode:"lab65",l:116*s-16,a:500*(r-s),b:200*(s-o)};return i!==void 0&&(a.alpha=i),a},en=e=>{let t=rs(zt(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},nn=1,ss=1,xe=26/180*Math.PI,rn=Math.cos(xe),sn=Math.sin(xe),os=100/Math.log(139/100),Zn=({l:e,c:t,h:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"lab65",l:(Math.exp(e*nn/os)-1)/.0039},s=(Math.exp(.0435*t*ss*nn)-1)/.075,o=s*Math.cos(n/180*Math.PI-xe),a=s*Math.sin(n/180*Math.PI-xe);return r.a=o*rn-a/.83*sn,r.b=o*sn+a/.83*rn,i!==void 0&&(r.alpha=i),r},Kn=({l:e,a:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=t*rn+n*sn,s=.83*(n*rn-t*sn),o=Math.sqrt(r*r+s*s),a={mode:"dlch",l:os/nn*Math.log(1+.0039*e),c:Math.log(1+.075*o)/(.0435*ss*nn)};return a.c&&(a.h=J((Math.atan2(s,r)+xe)/Math.PI*180)),i!==void 0&&(a.alpha=i),a},as=e=>Zn(Mt(e,"dlch")),ls=e=>At(Kn(e),"dlab"),tu={mode:"dlab",parse:["--din99o-lab"],serialize:"--din99o-lab",toMode:{lab65:as,rgb:e=>tn(as(e))},fromMode:{lab65:ls,rgb:e=>ls(en(e))},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-40.09,45.501],b:[-40.469,44.344]},interpolate:{l:v,a:v,b:v,alpha:{use:v,fixup:V}}},eu={mode:"dlch",parse:["--din99o-lch"],serialize:"--din99o-lch",toMode:{lab65:Zn,dlab:e=>At(e,"dlab"),rgb:e=>tn(Zn(e))},fromMode:{lab65:Kn,dlab:e=>Mt(e,"dlch"),rgb:e=>Kn(en(e))},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,51.484],h:[0,360]},interpolate:{l:v,c:v,h:{use:v,fixup:bt},alpha:{use:v,fixup:V}},difference:{h:Qe},average:{h:yt}};function nu({h:e,s:t,i:n,alpha:i}){e=J(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.abs(e/60%2-1),s;switch(Math.floor(e/60)){case 0:s={r:n*(1+t*(3/(2-r)-1)),g:n*(1+t*(3*(1-r)/(2-r)-1)),b:n*(1-t)};break;case 1:s={r:n*(1+t*(3*(1-r)/(2-r)-1)),g:n*(1+t*(3/(2-r)-1)),b:n*(1-t)};break;case 2:s={r:n*(1-t),g:n*(1+t*(3/(2-r)-1)),b:n*(1+t*(3*(1-r)/(2-r)-1))};break;case 3:s={r:n*(1-t),g:n*(1+t*(3*(1-r)/(2-r)-1)),b:n*(1+t*(3/(2-r)-1))};break;case 4:s={r:n*(1+t*(3*(1-r)/(2-r)-1)),g:n*(1-t),b:n*(1+t*(3/(2-r)-1))};break;case 5:s={r:n*(1+t*(3/(2-r)-1)),g:n*(1-t),b:n*(1+t*(3*(1-r)/(2-r)-1))};break;default:s={r:n*(1-t),g:n*(1-t),b:n*(1-t)}}return s.mode="rgb",i!==void 0&&(s.alpha=i),s}function iu({r:e,g:t,b:n,alpha:i}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.max(e,t,n),s=Math.min(e,t,n),o={mode:"hsi",s:e+t+n===0?0:1-3*s/(e+t+n),i:(e+t+n)/3};return r-s!==0&&(o.h=(r===e?(t-n)/(r-s)+(t<n)*6:r===t?(n-e)/(r-s)+2:(e-t)/(r-s)+4)*60),i!==void 0&&(o.alpha=i),o}const ru={mode:"hsi",toMode:{rgb:nu},parse:["--hsi"],serialize:"--hsi",fromMode:{rgb:iu},channels:["h","s","i","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:v,fixup:bt},s:v,i:v,alpha:{use:v,fixup:V}},difference:{h:Ke},average:{h:yt}};function su({h:e,s:t,l:n,alpha:i}){e=J(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let r=n+t*(n<.5?n:1-n),s=r-(r-n)*2*Math.abs(e/60%2-1),o;switch(Math.floor(e/60)){case 0:o={r,g:s,b:2*n-r};break;case 1:o={r:s,g:r,b:2*n-r};break;case 2:o={r:2*n-r,g:r,b:s};break;case 3:o={r:2*n-r,g:s,b:r};break;case 4:o={r:s,g:2*n-r,b:r};break;case 5:o={r,g:2*n-r,b:s};break;default:o={r:2*n-r,g:2*n-r,b:2*n-r}}return o.mode="rgb",i!==void 0&&(o.alpha=i),o}function ou({r:e,g:t,b:n,alpha:i}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.max(e,t,n),s=Math.min(e,t,n),o={mode:"hsl",s:r===s?0:(r-s)/(1-Math.abs(r+s-1)),l:.5*(r+s)};return r-s!==0&&(o.h=(r===e?(t-n)/(r-s)+(t<n)*6:r===t?(n-e)/(r-s)+2:(e-t)/(r-s)+4)*60),i!==void 0&&(o.alpha=i),o}const au=(e,t)=>{switch(t){case"deg":return+e;case"rad":return e/Math.PI*180;case"grad":return e/10*9;case"turn":return e*360}},lu=new RegExp(`^hsla?\\(\\s*${Cl}${$t}${ge}${$t}${ge}\\s*(?:,\\s*${Yn}\\s*)?\\)$`),uu=e=>{let t=e.match(lu);if(!t)return;let n={mode:"hsl"};return t[3]!==void 0?n.h=+t[3]:t[1]!==void 0&&t[2]!==void 0&&(n.h=au(t[1],t[2])),t[4]!==void 0&&(n.s=Math.min(Math.max(0,t[4]/100),1)),t[5]!==void 0&&(n.l=Math.min(Math.max(0,t[5]/100),1)),t[6]!==void 0?n.alpha=Math.max(0,Math.min(1,t[6]/100)):t[7]!==void 0&&(n.alpha=Math.max(0,Math.min(1,+t[7]))),n};function hu(e,t){if(!t||t[0]!=="hsl"&&t[0]!=="hsla")return;const n={mode:"hsl"},[,i,r,s,o]=t;if(i.type!==w.None){if(i.type===w.Percentage)return;n.h=i.value}if(r.type!==w.None){if(r.type===w.Hue)return;n.s=r.value/100}if(s.type!==w.None){if(s.type===w.Hue)return;n.l=s.value/100}return o.type!==w.None&&(n.alpha=Math.min(1,Math.max(0,o.type===w.Number?o.value:o.value/100))),n}const us={mode:"hsl",toMode:{rgb:su},fromMode:{rgb:ou},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[hu,uu],serialize:e=>`hsl(${e.h!==void 0?e.h:"none"} ${e.s!==void 0?e.s*100+"%":"none"} ${e.l!==void 0?e.l*100+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:v,fixup:bt},s:v,l:v,alpha:{use:v,fixup:V}},difference:{h:Ke},average:{h:yt}};function hs({h:e,s:t,v:n,alpha:i}){e=J(e!==void 0?e:0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.abs(e/60%2-1),s;switch(Math.floor(e/60)){case 0:s={r:n,g:n*(1-t*r),b:n*(1-t)};break;case 1:s={r:n*(1-t*r),g:n,b:n*(1-t)};break;case 2:s={r:n*(1-t),g:n,b:n*(1-t*r)};break;case 3:s={r:n*(1-t),g:n*(1-t*r),b:n};break;case 4:s={r:n*(1-t*r),g:n*(1-t),b:n};break;case 5:s={r:n,g:n*(1-t),b:n*(1-t*r)};break;default:s={r:n*(1-t),g:n*(1-t),b:n*(1-t)}}return s.mode="rgb",i!==void 0&&(s.alpha=i),s}function cs({r:e,g:t,b:n,alpha:i}){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.max(e,t,n),s=Math.min(e,t,n),o={mode:"hsv",s:r===0?0:1-s/r,v:r};return r-s!==0&&(o.h=(r===e?(t-n)/(r-s)+(t<n)*6:r===t?(n-e)/(r-s)+2:(e-t)/(r-s)+4)*60),i!==void 0&&(o.alpha=i),o}const fs={mode:"hsv",toMode:{rgb:hs},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:cs},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:v,fixup:bt},s:v,v,alpha:{use:v,fixup:V}},difference:{h:Ke},average:{h:yt}};function cu({h:e,w:t,b:n,alpha:i}){if(t===void 0&&(t=0),n===void 0&&(n=0),t+n>1){let r=t+n;t/=r,n/=r}return hs({h:e,s:n===1?1:1-t/(1-n),v:1-n,alpha:i})}function fu(e){let t=cs(e);if(t===void 0)return;let n=t.s!==void 0?t.s:0,i=t.v!==void 0?t.v:0,r={mode:"hwb",w:(1-n)*i,b:1-i};return t.h!==void 0&&(r.h=t.h),t.alpha!==void 0&&(r.alpha=t.alpha),r}function du(e,t){if(!t||t[0]!=="hwb")return;const n={mode:"hwb"},[,i,r,s,o]=t;if(i.type!==w.None){if(i.type===w.Percentage)return;n.h=i.value}if(r.type!==w.None){if(r.type===w.Hue)return;n.w=r.value/100}if(s.type!==w.None){if(s.type===w.Hue)return;n.b=s.value/100}return o.type!==w.None&&(n.alpha=Math.min(1,Math.max(0,o.type===w.Number?o.value:o.value/100))),n}const pu={mode:"hwb",toMode:{rgb:cu},fromMode:{rgb:fu},channels:["h","w","b","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[du],serialize:e=>`hwb(${e.h!==void 0?e.h:"none"} ${e.w!==void 0?e.w*100+"%":"none"} ${e.b!==void 0?e.b*100+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:v,fixup:bt},w:v,b:v,alpha:{use:v,fixup:V}},difference:{h:Zl},average:{h:yt}},ds=203,on=.1593017578125,ps=78.84375,an=.8359375,ln=18.8515625,un=18.6875;function Qn(e){if(e<0)return 0;const t=Math.pow(e,1/ps);return 1e4*Math.pow(Math.max(0,t-an)/(ln-un*t),1/on)}function ti(e){if(e<0)return 0;const t=Math.pow(e/1e4,on);return Math.pow((an+ln*t)/(1+un*t),ps)}const ei=e=>Math.max(e/ds,0),ms=({i:e,t,p:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r=Qn(e+.008609037037932761*t+.11102962500302593*n),s=Qn(e-.00860903703793275*t-.11102962500302599*n),o=Qn(e+.5600313357106791*t-.32062717498731885*n),a={mode:"xyz65",x:ei(2.070152218389422*r-1.3263473389671556*s+.2066510476294051*o),y:ei(.3647385209748074*r+.680566024947227*s-.0453045459220346*o),z:ei(-.049747207535812*r-.0492609666966138*s+1.1880659249923042*o)};return i!==void 0&&(a.alpha=i),a},ni=(e=0)=>Math.max(e*ds,0),gs=({x:e,y:t,z:n,alpha:i})=>{const r=ni(e),s=ni(t),o=ni(n),a=ti(.3592832590121217*r+.6976051147779502*s-.0358915932320289*o),l=ti(-.1920808463704995*r+1.1004767970374323*s+.0753748658519118*o),u=ti(.0070797844607477*r+.0748396662186366*s+.8433265453898765*o),h=.5*a+.5*l,c=1.61376953125*a-3.323486328125*l+1.709716796875*u,f=4.378173828125*a-4.24560546875*l-.132568359375*u,d={mode:"itp",i:h,t:c,p:f};return i!==void 0&&(d.alpha=i),d},mu={mode:"itp",channels:["i","t","p","alpha"],parse:["--ictcp"],serialize:"--ictcp",toMode:{xyz65:ms,rgb:e=>Rt(ms(e))},fromMode:{xyz65:gs,rgb:e=>gs(zt(e))},ranges:{i:[0,.581],t:[-.369,.272],p:[-.164,.331]},interpolate:{i:v,t:v,p:v,alpha:{use:v,fixup:V}}},gu=134.03437499999998,bu=16295499532821565e-27,ii=e=>{if(e<0)return 0;let t=Math.pow(e/1e4,on);return Math.pow((an+ln*t)/(1+un*t),gu)},ri=(e=0)=>Math.max(e*203,0),bs=({x:e,y:t,z:n,alpha:i})=>{e=ri(e),t=ri(t),n=ri(n);let r=1.15*e-.15*n,s=.66*t+.34*e,o=ii(.41478972*r+.579999*s+.014648*n),a=ii(-.20151*r+1.120649*s+.0531008*n),l=ii(-.0166008*r+.2648*s+.6684799*n),u=(o+a)/2,h={mode:"jab",j:.44*u/(1-.56*u)-bu,a:3.524*o-4.066708*a+.542708*l,b:.199076*o+1.096799*a-1.295875*l};return i!==void 0&&(h.alpha=i),h},yu=134.03437499999998,ys=16295499532821565e-27,si=e=>{if(e<0)return 0;let t=Math.pow(e,1/yu);return 1e4*Math.pow((an-t)/(un*t-ln),1/on)},oi=e=>e/203,xs=({j:e,a:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(e+ys)/(.44+.56*(e+ys)),s=si(r+.13860504*t+.058047316*n),o=si(r-.13860504*t-.058047316*n),a=si(r-.096019242*t-.8118919*n),l={mode:"xyz65",x:oi(1.661373024652174*s-.914523081304348*o+.23136208173913045*a),y:oi(-.3250758611844533*s+1.571847026732543*o-.21825383453227928*a),z:oi(-.090982811*s-.31272829*o+1.5227666*a)};return i!==void 0&&(l.alpha=i),l},ws=e=>{let t=bs(zt(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},vs=e=>Rt(xs(e)),xu={mode:"jab",channels:["j","a","b","alpha"],parse:["--jzazbz"],serialize:"--jzazbz",fromMode:{rgb:ws,xyz65:bs},toMode:{rgb:vs,xyz65:xs},ranges:{j:[0,.222],a:[-.109,.129],b:[-.185,.134]},interpolate:{j:v,a:v,b:v,alpha:{use:v,fixup:V}}},Ms=({j:e,a:t,b:n,alpha:i})=>{t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.sqrt(t*t+n*n),s={mode:"jch",j:e,c:r};return r&&(s.h=J(Math.atan2(n,t)*180/Math.PI)),i!==void 0&&(s.alpha=i),s},As=({j:e,c:t,h:n,alpha:i})=>{n===void 0&&(n=0);let r={mode:"jab",j:e,a:t?t*Math.cos(n/180*Math.PI):0,b:t?t*Math.sin(n/180*Math.PI):0};return i!==void 0&&(r.alpha=i),r},wu={mode:"jch",parse:["--jzczhz"],serialize:"--jzczhz",toMode:{jab:As,rgb:e=>vs(As(e))},fromMode:{rgb:e=>Ms(ws(e)),jab:Ms},channels:["j","c","h","alpha"],ranges:{j:[0,.221],c:[0,.19],h:[0,360]},interpolate:{h:{use:v,fixup:bt},c:v,j:v,alpha:{use:v,fixup:V}},difference:{h:Qe},average:{h:yt}},hn=Math.pow(29,3)/Math.pow(3,3),ai=Math.pow(6,3)/Math.pow(29,3);let li=e=>Math.pow(e,3)>ai?Math.pow(e,3):(116*e-16)/hn;const ui=({l:e,a:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=(e+16)/116,s=t/500+r,o=r-n/200,a={mode:"xyz50",x:li(s)*X.X,y:li(r)*X.Y,z:li(o)*X.Z};return i!==void 0&&(a.alpha=i),a},we=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Zt({r:e*3.1341359569958707-t*1.6173863321612538-.4906619460083532*n,g:e*-.978795502912089+t*1.916254567259524+.03344273116131949*n,b:e*.07195537988411677-t*.2289768264158322+1.405386058324125*n});return i!==void 0&&(r.alpha=i),r},ks=e=>we(ui(e)),ve=e=>{let{r:t,g:n,b:i,alpha:r}=Wt(e),s={mode:"xyz50",x:.436065742824811*t+.3851514688337912*n+.14307845442264197*i,y:.22249319175623702*t+.7168870538238823*n+.06061979053616537*i,z:.013923904500943465*t+.09708128566574634*n+.7140993584005155*i};return r!==void 0&&(s.alpha=r),s},hi=e=>e>ai?Math.cbrt(e):(hn*e+16)/116,ci=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=hi(e/X.X),s=hi(t/X.Y),o=hi(n/X.Z),a={mode:"lab",l:116*s-16,a:500*(r-s),b:200*(s-o)};return i!==void 0&&(a.alpha=i),a},_s=e=>{let t=ci(ve(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t};function vu(e,t){if(!t||t[0]!=="lab")return;const n={mode:"lab"},[,i,r,s,o]=t;if(!(i.type===w.Hue||r.type===w.Hue||s.type===w.Hue))return i.type!==w.None&&(n.l=Math.min(Math.max(0,i.value),100)),r.type!==w.None&&(n.a=r.type===w.Number?r.value:r.value*125/100),s.type!==w.None&&(n.b=s.type===w.Number?s.value:s.value*125/100),o.type!==w.None&&(n.alpha=Math.min(1,Math.max(0,o.type===w.Number?o.value:o.value/100))),n}const fi={mode:"lab",toMode:{xyz50:ui,rgb:ks},fromMode:{xyz50:ci,rgb:_s},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-100,100],b:[-100,100]},parse:[vu],serialize:e=>`lab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{l:v,a:v,b:v,alpha:{use:v,fixup:V}}},Mu={...fi,mode:"lab65",parse:["--lab-d65"],serialize:"--lab-d65",toMode:{xyz65:is,rgb:tn},fromMode:{xyz65:rs,rgb:en},ranges:{l:[0,100],a:[-86.182,98.234],b:[-107.86,94.477]}};function Au(e,t){if(!t||t[0]!=="lch")return;const n={mode:"lch"},[,i,r,s,o]=t;if(i.type!==w.None){if(i.type===w.Hue)return;n.l=Math.min(Math.max(0,i.value),100)}if(r.type!==w.None&&(n.c=Math.max(0,r.type===w.Number?r.value:r.value*150/100)),s.type!==w.None){if(s.type===w.Percentage)return;n.h=s.value}return o.type!==w.None&&(n.alpha=Math.min(1,Math.max(0,o.type===w.Number?o.value:o.value/100))),n}const di={mode:"lch",toMode:{lab:At,rgb:e=>ks(At(e))},fromMode:{rgb:e=>Mt(_s(e)),lab:Mt},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[Au],serialize:e=>`lch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:v,fixup:bt},c:v,l:v,alpha:{use:v,fixup:V}},difference:{h:Qe},average:{h:yt}},ku={...di,mode:"lch65",parse:["--lch-d65"],serialize:"--lch-d65",toMode:{lab65:e=>At(e,"lab65"),rgb:e=>tn(At(e,"lab65"))},fromMode:{rgb:e=>Mt(en(e),"lch65"),lab65:e=>Mt(e,"lch65")},ranges:{l:[0,100],c:[0,133.807],h:[0,360]}},Ss=({l:e,u:t,v:n,alpha:i})=>{t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.sqrt(t*t+n*n),s={mode:"lchuv",l:e,c:r};return r&&(s.h=J(Math.atan2(n,t)*180/Math.PI)),i!==void 0&&(s.alpha=i),s},Es=({l:e,c:t,h:n,alpha:i})=>{n===void 0&&(n=0);let r={mode:"luv",l:e,u:t?t*Math.cos(n/180*Math.PI):0,v:t?t*Math.sin(n/180*Math.PI):0};return i!==void 0&&(r.alpha=i),r},Cs=(e,t,n)=>4*e/(e+15*t+3*n),Ts=(e,t,n)=>9*t/(e+15*t+3*n),_u=Cs(X.X,X.Y,X.Z),Su=Ts(X.X,X.Y,X.Z),Eu=e=>e<=ai?hn*e:116*Math.cbrt(e)-16,pi=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Eu(t/X.Y),s=Cs(e,t,n),o=Ts(e,t,n);!isFinite(s)||!isFinite(o)?r=s=o=0:(s=13*r*(s-_u),o=13*r*(o-Su));let a={mode:"luv",l:r,u:s,v:o};return i!==void 0&&(a.alpha=i),a},Cu=(e,t,n)=>4*e/(e+15*t+3*n),Tu=(e,t,n)=>9*t/(e+15*t+3*n),Nu=Cu(X.X,X.Y,X.Z),Lu=Tu(X.X,X.Y,X.Z),mi=({l:e,u:t,v:n,alpha:i})=>{if(e===void 0&&(e=0),e===0)return{mode:"xyz50",x:0,y:0,z:0};t===void 0&&(t=0),n===void 0&&(n=0);let r=t/(13*e)+Nu,s=n/(13*e)+Lu,o=X.Y*(e<=8?e/hn:Math.pow((e+16)/116,3)),a=o*(9*r)/(4*s),l=o*(12-3*r-20*s)/(4*s),u={mode:"xyz50",x:a,y:o,z:l};return i!==void 0&&(u.alpha=i),u},Pu={mode:"lchuv",toMode:{luv:Es,rgb:e=>we(mi(Es(e)))},fromMode:{rgb:e=>Ss(pi(ve(e))),luv:Ss},channels:["l","c","h","alpha"],parse:["--lchuv"],serialize:"--lchuv",ranges:{l:[0,100],c:[0,176.956],h:[0,360]},interpolate:{h:{use:v,fixup:bt},c:v,l:v,alpha:{use:v,fixup:V}},difference:{h:Qe},average:{h:yt}},zu={...Jt,mode:"lrgb",toMode:{rgb:Zt},fromMode:{rgb:Wt},parse:["srgb-linear"],serialize:"srgb-linear"},Ru={mode:"luv",toMode:{xyz50:mi,rgb:e=>we(mi(e))},fromMode:{xyz50:pi,rgb:e=>pi(ve(e))},channels:["l","u","v","alpha"],parse:["--luv"],serialize:"--luv",ranges:{l:[0,100],u:[-84.936,175.042],v:[-125.882,87.243]},interpolate:{l:v,u:v,v,alpha:{use:v,fixup:V}}},Ns=({r:e,g:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.cbrt(.41222147079999993*e+.5363325363*t+.0514459929*n),s=Math.cbrt(.2119034981999999*e+.6806995450999999*t+.1073969566*n),o=Math.cbrt(.08830246189999998*e+.2817188376*t+.6299787005000002*n),a={mode:"oklab",l:.2104542553*r+.793617785*s-.0040720468*o,a:1.9779984951*r-2.428592205*s+.4505937099*o,b:.0259040371*r+.7827717662*s-.808675766*o};return i!==void 0&&(a.alpha=i),a},cn=e=>{let t=Ns(Wt(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},Me=({l:e,a:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Math.pow(e*.9999999984505198+.39633779217376786*t+.2158037580607588*n,3),s=Math.pow(e*1.0000000088817609-.10556134232365635*t-.06385417477170591*n,3),o=Math.pow(e*1.0000000546724108-.08948418209496575*t-1.2914855378640917*n,3),a={mode:"lrgb",r:4.076741661347994*r-3.307711590408193*s+.230969928729428*o,g:-1.2684380040921763*r+2.6097574006633715*s-.3413193963102197*o,b:-.004196086541837188*r-.7034186144594493*s+1.7076147009309444*o};return i!==void 0&&(a.alpha=i),a},fn=e=>Zt(Me(e));function gi(e){const i=1.170873786407767;return .5*(i*e-.206+Math.sqrt((i*e-.206)*(i*e-.206)+4*.03*i*e))}function dn(e){return(e*e+.206*e)/(1.170873786407767*(e+.03))}function Iu(e,t){let n,i,r,s,o,a,l,u;-1.88170328*e-.80936493*t>1?(n=1.19086277,i=1.76576728,r=.59662641,s=.75515197,o=.56771245,a=4.0767416621,l=-3.3077115913,u=.2309699292):1.81444104*e-1.19445276*t>1?(n=.73956515,i=-.45954404,r=.08285427,s=.1254107,o=.14503204,a=-1.2684380046,l=2.6097574011,u=-.3413193965):(n=1.35733652,i=-.00915799,r=-1.1513021,s=-.50559606,o=.00692167,a=-.0041960863,l=-.7034186147,u=1.707614701);let h=n+i*e+r*t+s*e*e+o*e*t,c=.3963377774*e+.2158037573*t,f=-.1055613458*e-.0638541728*t,d=-.0894841775*e-1.291485548*t;{let m=1+h*c,y=1+h*f,g=1+h*d,p=m*m*m,b=y*y*y,x=g*g*g,A=3*c*m*m,M=3*f*y*y,k=3*d*g*g,I=6*c*c*m,_=6*f*f*y,L=6*d*d*g,q=a*p+l*b+u*x,E=a*A+l*M+u*k,B=a*I+l*_+u*L;h=h-q*E/(E*E-.5*q*B)}return h}function bi(e,t){let n=Iu(e,t),i=Me({l:1,a:n*e,b:n*t}),r=Math.cbrt(1/Math.max(i.r,i.g,i.b)),s=r*n;return[r,s]}function Ou(e,t,n,i,r,s=null){s||(s=bi(e,t));let o;if((n-r)*s[1]-(s[0]-r)*i<=0)o=s[1]*r/(i*s[0]+s[1]*(r-n));else{o=s[1]*(r-1)/(i*(s[0]-1)+s[1]*(r-n));{let a=n-r,l=i,u=.3963377774*e+.2158037573*t,h=-.1055613458*e-.0638541728*t,c=-.0894841775*e-1.291485548*t,f=a+l*u,d=a+l*h,m=a+l*c;{let y=r*(1-o)+o*n,g=o*i,p=y+g*u,b=y+g*h,x=y+g*c,A=p*p*p,M=b*b*b,k=x*x*x,I=3*f*p*p,_=3*d*b*b,L=3*m*x*x,q=6*f*f*p,E=6*d*d*b,B=6*m*m*x,U=4.0767416621*A-3.3077115913*M+.2309699292*k-1,nt=4.0767416621*I-3.3077115913*_+.2309699292*L,dt=4.0767416621*q-3.3077115913*E+.2309699292*B,ut=nt/(nt*nt-.5*U*dt),pt=-U*ut,mt=-1.2684380046*A+2.6097574011*M-.3413193965*k-1,Z=-1.2684380046*I+2.6097574011*_-.3413193965*L,Mn=-1.2684380046*q+2.6097574011*E-.3413193965*B,Ct=Z/(Z*Z-.5*mt*Mn),wt=-mt*Ct,Ie=-.0041960863*A-.7034186147*M+1.707614701*k-1,le=-.0041960863*I-.7034186147*_+1.707614701*L,Oe=-.0041960863*q-.7034186147*E+1.707614701*B,ue=le/(le*le-.5*Ie*Oe),Ht=-Ie*ue;pt=ut>=0?pt:1e6,wt=Ct>=0?wt:1e6,Ht=ue>=0?Ht:1e6,o+=Math.min(pt,Math.min(wt,Ht))}}}return o}function yi(e,t,n=null){n||(n=bi(e,t));let i=n[0],r=n[1];return[r/i,r/(1-i)]}function Ls(e,t,n){let i=bi(t,n),r=Ou(t,n,e,1,e,i),s=yi(t,n,i),o=.11516993+1/(7.4477897+4.1590124*n+t*(-2.19557347+1.75198401*n+t*(-2.13704948-10.02301043*n+t*(-4.24894561+5.38770819*n+4.69891013*t)))),a=.11239642+1/(1.6132032-.68124379*n+t*(.40370612+.90148123*n+t*(-.27087943+.6122399*n+t*(.00299215-.45399568*n-.14661872*t)))),l=r/Math.min(e*s[0],(1-e)*s[1]),u=e*o,h=(1-e)*a,c=.9*l*Math.sqrt(Math.sqrt(1/(1/(u*u*u*u)+1/(h*h*h*h))));return u=e*.4,h=(1-e)*.8,[Math.sqrt(1/(1/(u*u)+1/(h*h))),c,r]}function Ps(e){const t=e.l!==void 0?e.l:0,n=e.a!==void 0?e.a:0,i=e.b!==void 0?e.b:0,r={mode:"okhsl",l:gi(t)};e.alpha!==void 0&&(r.alpha=e.alpha);let s=Math.sqrt(n*n+i*i);if(!s)return r.s=0,r;let[o,a,l]=Ls(t,n/s,i/s),u;if(s<a){let h=0,c=.8*o,f=1-c/a;u=(s-h)/(c+f*(s-h))*.8}else{let h=a,c=.2*a*a*1.25*1.25/o,f=1-c/(l-a);u=.8+.2*((s-h)/(c+f*(s-h)))}return u&&(r.s=u,r.h=J(Math.atan2(i,n)*180/Math.PI)),r}function zs(e){let t=e.h!==void 0?e.h:0,n=e.s!==void 0?e.s:0,i=e.l!==void 0?e.l:0;const r={mode:"oklab",l:dn(i)};if(e.alpha!==void 0&&(r.alpha=e.alpha),!n||i===1)return r.a=r.b=0,r;let s=Math.cos(t/180*Math.PI),o=Math.sin(t/180*Math.PI),[a,l,u]=Ls(r.l,s,o),h,c,f,d;n<.8?(h=1.25*n,c=0,f=.8*a,d=1-f/l):(h=5*(n-.8),c=l,f=.2*l*l*1.25*1.25/a,d=1-f/(u-l));let m=c+h*f/(1-d*h);return r.a=m*s,r.b=m*o,r}const Du={...us,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:Ps,rgb:e=>Ps(cn(e))},toMode:{oklab:zs,rgb:e=>fn(zs(e))}};function Rs(e){let t=e.l!==void 0?e.l:0,n=e.a!==void 0?e.a:0,i=e.b!==void 0?e.b:0,r=Math.sqrt(n*n+i*i),s=r?n/r:1,o=r?i/r:1,[a,l]=yi(s,o),u=.5,h=1-u/a,c=l/(r+t*l),f=c*t,d=c*r,m=dn(f),y=d*m/f,g=Me({l:m,a:s*y,b:o*y}),p=Math.cbrt(1/Math.max(g.r,g.g,g.b,0));t=t/p,r=r/p*gi(t)/t,t=gi(t);const b={mode:"okhsv",s:r?(u+l)*d/(l*u+l*h*d):0,v:t?t/f:0};return b.s&&(b.h=J(Math.atan2(i,n)*180/Math.PI)),e.alpha!==void 0&&(b.alpha=e.alpha),b}function Is(e){const t={mode:"oklab"};e.alpha!==void 0&&(t.alpha=e.alpha);const n=e.h!==void 0?e.h:0,i=e.s!==void 0?e.s:0,r=e.v!==void 0?e.v:0,s=Math.cos(n/180*Math.PI),o=Math.sin(n/180*Math.PI),[a,l]=yi(s,o),u=.5,h=1-u/a,c=1-i*u/(u+l-l*h*i),f=i*l*u/(u+l-l*h*i),d=dn(c),m=f*d/c,y=Me({l:d,a:s*m,b:o*m}),g=Math.cbrt(1/Math.max(y.r,y.g,y.b,0)),p=dn(r*c),b=f*p/c;return t.l=p*g,t.a=b*s*g,t.b=b*o*g,t}const Fu={...fs,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:Rs,rgb:e=>Rs(cn(e))},toMode:{oklab:Is,rgb:e=>fn(Is(e))}};function qu(e,t){if(!t||t[0]!=="oklab")return;const n={mode:"oklab"},[,i,r,s,o]=t;if(!(i.type===w.Hue||r.type===w.Hue||s.type===w.Hue))return i.type!==w.None&&(n.l=Math.min(Math.max(0,i.type===w.Number?i.value:i.value/100),1)),r.type!==w.None&&(n.a=r.type===w.Number?r.value:r.value*.4/100),s.type!==w.None&&(n.b=s.type===w.Number?s.value:s.value*.4/100),o.type!==w.None&&(n.alpha=Math.min(1,Math.max(0,o.type===w.Number?o.value:o.value/100))),n}const ju={...fi,mode:"oklab",toMode:{lrgb:Me,rgb:fn},fromMode:{lrgb:Ns,rgb:cn},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[qu],serialize:e=>`oklab(${e.l!==void 0?e.l:"none"} ${e.a!==void 0?e.a:"none"} ${e.b!==void 0?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`};function Hu(e,t){if(!t||t[0]!=="oklch")return;const n={mode:"oklch"},[,i,r,s,o]=t;if(i.type!==w.None){if(i.type===w.Hue)return;n.l=Math.min(Math.max(0,i.type===w.Number?i.value:i.value/100),1)}if(r.type!==w.None&&(n.c=Math.max(0,r.type===w.Number?r.value:r.value*.4/100)),s.type!==w.None){if(s.type===w.Percentage)return;n.h=s.value}return o.type!==w.None&&(n.alpha=Math.min(1,Math.max(0,o.type===w.Number?o.value:o.value/100))),n}const Yu={...di,mode:"oklch",toMode:{oklab:e=>At(e,"oklab"),rgb:e=>fn(At(e,"oklab"))},fromMode:{rgb:e=>Mt(cn(e),"oklch"),oklab:e=>Mt(e,"oklch")},parse:[Hu],serialize:e=>`oklch(${e.l!==void 0?e.l:"none"} ${e.c!==void 0?e.c:"none"} ${e.h!==void 0?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}},Os=e=>{let{r:t,g:n,b:i,alpha:r}=Wt(e),s={mode:"xyz65",x:.486570948648216*t+.265667693169093*n+.1982172852343625*i,y:.2289745640697487*t+.6917385218365062*n+.079286914093745*i,z:0*t+.0451133818589026*n+1.043944368900976*i};return r!==void 0&&(s.alpha=r),s},Ds=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r=Zt({r:e*2.4934969119414263-t*.9313836179191242-.402710784450717*n,g:e*-.8294889695615749+t*1.7626640603183465+.0236246858419436*n,b:e*.0358458302437845-t*.0761723892680418+.9568845240076871*n},"p3");return i!==void 0&&(r.alpha=i),r},Bu={...Jt,mode:"p3",parse:["display-p3"],serialize:"display-p3",fromMode:{rgb:e=>Ds(zt(e)),xyz65:Ds},toMode:{rgb:e=>Rt(Os(e)),xyz65:Os}},xi=e=>{let t=Math.abs(e);return t>=1/512?Math.sign(e)*Math.pow(t,1/1.8):16*e},Fs=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"prophoto",r:xi(e*1.3457868816471585-t*.2555720873797946-.0511018649755453*n),g:xi(e*-.5446307051249019+t*1.5082477428451466+.0205274474364214*n),b:xi(e*0+t*0+1.2119675456389452*n)};return i!==void 0&&(r.alpha=i),r},wi=(e=0)=>{let t=Math.abs(e);return t>=16/512?Math.sign(e)*Math.pow(t,1.8):e/16},qs=e=>{let t=wi(e.r),n=wi(e.g),i=wi(e.b),r={mode:"xyz50",x:.7977666449006423*t+.1351812974005331*n+.0313477341283922*i,y:.2880748288194013*t+.7118352342418731*n+899369387256e-16*i,z:0*t+0*n+.8251046025104602*i};return e.alpha!==void 0&&(r.alpha=e.alpha),r},Gu={...Jt,mode:"prophoto",parse:["prophoto-rgb"],serialize:"prophoto-rgb",fromMode:{xyz50:Fs,rgb:e=>Fs(ve(e))},toMode:{xyz50:qs,rgb:e=>we(qs(e))}},js=1.09929682680944,Xu=.018053968510807,vi=e=>{const t=Math.abs(e);return t>Xu?(Math.sign(e)||1)*(js*Math.pow(t,.45)-(js-1)):4.5*e},Hs=({x:e,y:t,z:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"rec2020",r:vi(e*1.7166511879712683-t*.3556707837763925-.2533662813736599*n),g:vi(e*-.6666843518324893+t*1.6164812366349395+.0157685458139111*n),b:vi(e*.0176398574453108-t*.0427706132578085+.9421031212354739*n)};return i!==void 0&&(r.alpha=i),r},Ys=1.09929682680944,Uu=.018053968510807,Mi=(e=0)=>{let t=Math.abs(e);return t<Uu*4.5?e/4.5:(Math.sign(e)||1)*Math.pow((t+Ys-1)/Ys,1/.45)},Bs=e=>{let t=Mi(e.r),n=Mi(e.g),i=Mi(e.b),r={mode:"xyz65",x:.6369580483012911*t+.1446169035862083*n+.1688809751641721*i,y:.262700212011267*t+.6779980715188708*n+.059301716469862*i,z:0*t+.0280726930490874*n+1.0609850577107909*i};return e.alpha!==void 0&&(r.alpha=e.alpha),r},Vu={...Jt,mode:"rec2020",fromMode:{xyz65:Hs,rgb:e=>Hs(zt(e))},toMode:{xyz65:Bs,rgb:e=>Rt(Bs(e))},parse:["rec2020"],serialize:"rec2020"},It=.0037930732552754493,Gs=Math.cbrt(It),Ai=e=>Math.cbrt(e)-Gs,$u=e=>{const{r:t,g:n,b:i,alpha:r}=Wt(e),s=Ai(.3*t+.622*n+.078*i+It),o=Ai(.23*t+.692*n+.078*i+It),a=Ai(.2434226892454782*t+.2047674442449682*n+.5518098665095535*i+It),l={mode:"xyb",x:(s-o)/2,y:(s+o)/2,b:a-(s+o)/2};return r!==void 0&&(l.alpha=r),l},ki=e=>Math.pow(e+Gs,3),Ju={mode:"xyb",channels:["x","y","b","alpha"],parse:["--xyb"],serialize:"--xyb",toMode:{rgb:({x:e,y:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r=ki(e+t)-It,s=ki(t-e)-It,o=ki(n+t)-It,a=Zt({r:11.031566904639861*r-9.866943908131562*s-.16462299650829934*o,g:-3.2541473810744237*r+4.418770377582723*s-.16462299650829934*o,b:-3.6588512867136815*r+2.7129230459360922*s+1.9459282407775895*o});return i!==void 0&&(a.alpha=i),a}},fromMode:{rgb:$u},ranges:{x:[-.0154,.0281],y:[0,.8453],b:[-.2778,.388]},interpolate:{x:v,y:v,b:v,alpha:{use:v,fixup:V}}},Wu={mode:"xyz50",parse:["xyz-d50"],serialize:"xyz-d50",toMode:{rgb:we,lab:ci},fromMode:{rgb:ve,lab:ui},channels:["x","y","z","alpha"],ranges:{x:[0,.964],y:[0,.999],z:[0,.825]},interpolate:{x:v,y:v,z:v,alpha:{use:v,fixup:V}}},Zu={mode:"xyz65",toMode:{rgb:Rt,xyz50:e=>{let{x:t,y:n,z:i,alpha:r}=e;t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0);let s={mode:"xyz50",x:1.0479298208405488*t+.0229467933410191*n-.0501922295431356*i,y:.0296278156881593*t+.990434484573249*n-.0170738250293851*i,z:-.0092430581525912*t+.0150551448965779*n+.7518742899580008*i};return r!==void 0&&(s.alpha=r),s}},fromMode:{rgb:zt,xyz50:e=>{let{x:t,y:n,z:i,alpha:r}=e;t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0);let s={mode:"xyz65",x:.9554734527042182*t-.0230985368742614*n+.0632593086610217*i,y:-.0283697069632081*t+1.0099954580058226*n+.021041398966943*i,z:.0123140016883199*t-.0205076964334779*n+1.3303659366080753*i};return r!==void 0&&(s.alpha=r),s}},ranges:{x:[0,.95],y:[0,1],z:[0,1.088]},channels:["x","y","z","alpha"],parse:["xyz","xyz-d65"],serialize:"xyz-d65",interpolate:{x:v,y:v,z:v,alpha:{use:v,fixup:V}}},Ku={mode:"yiq",toMode:{rgb:({y:e,i:t,q:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r={mode:"rgb",r:e+.95608445*t+.6208885*n,g:e-.27137664*t-.6486059*n,b:e-1.10561724*t+1.70250126*n};return i!==void 0&&(r.alpha=i),r}},fromMode:{rgb:({r:e,g:t,b:n,alpha:i})=>{e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);const r={mode:"yiq",y:.29889531*e+.58662247*t+.11448223*n,i:.59597799*e-.2741761*t-.32180189*n,q:.21147017*e-.52261711*t+.31114694*n};return i!==void 0&&(r.alpha=i),r}},channels:["y","i","q","alpha"],parse:["--yiq"],serialize:"--yiq",ranges:{i:[-.595,.595],q:[-.522,.522]},interpolate:{y:v,i:v,q:v,alpha:{use:v,fixup:V}}},Qu=e=>Math.max(0,Math.min(1,e||0)),_i=e=>Math.round(Qu(e)*255),th=gt("rgb"),eh=e=>{if(e===void 0)return;let t=_i(e.r),n=_i(e.g),i=_i(e.b);return"#"+(1<<24|t<<16|n<<8|i).toString(16).slice(1)},Xs=e=>eh(th(e)),Us=gt("rgb"),Vs=e=>{const t={mode:e.mode,r:Math.max(0,Math.min(e.r!==void 0?e.r:0,1)),g:Math.max(0,Math.min(e.g!==void 0?e.g:0,1)),b:Math.max(0,Math.min(e.b!==void 0?e.b:0,1))};return e.alpha!==void 0&&(t.alpha=e.alpha),t},nh=e=>Vs(Us(e)),$s=e=>e!==void 0&&(e.r===void 0||e.r>=0&&e.r<=1)&&(e.g===void 0||e.g>=0&&e.g<=1)&&(e.b===void 0||e.b>=0&&e.b<=1);function ih(e){return $s(Us(e))}function Js(e="rgb"){const{gamut:t}=be(e);if(!t)return i=>!0;const n=gt(typeof t=="string"?t:e);return i=>$s(n(i))}function rh(e="rgb"){const{gamut:t}=be(e);if(!t)return s=>Ve(s);const n=typeof t=="string"?t:e,i=gt(n),r=Js(n);return s=>{const o=Ve(s);if(!o)return;const a=i(o);if(r(a))return o;const l=Vs(a);return o.mode===l.mode?l:gt(o.mode)(l)}}function sh(e,t="lch",n="rgb"){e=Ve(e);let i=n==="rgb"?ih:Js(n),r=n==="rgb"?nh:rh(n);if(e===void 0||i(e))return e;let s=gt(e.mode);e=gt(t)(e);let o={...e,c:0};if(!i(o))return s(r(o));let a=0,l=e.c!==void 0?e.c:0,u=be(t).ranges.c,h=(u[1]-u[0])/Math.pow(2,13),c=o.c;for(;l-a>h;)o.c=a+(l-a)*.5,i(o)?(c=o.c,a=o.c):l=o.c;return s(i(o)?o:{...o,c})}O(Xl),O(Ql),O(tu),O(eu),O(ru),O(us),O(fs),O(pu),O(mu),O(xu),O(wu),O(fi),O(Mu),O(di),O(ku),O(Pu),O(zu),O(Ru),O(Du),O(Fu),O(ju);const Ws=O(Yu);O(Bu),O(Gu),O(Vu);const oh=O(Jt);O(Ju),O(Wu),O(Zu),O(Ku);const Si={},Zs=[];function N(e,t){if(Array.isArray(e)){for(const n of e)N(n,t);return}if(typeof e=="object"){for(const n in e)N(n,e[n]);return}Ks(Object.getOwnPropertyNames(t)),Si[e]=Object.assign(Si[e]||{},t)}function tt(e){return Si[e]||{}}function ah(){return[...new Set(Zs)]}function Ks(e){Zs.push(...e)}function Ei(e,t){let n;const i=e.length,r=[];for(n=0;n<i;n++)r.push(t(e[n]));return r}function lh(e,t){let n;const i=e.length,r=[];for(n=0;n<i;n++)t(e[n])&&r.push(e[n]);return r}function Ci(e){return e%360*Math.PI/180}function uh(e){return e.replace(/([A-Z])/g,function(t,n){return"-"+n.toLowerCase()})}function Qs(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Qt(e,t,n,i){return(t==null||n==null)&&(i=i||e.bbox(),t==null?t=i.width/i.height*n:n==null&&(n=i.height/i.width*t)),{width:t,height:n}}function Ti(e,t){const n=e.origin;let i=e.ox!=null?e.ox:e.originX!=null?e.originX:"center",r=e.oy!=null?e.oy:e.originY!=null?e.originY:"center";n!=null&&([i,r]=Array.isArray(n)?n:typeof n=="object"?[n.x,n.y]:[n,n]);const s=typeof i=="string",o=typeof r=="string";if(s||o){const{height:a,width:l,x:u,y:h}=t.bbox();s&&(i=i.includes("left")?u:i.includes("right")?u+l:u+l/2),o&&(r=r.includes("top")?h:r.includes("bottom")?h+a:h+a/2)}return[i,r]}const hh=new Set(["desc","metadata","title"]),Ni=e=>hh.has(e.nodeName),to=(e,t,n={})=>{const i={...t};for(const r in i)i[r].valueOf()===n[r]&&delete i[r];Object.keys(i).length?e.node.setAttribute("data-svgjs",JSON.stringify(i)):(e.node.removeAttribute("data-svgjs"),e.node.removeAttribute("svgjs:data"))},Li="http://www.w3.org/2000/svg",ch="http://www.w3.org/1999/xhtml",Pi="http://www.w3.org/2000/xmlns/",Ae="http://www.w3.org/1999/xlink",z={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function fh(){return z.window}class zi{}const Ot={},Ri="___SYMBOL___ROOT___";function ke(e,t=Li){return z.document.createElementNS(t,e)}function K(e,t=!1){if(e instanceof zi)return e;if(typeof e=="object")return Ii(e);if(e==null)return new Ot[Ri];if(typeof e=="string"&&e.charAt(0)!=="<")return Ii(z.document.querySelector(e));const n=t?z.document.createElement("div"):ke("svg");return n.innerHTML=e,e=Ii(n.firstChild),n.removeChild(n.firstChild),e}function j(e,t){return t&&(t instanceof z.window.Node||t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node)?t:ke(e)}function st(e){if(!e)return null;if(e.instance instanceof zi)return e.instance;if(e.nodeName==="#document-fragment")return new Ot.Fragment(e);let t=Qs(e.nodeName||"Dom");return t==="LinearGradient"||t==="RadialGradient"?t="Gradient":Ot[t]||(t="Dom"),new Ot[t](e)}let Ii=st;function R(e,t=e.name,n=!1){return Ot[t]=e,n&&(Ot[Ri]=e),Ks(Object.getOwnPropertyNames(e.prototype)),e}function dh(e){return Ot[e]}let ph=1e3;function eo(e){return"Svgjs"+Qs(e)+ph++}function no(e){for(let t=e.children.length-1;t>=0;t--)no(e.children[t]);return e.id&&(e.id=eo(e.nodeName)),e}function P(e,t){let n,i;for(e=Array.isArray(e)?e:[e],i=e.length-1;i>=0;i--)for(n in t)e[i].prototype[n]=t[n]}function H(e){return function(...t){const n=t[t.length-1];return n&&n.constructor===Object&&!(n instanceof Array)?e.apply(this,t.slice(0,-1)).attr(n):e.apply(this,t)}}function mh(){return this.parent().children()}function gh(){return this.parent().index(this)}function bh(){return this.siblings()[this.position()+1]}function yh(){return this.siblings()[this.position()-1]}function xh(){const e=this.position();return this.parent().add(this.remove(),e+1),this}function wh(){const e=this.position();return this.parent().add(this.remove(),e?e-1:0),this}function vh(){return this.parent().add(this.remove()),this}function Mh(){return this.parent().add(this.remove(),0),this}function Ah(e){e=K(e),e.remove();const t=this.position();return this.parent().add(e,t),this}function kh(e){e=K(e),e.remove();const t=this.position();return this.parent().add(e,t+1),this}function _h(e){return e=K(e),e.before(this),this}function Sh(e){return e=K(e),e.after(this),this}N("Dom",{siblings:mh,position:gh,next:bh,prev:yh,forward:xh,backward:wh,front:vh,back:Mh,before:Ah,after:kh,insertBefore:_h,insertAfter:Sh});const io=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Eh=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ch=/rgb\((\d+),(\d+),(\d+)\)/,Th=/(#[a-z_][a-z0-9\-_]*)/i,Nh=/\)\s*,?\s*/,Lh=/\s/g,ro=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,so=/^rgb\(/,oo=/^(\s+)?$/,ao=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ph=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,xt=/[\s,]+/,Oi=/[MLHVCSQTAZ]/i;function zh(){const e=this.attr("class");return e==null?[]:e.trim().split(xt)}function Rh(e){return this.classes().indexOf(e)!==-1}function Ih(e){if(!this.hasClass(e)){const t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this}function Oh(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!==e}).join(" ")),this}function Dh(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)}N("Dom",{classes:zh,hasClass:Rh,addClass:Ih,removeClass:Oh,toggleClass:Dh});function Fh(e,t){const n={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(i){return!!i.length}).forEach(function(i){const r=i.split(/\s*:\s*/);n[r[0]]=r[1]}),n;if(arguments.length<2){if(Array.isArray(e)){for(const i of e){const r=i;n[i]=this.node.style.getPropertyValue(r)}return n}if(typeof e=="string")return this.node.style.getPropertyValue(e);if(typeof e=="object")for(const i in e)this.node.style.setProperty(i,e[i]==null||oo.test(e[i])?"":e[i])}return arguments.length===2&&this.node.style.setProperty(e,t==null||oo.test(t)?"":t),this}function qh(){return this.css("display","")}function jh(){return this.css("display","none")}function Hh(){return this.css("display")!=="none"}N("Dom",{css:Fh,show:qh,hide:jh,visible:Hh});function Yh(e,t,n){if(e==null)return this.data(Ei(lh(this.node.attributes,i=>i.nodeName.indexOf("data-")===0),i=>i.nodeName.slice(5)));if(e instanceof Array){const i={};for(const r of e)i[r]=this.data(r);return i}else if(typeof e=="object")for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch{return this.attr("data-"+e)}else this.attr("data-"+e,t===null?null:n===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this}N("Dom",{data:Yh});function Bh(e,t){if(typeof arguments[0]=="object")for(const n in e)this.remember(n,e[n]);else{if(arguments.length===1)return this.memory()[e];this.memory()[e]=t}return this}function Gh(){if(arguments.length===0)this._memory={};else for(let e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this}function Xh(){return this._memory=this._memory||{}}N("Dom",{remember:Bh,forget:Gh,memory:Xh});function Uh(e){return e.length===4?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e}function Vh(e){const t=Math.round(e),i=Math.max(0,Math.min(255,t)).toString(16);return i.length===1?"0"+i:i}function te(e,t){for(let n=t.length;n--;)if(e[t[n]]==null)return!1;return!0}function $h(e,t){const n=te(e,"rgb")?{_a:e.r,_b:e.g,_c:e.b,_d:0,space:"rgb"}:te(e,"xyz")?{_a:e.x,_b:e.y,_c:e.z,_d:0,space:"xyz"}:te(e,"hsl")?{_a:e.h,_b:e.s,_c:e.l,_d:0,space:"hsl"}:te(e,"lab")?{_a:e.l,_b:e.a,_c:e.b,_d:0,space:"lab"}:te(e,"lch")?{_a:e.l,_b:e.c,_c:e.h,_d:0,space:"lch"}:te(e,"cmyk")?{_a:e.c,_b:e.m,_c:e.y,_d:e.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=t||n.space,n}function Jh(e){return e==="lab"||e==="xyz"||e==="lch"}function Di(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}class F{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof F||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"}static random(t="vibrant",n){const{random:i,round:r,sin:s,PI:o}=Math;if(t==="vibrant"){const a=24*i()+57,l=38*i()+45,u=360*i();return new F(a,l,u,"lch")}else if(t==="sine"){n=n??i();const a=r(80*s(2*o*n/.5+.01)+150),l=r(50*s(2*o*n/.5+4.6)+200),u=r(100*s(2*o*n/.5+2.3)+150);return new F(a,l,u)}else if(t==="pastel"){const a=8*i()+86,l=17*i()+9,u=360*i();return new F(a,l,u,"lch")}else if(t==="dark"){const a=10+10*i(),l=50*i()+86,u=360*i();return new F(a,l,u,"lch")}else if(t==="rgb"){const a=255*i(),l=255*i(),u=255*i();return new F(a,l,u)}else if(t==="lab"){const a=100*i(),l=256*i()-128,u=256*i()-128;return new F(a,l,u,"lab")}else if(t==="grey"){const a=255*i();return new F(a,a,a)}else throw new Error("Unsupported random color mode")}static test(t){return typeof t=="string"&&(ro.test(t)||so.test(t))}cmyk(){const{_a:t,_b:n,_c:i}=this.rgb(),[r,s,o]=[t,n,i].map(f=>f/255),a=Math.min(1-r,1-s,1-o);if(a===1)return new F(0,0,0,1,"cmyk");const l=(1-r-a)/(1-a),u=(1-s-a)/(1-a),h=(1-o-a)/(1-a);return new F(l,u,h,a,"cmyk")}hsl(){const{_a:t,_b:n,_c:i}=this.rgb(),[r,s,o]=[t,n,i].map(y=>y/255),a=Math.max(r,s,o),l=Math.min(r,s,o),u=(a+l)/2,h=a===l,c=a-l,f=h?0:u>.5?c/(2-a-l):c/(a+l),d=h?0:a===r?((s-o)/c+(s<o?6:0))/6:a===s?((o-r)/c+2)/6:a===o?((r-s)/c+4)/6:0;return new F(360*d,100*f,100*u,"hsl")}init(t=0,n=0,i=0,r=0,s="rgb"){if(t=t||0,this.space)for(const c in this.space)delete this[this.space[c]];if(typeof t=="number")s=typeof r=="string"?r:s,r=typeof r=="string"?0:r,Object.assign(this,{_a:t,_b:n,_c:i,_d:r,space:s});else if(t instanceof Array)this.space=n||(typeof t[3]=="string"?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const c=$h(t,n);Object.assign(this,c)}else if(typeof t=="string")if(so.test(t)){const c=t.replace(Lh,""),[f,d,m]=Ch.exec(c).slice(1,4).map(y=>parseInt(y));Object.assign(this,{_a:f,_b:d,_c:m,_d:0,space:"rgb"})}else if(ro.test(t)){const c=y=>parseInt(y,16),[,f,d,m]=Eh.exec(Uh(t)).map(c);Object.assign(this,{_a:f,_b:d,_c:m,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:o,_b:a,_c:l,_d:u}=this,h=this.space==="rgb"?{r:o,g:a,b:l}:this.space==="xyz"?{x:o,y:a,z:l}:this.space==="hsl"?{h:o,s:a,l}:this.space==="lab"?{l:o,a,b:l}:this.space==="lch"?{l:o,c:a,h:l}:this.space==="cmyk"?{c:o,m:a,y:l,k:u}:{};Object.assign(this,h)}lab(){const{x:t,y:n,z:i}=this.xyz(),r=116*n-16,s=500*(t-n),o=200*(n-i);return new F(r,s,o,"lab")}lch(){const{l:t,a:n,b:i}=this.lab(),r=Math.sqrt(n**2+i**2);let s=180*Math.atan2(i,n)/Math.PI;return s<0&&(s*=-1,s=360-s),new F(t,r,s,"lch")}rgb(){if(this.space==="rgb")return this;if(Jh(this.space)){let{x:t,y:n,z:i}=this;if(this.space==="lab"||this.space==="lch"){let{l:d,a:m,b:y}=this;if(this.space==="lch"){const{c:k,h:I}=this,_=Math.PI/180;m=k*Math.cos(_*I),y=k*Math.sin(_*I)}const g=(d+16)/116,p=m/500+g,b=g-y/200,x=16/116,A=.008856,M=7.787;t=.95047*(p**3>A?p**3:(p-x)/M),n=1*(g**3>A?g**3:(g-x)/M),i=1.08883*(b**3>A?b**3:(b-x)/M)}const r=t*3.2406+n*-1.5372+i*-.4986,s=t*-.9689+n*1.8758+i*.0415,o=t*.0557+n*-.204+i*1.057,a=Math.pow,l=.0031308,u=r>l?1.055*a(r,1/2.4)-.055:12.92*r,h=s>l?1.055*a(s,1/2.4)-.055:12.92*s,c=o>l?1.055*a(o,1/2.4)-.055:12.92*o;return new F(255*u,255*h,255*c)}else if(this.space==="hsl"){let{h:t,s:n,l:i}=this;if(t/=360,n/=100,i/=100,n===0)return i*=255,new F(i,i,i);const r=i<.5?i*(1+n):i+n-i*n,s=2*i-r,o=255*Di(s,r,t+1/3),a=255*Di(s,r,t),l=255*Di(s,r,t-1/3);return new F(o,a,l)}else if(this.space==="cmyk"){const{c:t,m:n,y:i,k:r}=this,s=255*(1-Math.min(1,t*(1-r)+r)),o=255*(1-Math.min(1,n*(1-r)+r)),a=255*(1-Math.min(1,i*(1-r)+r));return new F(s,o,a)}else return this}toArray(){const{_a:t,_b:n,_c:i,_d:r,space:s}=this;return[t,n,i,r,s]}toHex(){const[t,n,i]=this._clamped().map(Vh);return`#${t}${n}${i}`}toRgb(){const[t,n,i]=this._clamped();return`rgb(${t},${n},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:n,_c:i}=this.rgb(),[r,s,o]=[t,n,i].map(p=>p/255),a=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,u=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,h=(a*.4124+l*.3576+u*.1805)/.95047,c=(a*.2126+l*.7152+u*.0722)/1,f=(a*.0193+l*.1192+u*.9505)/1.08883,d=h>.008856?Math.pow(h,1/3):7.787*h+16/116,m=c>.008856?Math.pow(c,1/3):7.787*c+16/116,y=f>.008856?Math.pow(f,1/3):7.787*f+16/116;return new F(d,m,y,"xyz")}_clamped(){const{_a:t,_b:n,_c:i}=this.rgb(),{max:r,min:s,round:o}=Math,a=l=>r(0,s(o(l),255));return[t,n,i].map(a)}}class G{constructor(...t){this.init(...t)}clone(){return new G(this)}init(t,n){const i={x:0,y:0},r=Array.isArray(t)?{x:t[0],y:t[1]}:typeof t=="object"?{x:t.x,y:t.y}:{x:t,y:n};return this.x=r.x==null?i.x:r.x,this.y=r.y==null?i.y:r.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){S.isMatrixLike(t)||(t=new S(t));const{x:n,y:i}=this;return this.x=t.a*n+t.c*i+t.e,this.y=t.b*n+t.d*i+t.f,this}}function Wh(e,t){return new G(e,t).transformO(this.screenCTM().inverseO())}function ee(e,t,n){return Math.abs(t-e)<1e-6}class S{constructor(...t){this.init(...t)}static formatTransforms(t){const n=t.flip==="both"||t.flip===!0,i=t.flip&&(n||t.flip==="x")?-1:1,r=t.flip&&(n||t.flip==="y")?-1:1,s=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,l=t.scale&&t.scale.length?t.scale[1]*r:isFinite(t.scale)?t.scale*r:isFinite(t.scaleY)?t.scaleY*r:r,u=t.shear||0,h=t.rotate||t.theta||0,c=new G(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),f=c.x,d=c.y,m=new G(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),y=m.x,g=m.y,p=new G(t.translate||t.tx||t.translateX,t.ty||t.translateY),b=p.x,x=p.y,A=new G(t.relative||t.rx||t.relativeX,t.ry||t.relativeY),M=A.x,k=A.y;return{scaleX:a,scaleY:l,skewX:s,skewY:o,shear:u,theta:h,rx:M,ry:k,tx:b,ty:x,ox:f,oy:d,px:y,py:g}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return t.a!=null||t.b!=null||t.c!=null||t.d!=null||t.e!=null||t.f!=null}static matrixMultiply(t,n,i){const r=t.a*n.a+t.c*n.b,s=t.b*n.a+t.d*n.b,o=t.a*n.c+t.c*n.d,a=t.b*n.c+t.d*n.d,l=t.e+t.a*n.e+t.c*n.f,u=t.f+t.b*n.e+t.d*n.f;return i.a=r,i.b=s,i.c=o,i.d=a,i.e=l,i.f=u,i}around(t,n,i){return this.clone().aroundO(t,n,i)}aroundO(t,n,i){const r=t||0,s=n||0;return this.translateO(-r,-s).lmultiplyO(i).translateO(r,s)}clone(){return new S(this)}decompose(t=0,n=0){const i=this.a,r=this.b,s=this.c,o=this.d,a=this.e,l=this.f,u=i*o-r*s,h=u>0?1:-1,c=h*Math.sqrt(i*i+r*r),f=Math.atan2(h*r,h*i),d=180/Math.PI*f,m=Math.cos(f),y=Math.sin(f),g=(i*s+r*o)/u,p=s*c/(g*i-r)||o*c/(g*r+i),b=a-t+t*m*c+n*(g*m*c-y*p),x=l-n+t*y*c+n*(g*y*c+m*p);return{scaleX:c,scaleY:p,shear:g,rotate:d,translateX:b,translateY:x,originX:t,originY:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const n=new S(t);return ee(this.a,n.a)&&ee(this.b,n.b)&&ee(this.c,n.c)&&ee(this.d,n.d)&&ee(this.e,n.e)&&ee(this.f,n.f)}flip(t,n){return this.clone().flipO(t,n)}flipO(t,n){return t==="x"?this.scaleO(-1,1,n,0):t==="y"?this.scaleO(1,-1,0,n):this.scaleO(-1,-1,t,n||t)}init(t){const n=S.fromArray([1,0,0,1,0,0]);return t=t instanceof ft?t.matrixify():typeof t=="string"?S.fromArray(t.split(xt).map(parseFloat)):Array.isArray(t)?S.fromArray(t):typeof t=="object"&&S.isMatrixLike(t)?t:typeof t=="object"?new S().transform(t):arguments.length===6?S.fromArray([].slice.call(arguments)):n,this.a=t.a!=null?t.a:n.a,this.b=t.b!=null?t.b:n.b,this.c=t.c!=null?t.c:n.c,this.d=t.d!=null?t.d:n.d,this.e=t.e!=null?t.e:n.e,this.f=t.f!=null?t.f:n.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,n=this.b,i=this.c,r=this.d,s=this.e,o=this.f,a=t*r-n*i;if(!a)throw new Error("Cannot invert "+this);const l=r/a,u=-n/a,h=-i/a,c=t/a,f=-(l*s+h*o),d=-(u*s+c*o);return this.a=l,this.b=u,this.c=h,this.d=c,this.e=f,this.f=d,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const n=this,i=t instanceof S?t:new S(t);return S.matrixMultiply(i,n,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const n=this,i=t instanceof S?t:new S(t);return S.matrixMultiply(n,i,this)}rotate(t,n,i){return this.clone().rotateO(t,n,i)}rotateO(t,n=0,i=0){t=Ci(t);const r=Math.cos(t),s=Math.sin(t),{a:o,b:a,c:l,d:u,e:h,f:c}=this;return this.a=o*r-a*s,this.b=a*r+o*s,this.c=l*r-u*s,this.d=u*r+l*s,this.e=h*r-c*s+i*s-n*r+n,this.f=c*r+h*s-n*s-i*r+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(t,n=t,i=0,r=0){arguments.length===3&&(r=i,i=n,n=t);const{a:s,b:o,c:a,d:l,e:u,f:h}=this;return this.a=s*t,this.b=o*n,this.c=a*t,this.d=l*n,this.e=u*t-i*t+i,this.f=h*n-r*n+r,this}shear(t,n,i){return this.clone().shearO(t,n,i)}shearO(t,n=0,i=0){const{a:r,b:s,c:o,d:a,e:l,f:u}=this;return this.a=r+s*t,this.c=o+a*t,this.e=l+u*t-i*t,this}skew(){return this.clone().skewO(...arguments)}skewO(t,n=t,i=0,r=0){arguments.length===3&&(r=i,i=n,n=t),t=Ci(t),n=Ci(n);const s=Math.tan(t),o=Math.tan(n),{a,b:l,c:u,d:h,e:c,f}=this;return this.a=a+l*s,this.b=l+a*o,this.c=u+h*s,this.d=h+u*o,this.e=c+f*s-r*s,this.f=f+c*o-i*o,this}skewX(t,n,i){return this.skew(t,0,n,i)}skewY(t,n,i){return this.skew(0,t,n,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(S.isMatrixLike(t))return new S(t).multiplyO(this);const n=S.formatTransforms(t),i=this,{x:r,y:s}=new G(n.ox,n.oy).transform(i),o=new S().translateO(n.rx,n.ry).lmultiplyO(i).translateO(-r,-s).scaleO(n.scaleX,n.scaleY).skewO(n.skewX,n.skewY).shearO(n.shear).rotateO(n.theta).translateO(r,s);if(isFinite(n.px)||isFinite(n.py)){const a=new G(r,s).transform(o),l=isFinite(n.px)?n.px-a.x:0,u=isFinite(n.py)?n.py-a.y:0;o.translateO(l,u)}return o.translateO(n.tx,n.ty),o}translate(t,n){return this.clone().translateO(t,n)}translateO(t,n){return this.e+=t||0,this.f+=n||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Zh(){return new S(this.node.getCTM())}function Kh(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new S(t)}return new S(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new S}}R(S,"Matrix");function kt(){if(!kt.nodes){const e=K().size(2,0);e.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),e.attr("focusable","false"),e.attr("aria-hidden","true");const t=e.path().node;kt.nodes={svg:e,path:t}}if(!kt.nodes.svg.node.parentNode){const e=z.document.body||z.document.documentElement;kt.nodes.svg.addTo(e)}return kt.nodes}function lo(e){return!e.width&&!e.height&&!e.x&&!e.y}function Qh(e){return e===z.document||(z.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===z.document}).call(z.document.documentElement,e)}class W{constructor(...t){this.init(...t)}addOffset(){return this.x+=z.window.pageXOffset,this.y+=z.window.pageYOffset,new W(this)}init(t){const n=[0,0,0,0];return t=typeof t=="string"?t.split(xt).map(parseFloat):Array.isArray(t)?t:typeof t=="object"?[t.left!=null?t.left:t.x,t.top!=null?t.top:t.y,t.width,t.height]:arguments.length===4?[].slice.call(arguments):n,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return lo(this)}merge(t){const n=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width)-n,s=Math.max(this.y+this.height,t.y+t.height)-i;return new W(n,i,r,s)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof S||(t=new S(t));let n=1/0,i=-1/0,r=1/0,s=-1/0;return[new G(this.x,this.y),new G(this.x2,this.y),new G(this.x,this.y2),new G(this.x2,this.y2)].forEach(function(a){a=a.transform(t),n=Math.min(n,a.x),i=Math.max(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.y)}),new W(n,r,i-n,s-r)}}function uo(e,t,n){let i;try{if(i=t(e.node),lo(i)&&!Qh(e.node))throw new Error("Element not in the dom")}catch{i=n(e)}return i}function tc(){const n=uo(this,r=>r.getBBox(),r=>{try{const s=r.clone().addTo(kt().svg).show(),o=s.node.getBBox();return s.remove(),o}catch(s){throw new Error(`Getting bbox of element "${r.node.nodeName}" is not possible: ${s.toString()}`)}});return new W(n)}function ec(e){const i=uo(this,s=>s.getBoundingClientRect(),s=>{throw new Error(`Getting rbox of element "${s.node.nodeName}" is not possible`)}),r=new W(i);return e?r.transform(e.screenCTM().inverseO()):r.addOffset()}function nc(e,t){const n=this.bbox();return e>n.x&&t>n.y&&e<n.x+n.width&&t<n.y+n.height}N({viewbox:{viewbox(e,t,n,i){return e==null?new W(this.attr("viewBox")):this.attr("viewBox",new W(e,t,n,i))},zoom(e,t){let{width:n,height:i}=this.attr(["width","height"]);if((!n&&!i||typeof n=="string"||typeof i=="string")&&(n=this.node.clientWidth,i=this.node.clientHeight),!n||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),s=n/r.width,o=i/r.height,a=Math.min(s,o);if(e==null)return a;let l=a/e;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),t=t||new G(n/2/s+r.x,i/2/o+r.y);const u=new W(r).transform(new S({scale:l,origin:t}));return this.viewbox(u)}}}),R(W,"Box");class Dt extends Array{constructor(t=[],...n){if(super(t,...n),typeof t=="number")return this;this.length=0,this.push(...t)}}P([Dt],{each(e,...t){return typeof e=="function"?this.map((n,i,r)=>e.call(n,n,i,r)):this.map(n=>n[e](...t))},toArray(){return Array.prototype.concat.apply([],this)}});const ic=["toArray","constructor","each"];Dt.extend=function(e){e=e.reduce((t,n)=>(ic.includes(n)||n[0]==="_"||(n in Array.prototype&&(t["$"+n]=Array.prototype[n]),t[n]=function(...i){return this.each(n,...i)}),t),{}),P([Dt],e)};function ne(e,t){return new Dt(Ei((t||z.document).querySelectorAll(e),function(n){return st(n)}))}function rc(e){return ne(e,this.node)}function sc(e){return st(this.node.querySelector(e))}let oc=0;const ho={};function co(e){let t=e.getEventHolder();return t===z.window&&(t=ho),t.events||(t.events={}),t.events}function Fi(e){return e.getEventTarget()}function ac(e){let t=e.getEventHolder();t===z.window&&(t=ho),t.events&&(t.events={})}function qi(e,t,n,i,r){const s=n.bind(i||e),o=K(e),a=co(o),l=Fi(o);t=Array.isArray(t)?t:t.split(xt),n._svgjsListenerId||(n._svgjsListenerId=++oc),t.forEach(function(u){const h=u.split(".")[0],c=u.split(".")[1]||"*";a[h]=a[h]||{},a[h][c]=a[h][c]||{},a[h][c][n._svgjsListenerId]=s,l.addEventListener(h,s,r||!1)})}function ie(e,t,n,i){const r=K(e),s=co(r),o=Fi(r);typeof n=="function"&&(n=n._svgjsListenerId,!n)||(t=Array.isArray(t)?t:(t||"").split(xt),t.forEach(function(a){const l=a&&a.split(".")[0],u=a&&a.split(".")[1];let h,c;if(n)s[l]&&s[l][u||"*"]&&(o.removeEventListener(l,s[l][u||"*"][n],i||!1),delete s[l][u||"*"][n]);else if(l&&u){if(s[l]&&s[l][u]){for(c in s[l][u])ie(o,[l,u].join("."),c);delete s[l][u]}}else if(u)for(a in s)for(h in s[a])u===h&&ie(o,[a,u].join("."));else if(l){if(s[l]){for(h in s[l])ie(o,[l,h].join("."));delete s[l]}}else{for(a in s)ie(o,a);ac(r)}}))}function lc(e,t,n,i){const r=Fi(e);return t instanceof z.window.Event||(t=new z.window.CustomEvent(t,{detail:n,cancelable:!0,...i})),r.dispatchEvent(t),t}class _e extends zi{addEventListener(){}dispatch(t,n,i){return lc(this,t,n,i)}dispatchEvent(t){const n=this.getEventHolder().events;if(!n)return!0;const i=n[t.type];for(const r in i)for(const s in i[r])i[r][s](t);return!t.defaultPrevented}fire(t,n,i){return this.dispatch(t,n,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,n,i){return ie(this,t,n,i),this}on(t,n,i,r){return qi(this,t,n,i,r),this}removeEventListener(){}}R(_e,"EventTarget");function fo(){}const Se={duration:400,ease:">",delay:0},uc={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class re extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return typeof t=="number"?this:(this.length=0,this.push(...this.parse(t)),this)}parse(t=[]){return t instanceof Array?t:t.trim().split(xt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class T{constructor(...t){this.init(...t)}convert(t){return new T(this.value,t)}divide(t){return t=new T(t),new T(this/t,this.unit||t.unit)}init(t,n){return n=Array.isArray(t)?t[1]:n,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=n||"",typeof t=="number"?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:typeof t=="string"?(n=t.match(io),n&&(this.value=parseFloat(n[1]),n[5]==="%"?this.value/=100:n[5]==="s"&&(this.value*=1e3),this.unit=n[5])):t instanceof T&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new T(t),new T(this-t,this.unit||t.unit)}plus(t){return t=new T(t),new T(this+t,this.unit||t.unit)}times(t){return t=new T(t),new T(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const hc=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),po=[];function cc(e){po.push(e)}function fc(e,t,n){if(e==null){e={},t=this.node.attributes;for(const i of t)e[i.nodeName]=ao.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return e}else{if(e instanceof Array)return e.reduce((i,r)=>(i[r]=this.attr(r),i),{});if(typeof e=="object"&&e.constructor===Object)for(t in e)this.attr(t,e[t]);else if(t===null)this.node.removeAttribute(e);else{if(t==null)return t=this.node.getAttribute(e),t==null?uc[e]:ao.test(t)?parseFloat(t):t;t=po.reduce((i,r)=>r(e,i,this),t),typeof t=="number"?t=new T(t):hc.has(e)&&F.isColor(t)?t=new F(t):t.constructor===Array&&(t=new re(t)),e==="leading"?this.leading&&this.leading(t):typeof n=="string"?this.node.setAttributeNS(n,e,t.toString()):this.node.setAttribute(e,t.toString()),this.rebuild&&(e==="font-size"||e==="x")&&this.rebuild()}}return this}class _t extends _e{constructor(t,n){super(),this.node=t,this.type=t.nodeName,n&&t!==n&&this.attr(n)}add(t,n){return t=K(t),t.removeNamespace&&this.node instanceof z.window.SVGElement&&t.removeNamespace(),n==null?this.node.appendChild(t.node):t.node!==this.node.childNodes[n]&&this.node.insertBefore(t.node,this.node.childNodes[n]),this}addTo(t,n){return K(t).put(this,n)}children(){return new Dt(Ei(this.node.children,function(t){return st(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0,n=!0){this.writeDataToDom();let i=this.node.cloneNode(t);return n&&(i=no(i)),new this.constructor(i)}each(t,n){const i=this.children();let r,s;for(r=0,s=i.length;r<s;r++)t.apply(i[r],[r,i]),n&&i[r].each(t,n);return this}element(t,n){return this.put(new _t(ke(t),n))}first(){return st(this.node.firstChild)}get(t){return st(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,n){return this.xml(t,n,ch)}id(t){return typeof t>"u"&&!this.node.id&&(this.node.id=eo(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return st(this.node.lastChild)}matches(t){const n=this.node,i=n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector||null;return i&&i.call(n,t)}parent(t){let n=this;if(!n.node.parentNode)return null;if(n=st(n.node.parentNode),!t)return n;do if(typeof t=="string"?n.matches(t):n instanceof t)return n;while(n=st(n.node.parentNode));return n}put(t,n){return t=K(t),this.add(t,n),t}putIn(t,n){return K(t).add(this,n)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=K(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,n=null){const i=10**t,r=this.attr(n);for(const s in r)typeof r[s]=="number"&&(r[s]=Math.round(r[s]*i)/i);return this.attr(r),this}svg(t,n){return this.xml(t,n,Li)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const n=this.parent();if(!n)return this.addTo(t);const i=n.index(this);return n.put(t,i).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,n,i){if(typeof t=="boolean"&&(i=n,n=t,t=null),t==null||typeof t=="function"){n=n??!0,this.writeDataToDom();let a=this;if(t!=null){if(a=st(a.node.cloneNode(!0)),n){const l=t(a);if(a=l||a,l===!1)return""}a.each(function(){const l=t(this),u=l||this;l===!1?this.remove():l&&this!==u&&this.replace(u)},!0)}return n?a.node.outerHTML:a.node.innerHTML}n=n??!1;const r=ke("wrapper",i),s=z.document.createDocumentFragment();r.innerHTML=t;for(let a=r.children.length;a--;)s.appendChild(r.firstElementChild);const o=this.parent();return n?this.replace(s)&&o:this.add(s)}}P(_t,{attr:fc,find:rc,findOne:sc}),R(_t,"Dom");class ft extends _t{constructor(t,n){super(t,n),this.dom={},this.node.instance=this,(t.hasAttribute("data-svgjs")||t.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(t.getAttribute("data-svgjs"))??JSON.parse(t.getAttribute("svgjs:data"))??{})}center(t,n){return this.cx(t).cy(n)}cx(t){return t==null?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return t==null?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,n){return this.dx(t).dy(n)}dx(t=0){return this.x(new T(t).plus(this.x()))}dy(t=0){return this.y(new T(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,n){return this.x(t).y(n)}parents(t=this.root()){const n=typeof t=="string";n||(t=K(t));const i=new Dt;let r=this;for(;(r=r.parent())&&r.node!==z.document&&r.nodeName!=="#document-fragment"&&(i.push(r),!(!n&&r.node===t.node||n&&r.matches(t)));)if(r.node===this.root().node)return null;return i}reference(t){if(t=this.attr(t),!t)return null;const n=(t+"").match(Th);return n?K(n[1]):null}root(){const t=this.parent(dh(Ri));return t&&t.root()}setData(t){return this.dom=t,this}size(t,n){const i=Qt(this,t,n);return this.width(new T(i.width)).height(new T(i.height))}width(t){return this.attr("width",t)}writeDataToDom(){return to(this,this.dom),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}P(ft,{bbox:tc,rbox:ec,inside:nc,point:Wh,ctm:Zh,screenCTM:Kh}),R(ft,"Element");const Ee={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return t==="color"?e:e+"-"+t}};["fill","stroke"].forEach(function(e){const t={};let n;t[e]=function(i){if(typeof i>"u")return this.attr(e);if(typeof i=="string"||i instanceof F||F.isRgb(i)||i instanceof ft)this.attr(e,i);else for(n=Ee[e].length-1;n>=0;n--)i[Ee[e][n]]!=null&&this.attr(Ee.prefix(e,Ee[e][n]),i[Ee[e][n]]);return this},N(["Element","Runner"],t)}),N(["Element","Runner"],{matrix:function(e,t,n,i,r,s){return e==null?new S(this):this.attr("transform",new S(e,t,n,i,r,s))},rotate:function(e,t,n){return this.transform({rotate:e,ox:t,oy:n},!0)},skew:function(e,t,n,i){return arguments.length===1||arguments.length===3?this.transform({skew:e,ox:t,oy:n},!0):this.transform({skew:[e,t],ox:n,oy:i},!0)},shear:function(e,t,n){return this.transform({shear:e,ox:t,oy:n},!0)},scale:function(e,t,n,i){return arguments.length===1||arguments.length===3?this.transform({scale:e,ox:t,oy:n},!0):this.transform({scale:[e,t],ox:n,oy:i},!0)},translate:function(e,t){return this.transform({translate:[e,t]},!0)},relative:function(e,t){return this.transform({relative:[e,t]},!0)},flip:function(e="both",t="center"){return"xybothtrue".indexOf(e)===-1&&(t=e,e="both"),this.transform({flip:e,origin:t},!0)},opacity:function(e){return this.attr("opacity",e)}}),N("radius",{radius:function(e,t=e){return(this._element||this).type==="radialGradient"?this.attr("r",new T(e)):this.rx(e).ry(t)}}),N("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(e){return new G(this.node.getPointAtLength(e))}}),N(["Element","Runner"],{font:function(e,t){if(typeof e=="object"){for(t in e)this.font(t,e[t]);return this}return e==="leading"?this.leading(t):e==="anchor"?this.attr("text-anchor",t):e==="size"||e==="family"||e==="weight"||e==="stretch"||e==="variant"||e==="style"?this.attr("font-"+e,t):this.attr(e,t)}});const dc=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(e,t){const n=function(i){return i===null?this.off(t):this.on(t,i),this};return e[t]=n,e},{});N("Element",dc);function pc(){return this.attr("transform",null)}function mc(){return(this.attr("transform")||"").split(Nh).slice(0,-1).map(function(t){const n=t.trim().split("(");return[n[0],n[1].split(xt).map(function(i){return parseFloat(i)})]}).reverse().reduce(function(t,n){return n[0]==="matrix"?t.lmultiply(S.fromArray(n[1])):t[n[0]].apply(t,n[1])},new S)}function gc(e,t){if(this===e)return this;if(Ni(this.node))return this.addTo(e,t);const n=this.screenCTM(),i=e.screenCTM().inverse();return this.addTo(e,t).untransform().transform(i.multiply(n)),this}function bc(e){return this.toParent(this.root(),e)}function yc(e,t){if(e==null||typeof e=="string"){const r=new S(this).decompose();return e==null?r:r[e]}S.isMatrixLike(e)||(e={...e,origin:Ti(e,this)});const n=t===!0?this:t||!1,i=new S(n).transform(e);return this.attr("transform",i)}N("Element",{untransform:pc,matrixify:mc,toParent:gc,toRoot:bc,transform:yc});class et extends ft{flatten(){return this.each(function(){if(this instanceof et)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),n=t.index(this)){return n=n===-1?t.children().length:n,this.each(function(i,r){return r[r.length-i-1].toParent(t,n)}),this.remove()}}R(et,"Container");class ji extends et{constructor(t,n=t){super(j("defs",t),n)}flatten(){return this}ungroup(){return this}}R(ji,"Defs");class it extends ft{}R(it,"Shape");function Hi(e){return this.attr("rx",e)}function Yi(e){return this.attr("ry",e)}function mo(e){return e==null?this.cx()-this.rx():this.cx(e+this.rx())}function go(e){return e==null?this.cy()-this.ry():this.cy(e+this.ry())}function bo(e){return this.attr("cx",e)}function yo(e){return this.attr("cy",e)}function xo(e){return e==null?this.rx()*2:this.rx(new T(e).divide(2))}function wo(e){return e==null?this.ry()*2:this.ry(new T(e).divide(2))}const xc=Object.freeze(Object.defineProperty({__proto__:null,cx:bo,cy:yo,height:wo,rx:Hi,ry:Yi,width:xo,x:mo,y:go},Symbol.toStringTag,{value:"Module"}));class pn extends it{constructor(t,n=t){super(j("ellipse",t),n)}size(t,n){const i=Qt(this,t,n);return this.rx(new T(i.width).divide(2)).ry(new T(i.height).divide(2))}}P(pn,xc),N("Container",{ellipse:H(function(e=0,t=e){return this.put(new pn).size(e,t).move(0,0)})}),R(pn,"Ellipse");class vo extends _t{constructor(t=z.document.createDocumentFragment()){super(t)}xml(t,n,i){if(typeof t=="boolean"&&(i=n,n=t,t=null),t==null||typeof t=="function"){const r=new _t(ke("wrapper",i));return r.add(this.node.cloneNode(!0)),r.xml(!1,i)}return super.xml(t,!1,i)}}R(vo,"Fragment");function Mo(e,t){return(this._element||this).type==="radialGradient"?this.attr({fx:new T(e),fy:new T(t)}):this.attr({x1:new T(e),y1:new T(t)})}function Ao(e,t){return(this._element||this).type==="radialGradient"?this.attr({cx:new T(e),cy:new T(t)}):this.attr({x2:new T(e),y2:new T(t)})}const wc=Object.freeze(Object.defineProperty({__proto__:null,from:Mo,to:Ao},Symbol.toStringTag,{value:"Module"}));class Ce extends et{constructor(t,n){super(j(t+"Gradient",typeof t=="string"?null:t),n)}attr(t,n,i){return t==="transform"&&(t="gradientTransform"),super.attr(t,n,i)}bbox(){return new W}targets(){return ne("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}P(Ce,wc),N({Container:{gradient(...e){return this.defs().gradient(...e)}},Defs:{gradient:H(function(e,t){return this.put(new Ce(e)).update(t)})}}),R(Ce,"Gradient");class Te extends et{constructor(t,n=t){super(j("pattern",t),n)}attr(t,n,i){return t==="transform"&&(t="patternTransform"),super.attr(t,n,i)}bbox(){return new W}targets(){return ne("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}N({Container:{pattern(...e){return this.defs().pattern(...e)}},Defs:{pattern:H(function(e,t,n){return this.put(new Te).update(n).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})})}}),R(Te,"Pattern");let mn=class extends it{constructor(t,n=t){super(j("image",t),n)}load(t,n){if(!t)return this;const i=new z.window.Image;return qi(i,"load",function(r){const s=this.parent(Te);this.width()===0&&this.height()===0&&this.size(i.width,i.height),s instanceof Te&&s.width()===0&&s.height()===0&&s.size(this.width(),this.height()),typeof n=="function"&&n.call(this,r)},this),qi(i,"load error",function(){ie(i)}),this.attr("href",i.src=t,Ae)}};cc(function(e,t,n){return(e==="fill"||e==="stroke")&&Ph.test(t)&&(t=n.root().defs().image(t)),t instanceof mn&&(t=n.root().defs().pattern(0,0,i=>{i.add(t)})),t}),N({Container:{image:H(function(e,t){return this.put(new mn).size(0,0).load(e,t)})}}),R(mn,"Image");class St extends re{bbox(){let t=-1/0,n=-1/0,i=1/0,r=1/0;return this.forEach(function(s){t=Math.max(s[0],t),n=Math.max(s[1],n),i=Math.min(s[0],i),r=Math.min(s[1],r)}),new W(i,r,t-i,n-r)}move(t,n){const i=this.bbox();if(t-=i.x,n-=i.y,!isNaN(t)&&!isNaN(n))for(let r=this.length-1;r>=0;r--)this[r]=[this[r][0]+t,this[r][1]+n];return this}parse(t=[0,0]){const n=[];t instanceof Array?t=Array.prototype.concat.apply([],t):t=t.trim().split(xt).map(parseFloat),t.length%2!==0&&t.pop();for(let i=0,r=t.length;i<r;i=i+2)n.push([t[i],t[i+1]]);return n}size(t,n){let i;const r=this.bbox();for(i=this.length-1;i>=0;i--)r.width&&(this[i][0]=(this[i][0]-r.x)*t/r.width+r.x),r.height&&(this[i][1]=(this[i][1]-r.y)*n/r.height+r.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let n=0,i=this.length;n<i;n++)t.push(this[n].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){S.isMatrixLike(t)||(t=new S(t));for(let n=this.length;n--;){const[i,r]=this[n];this[n][0]=t.a*i+t.c*r+t.e,this[n][1]=t.b*i+t.d*r+t.f}return this}}const vc=St;function Mc(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}function Ac(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}function kc(e){const t=this.bbox();return e==null?t.width:this.size(e,t.height)}function _c(e){const t=this.bbox();return e==null?t.height:this.size(t.width,e)}const Bi=Object.freeze(Object.defineProperty({__proto__:null,MorphArray:vc,height:_c,width:kc,x:Mc,y:Ac},Symbol.toStringTag,{value:"Module"}));class Ne extends it{constructor(t,n=t){super(j("line",t),n)}array(){return new St([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,n){return this.attr(this.array().move(t,n).toLine())}plot(t,n,i,r){return t==null?this.array():(typeof n<"u"?t={x1:t,y1:n,x2:i,y2:r}:t=new St(t).toLine(),this.attr(t))}size(t,n){const i=Qt(this,t,n);return this.attr(this.array().size(i.width,i.height).toLine())}}P(Ne,Bi),N({Container:{line:H(function(...e){return Ne.prototype.plot.apply(this.put(new Ne),e[0]!=null?e:[0,0,0,0])})}}),R(Ne,"Line");class gn extends et{constructor(t,n=t){super(j("marker",t),n)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,n){return this.attr("refX",t).attr("refY",n)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}N({Container:{marker(...e){return this.defs().marker(...e)}},Defs:{marker:H(function(e,t,n){return this.put(new gn).size(e,t).ref(e/2,t/2).viewbox(0,0,e,t).attr("orient","auto").update(n)})},marker:{marker(e,t,n,i){let r=["marker"];return e!=="all"&&r.push(e),r=r.join("-"),e=arguments[1]instanceof gn?arguments[1]:this.defs().marker(t,n,i),this.attr(r,e)}}}),R(gn,"Marker");function se(e,t){return function(n){return n==null?this[e]:(this[e]=n,t&&t.call(this),this)}}const Sc={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return-Math.cos(e*Math.PI/2)+1},bezier:function(e,t,n,i){return function(r){return r<0?e>0?t/e*r:n>0?i/n*r:0:r>1?n<1?(1-i)/(1-n)*r+(i-n)/(1-n):e<1?(1-t)/(1-e)*r+(t-e)/(1-e):1:3*r*(1-r)**2*t+3*r**2*(1-r)*i+r**3}},steps:function(e,t="end"){t=t.split("-").reverse()[0];let n=e;return t==="none"?--n:t==="both"&&++n,(i,r=!1)=>{let s=Math.floor(i*e);const o=i*s%1===0;return(t==="start"||t==="both")&&++s,r&&o&&--s,i>=0&&s<0&&(s=0),i<=1&&s>n&&(s=n),s/n}}};class Gi{done(){return!1}}class Xi extends Gi{constructor(t=Se.ease){super(),this.ease=Sc[t]||t}step(t,n,i){return typeof t!="number"?i<1?t:n:t+(n-t)*this.ease(i)}}class bn extends Gi{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,n,i,r){return this.stepper(t,n,i,r)}}function ko(){const e=(this._duration||500)/1e3,t=this._overshoot||0,n=1e-10,i=Math.PI,r=Math.log(t/100+n),s=-r/Math.sqrt(i*i+r*r),o=3.9/(s*e);this.d=2*s*o,this.k=o*o}class Ec extends bn{constructor(t=500,n=0){super(),this.duration(t).overshoot(n)}step(t,n,i,r){if(typeof t=="string")return t;if(r.done=i===1/0,i===1/0)return n;if(i===0)return t;i>100&&(i=16),i/=1e3;const s=r.velocity||0,o=-this.d*s-this.k*(t-n),a=t+s*i+o*i*i/2;return r.velocity=s+o*i,r.done=Math.abs(n-a)+Math.abs(s)<.002,r.done?n:a}}P(Ec,{duration:se("_duration",ko),overshoot:se("_overshoot",ko)});class Cc extends bn{constructor(t=.1,n=.01,i=0,r=1e3){super(),this.p(t).i(n).d(i).windup(r)}step(t,n,i,r){if(typeof t=="string")return t;if(r.done=i===1/0,i===1/0)return n;if(i===0)return t;const s=n-t;let o=(r.integral||0)+s*i;const a=(s-(r.error||0))/i,l=this._windup;return l!==!1&&(o=Math.max(-l,Math.min(o,l))),r.error=s,r.integral=o,r.done=Math.abs(s)<.001,r.done?n:t+(this.P*s+this.I*o+this.D*a)}}P(Cc,{windup:se("_windup"),p:se("P"),i:se("I"),d:se("D")});const Tc={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ui={M:function(e,t,n){return t.x=n.x=e[0],t.y=n.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},S:function(e,t){return t.x=e[2],t.y=e[3],["S",e[0],e[1],e[2],e[3]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},T:function(e,t){return t.x=e[0],t.y=e[1],["T",e[0],e[1]]},Z:function(e,t,n){return t.x=n.x,t.y=n.y,["Z"]},A:function(e,t){return t.x=e[5],t.y=e[6],["A",e[0],e[1],e[2],e[3],e[4],e[5],e[6]]}},Vi="mlhvqtcsaz".split("");for(let e=0,t=Vi.length;e<t;++e)Ui[Vi[e]]=function(n){return function(i,r,s){if(n==="H")i[0]=i[0]+r.x;else if(n==="V")i[0]=i[0]+r.y;else if(n==="A")i[5]=i[5]+r.x,i[6]=i[6]+r.y;else for(let o=0,a=i.length;o<a;++o)i[o]=i[o]+(o%2?r.y:r.x);return Ui[n](i,r,s)}}(Vi[e].toUpperCase());function Nc(e){const t=e.segment[0];return Ui[t](e.segment.slice(1),e.p,e.p0)}function $i(e){return e.segment.length&&e.segment.length-1===Tc[e.segment[0].toUpperCase()]}function Lc(e,t){e.inNumber&&Ft(e,!1);const n=Oi.test(t);if(n)e.segment=[t];else{const i=e.lastCommand,r=i.toLowerCase(),s=i===r;e.segment=[r==="m"?s?"l":"L":i]}return e.inSegment=!0,e.lastCommand=e.segment[0],n}function Ft(e,t){if(!e.inNumber)throw new Error("Parser Error");e.number&&e.segment.push(parseFloat(e.number)),e.inNumber=t,e.number="",e.pointSeen=!1,e.hasExponent=!1,$i(e)&&Ji(e)}function Ji(e){e.inSegment=!1,e.absolute&&(e.segment=Nc(e)),e.segments.push(e.segment)}function Pc(e){if(!e.segment.length)return!1;const t=e.segment[0].toUpperCase()==="A",n=e.segment.length;return t&&(n===4||n===5)}function zc(e){return e.lastToken.toUpperCase()==="E"}const Rc=new Set([" ",",","	",`
`,"\r","\f"]);function Ic(e,t=!0){let n=0,i="";const r={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:t,p0:new G,p:new G};for(;r.lastToken=i,i=e.charAt(n++);)if(!(!r.inSegment&&Lc(r,i))){if(i==="."){if(r.pointSeen||r.hasExponent){Ft(r,!1),--n;continue}r.inNumber=!0,r.pointSeen=!0,r.number+=i;continue}if(!isNaN(parseInt(i))){if(r.number==="0"||Pc(r)){r.inNumber=!0,r.number=i,Ft(r,!0);continue}r.inNumber=!0,r.number+=i;continue}if(Rc.has(i)){r.inNumber&&Ft(r,!1);continue}if(i==="-"||i==="+"){if(r.inNumber&&!zc(r)){Ft(r,!1),--n;continue}r.number+=i,r.inNumber=!0;continue}if(i.toUpperCase()==="E"){r.number+=i,r.hasExponent=!0;continue}if(Oi.test(i)){if(r.inNumber)Ft(r,!1);else if($i(r))Ji(r);else throw new Error("parser Error");--n}}return r.inNumber&&Ft(r,!1),r.inSegment&&$i(r)&&Ji(r),r.segments}function Oc(e){let t="";for(let n=0,i=e.length;n<i;n++)t+=e[n][0],e[n][1]!=null&&(t+=e[n][1],e[n][2]!=null&&(t+=" ",t+=e[n][2],e[n][3]!=null&&(t+=" ",t+=e[n][3],t+=" ",t+=e[n][4],e[n][5]!=null&&(t+=" ",t+=e[n][5],t+=" ",t+=e[n][6],e[n][7]!=null&&(t+=" ",t+=e[n][7])))));return t+" "}class qt extends re{bbox(){return kt().path.setAttribute("d",this.toString()),new W(kt.nodes.path.getBBox())}move(t,n){const i=this.bbox();if(t-=i.x,n-=i.y,!isNaN(t)&&!isNaN(n))for(let r,s=this.length-1;s>=0;s--)r=this[s][0],r==="M"||r==="L"||r==="T"?(this[s][1]+=t,this[s][2]+=n):r==="H"?this[s][1]+=t:r==="V"?this[s][1]+=n:r==="C"||r==="S"||r==="Q"?(this[s][1]+=t,this[s][2]+=n,this[s][3]+=t,this[s][4]+=n,r==="C"&&(this[s][5]+=t,this[s][6]+=n)):r==="A"&&(this[s][6]+=t,this[s][7]+=n);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),Ic(t)}size(t,n){const i=this.bbox();let r,s;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,r=this.length-1;r>=0;r--)s=this[r][0],s==="M"||s==="L"||s==="T"?(this[r][1]=(this[r][1]-i.x)*t/i.width+i.x,this[r][2]=(this[r][2]-i.y)*n/i.height+i.y):s==="H"?this[r][1]=(this[r][1]-i.x)*t/i.width+i.x:s==="V"?this[r][1]=(this[r][1]-i.y)*n/i.height+i.y:s==="C"||s==="S"||s==="Q"?(this[r][1]=(this[r][1]-i.x)*t/i.width+i.x,this[r][2]=(this[r][2]-i.y)*n/i.height+i.y,this[r][3]=(this[r][3]-i.x)*t/i.width+i.x,this[r][4]=(this[r][4]-i.y)*n/i.height+i.y,s==="C"&&(this[r][5]=(this[r][5]-i.x)*t/i.width+i.x,this[r][6]=(this[r][6]-i.y)*n/i.height+i.y)):s==="A"&&(this[r][1]=this[r][1]*t/i.width,this[r][2]=this[r][2]*n/i.height,this[r][6]=(this[r][6]-i.x)*t/i.width+i.x,this[r][7]=(this[r][7]-i.y)*n/i.height+i.y);return this}toString(){return Oc(this)}}const _o=e=>{const t=typeof e;return t==="number"?T:t==="string"?F.isColor(e)?F:xt.test(e)?Oi.test(e)?qt:re:io.test(e)?T:Wi:Zi.indexOf(e.constructor)>-1?e.constructor:Array.isArray(e)?re:t==="object"?Pe:Wi};class jt{constructor(t){this._stepper=t||new Xi("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(n,i){return n&&i},!0)}from(t){return t==null?this._from:(this._from=this._set(t),this)}stepper(t){return t==null?this._stepper:(this._stepper=t,this)}to(t){return t==null?this._to:(this._to=this._set(t),this)}type(t){return t==null?this._type:(this._type=t,this)}_set(t){this._type||this.type(_o(t));let n=new this._type(t);return this._type===F&&(n=this._to?n[this._to[4]]():this._from?n[this._from[4]]():n),this._type===Pe&&(n=this._to?n.align(this._to):this._from?n.align(this._from):n),n=n.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(n.length)).map(Object).map(function(i){return i.done=!0,i}),n}}class Wi{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class Le{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,Le.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}Le.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Dc=(e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0;class Pe{constructor(...t){this.init(...t)}align(t){const n=this.values;for(let i=0,r=n.length;i<r;++i){if(n[i+1]===t[i+1]){if(n[i+1]===F&&t[i+7]!==n[i+7]){const a=t[i+7],l=new F(this.values.splice(i+3,5))[a]().toArray();this.values.splice(i+3,0,...l)}i+=n[i+2]+2;continue}if(!t[i+1])return this;const s=new t[i+1]().toArray(),o=n[i+2]+3;n.splice(i,o,t[i],t[i+1],t[i+2],...s),i+=n[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t)){this.values=t.slice();return}t=t||{};const n=[];for(const i in t){const r=_o(t[i]),s=new r(t[i]).toArray();n.push([i,r,s.length,...s])}return n.sort(Dc),this.values=n.reduce((i,r)=>i.concat(r),[]),this}toArray(){return this.values}valueOf(){const t={},n=this.values;for(;n.length;){const i=n.shift(),r=n.shift(),s=n.shift(),o=n.splice(0,s);t[i]=new r(o)}return t}}const Zi=[Wi,Le,Pe];function Fc(e=[]){Zi.push(...[].concat(e))}function qc(){P(Zi,{to(e){return new jt().type(this.constructor).from(this.toArray()).to(e)},fromArray(e){return this.init(e),this},toConsumable(){return this.toArray()},morph(e,t,n,i,r){const s=function(o,a){return i.step(o,t[a],n,r[a],r)};return this.fromArray(e.map(s))}})}class oe extends it{constructor(t,n=t){super(j("path",t),n)}array(){return this._array||(this._array=new qt(this.attr("d")))}clear(){return delete this._array,this}height(t){return t==null?this.bbox().height:this.size(this.bbox().width,t)}move(t,n){return this.attr("d",this.array().move(t,n))}plot(t){return t==null?this.array():this.clear().attr("d",typeof t=="string"?t:this._array=new qt(t))}size(t,n){const i=Qt(this,t,n);return this.attr("d",this.array().size(i.width,i.height))}width(t){return t==null?this.bbox().width:this.size(t,this.bbox().height)}x(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}y(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}}oe.prototype.MorphArray=qt,N({Container:{path:H(function(e){return this.put(new oe).plot(e||new qt)})}}),R(oe,"Path");function jc(){return this._array||(this._array=new St(this.attr("points")))}function Hc(){return delete this._array,this}function Yc(e,t){return this.attr("points",this.array().move(e,t))}function Bc(e){return e==null?this.array():this.clear().attr("points",typeof e=="string"?e:this._array=new St(e))}function Gc(e,t){const n=Qt(this,e,t);return this.attr("points",this.array().size(n.width,n.height))}const So=Object.freeze(Object.defineProperty({__proto__:null,array:jc,clear:Hc,move:Yc,plot:Bc,size:Gc},Symbol.toStringTag,{value:"Module"}));class ze extends it{constructor(t,n=t){super(j("polygon",t),n)}}N({Container:{polygon:H(function(e){return this.put(new ze).plot(e||new St)})}}),P(ze,Bi),P(ze,So),R(ze,"Polygon");class Re extends it{constructor(t,n=t){super(j("polyline",t),n)}}N({Container:{polyline:H(function(e){return this.put(new Re).plot(e||new St)})}}),P(Re,Bi),P(Re,So),R(Re,"Polyline");class yn extends it{constructor(t,n=t){super(j("rect",t),n)}}P(yn,{rx:Hi,ry:Yi}),N({Container:{rect:H(function(e,t){return this.put(new yn).size(e,t)})}}),R(yn,"Rect");class Ki{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const n=typeof t.next<"u"?t:{value:t,next:null,prev:null};return this._last?(n.prev=this._last,this._last.next=n,this._last=n):(this._last=n,this._first=n),n}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const D={nextDraw:null,frames:new Ki,timeouts:new Ki,immediates:new Ki,timer:()=>z.window.performance||z.window.Date,transforms:[],frame(e){const t=D.frames.push({run:e});return D.nextDraw===null&&(D.nextDraw=z.window.requestAnimationFrame(D._draw)),t},timeout(e,t){t=t||0;const n=D.timer().now()+t,i=D.timeouts.push({run:e,time:n});return D.nextDraw===null&&(D.nextDraw=z.window.requestAnimationFrame(D._draw)),i},immediate(e){const t=D.immediates.push(e);return D.nextDraw===null&&(D.nextDraw=z.window.requestAnimationFrame(D._draw)),t},cancelFrame(e){e!=null&&D.frames.remove(e)},clearTimeout(e){e!=null&&D.timeouts.remove(e)},cancelImmediate(e){e!=null&&D.immediates.remove(e)},_draw(e){let t=null;const n=D.timeouts.last();for(;(t=D.timeouts.shift())&&(e>=t.time?t.run():D.timeouts.push(t),t!==n););let i=null;const r=D.frames.last();for(;i!==r&&(i=D.frames.shift());)i.run(e);let s=null;for(;s=D.immediates.shift();)s();D.nextDraw=D.timeouts.first()||D.frames.first()?z.window.requestAnimationFrame(D._draw):null}},Xc=function(e){const t=e.start,n=e.runner.duration(),i=t+n;return{start:t,duration:n,end:i,runner:e.runner}},Uc=function(){const e=z.window;return(e.performance||e.Date).now()};class Eo extends _e{constructor(t=Uc){super(),this._timeSource=t,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),n=t?t.runner.duration():0;return(t?t.start:this._time)+n}getEndTimeOfTimeline(){const t=this._runners.map(n=>n.start+n.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return t==null?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const n=this.speed();if(t==null)return this.speed(-n);const i=Math.abs(n);return this.speed(t?-i:i)}schedule(t,n,i){if(t==null)return this._runners.map(Xc);let r=0;const s=this.getEndTime();if(n=n||0,i==null||i==="last"||i==="after")r=s;else if(i==="absolute"||i==="start")r=n,n=0;else if(i==="now")r=this._time;else if(i==="relative"){const l=this.getRunnerInfoById(t.id);l&&(r=l.start+n,n=0)}else if(i==="with-last"){const l=this.getLastRunnerInfo();r=l?l.start:this._time}else throw new Error('Invalid value for the "when" parameter');t.unschedule(),t.timeline(this);const o=t.persist(),a={persist:o===null?this._persist:o,start:r+n,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort((l,u)=>l.start-u.start),this._runnerIds=this._runners.map(l=>l.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return t==null?this._timeSource:(this._timeSource=t,this)}speed(t){return t==null?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return t==null?this._time:(this._time=t,this._continue(!0))}unschedule(t){const n=this._runnerIds.indexOf(t.id);return n<0?this:(this._runners.splice(n,1),this._runnerIds.splice(n,1),t.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return D.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():this._paused?this:(this._nextFrame=D.frame(this._step),this)}_stepFn(t=!1){const n=this._timeSource();let i=n-this._lastSourceTime;t&&(i=0);const r=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=n,t||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const a=this._runners[o],l=a.runner;this._time-a.start<=0&&l.reset()}let s=!1;for(let o=0,a=this._runners.length;o<a;o++){const l=this._runners[o],u=l.runner;let h=r;const c=this._time-l.start;if(c<=0){s=!0;continue}else c<h&&(h=c);if(!u.active())continue;u.step(h).done?l.persist!==!0&&u.duration()-u.time()+this._time+l.persist<this._time&&(u.unschedule(),--o,--a):s=!0}return s&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}N({Element:{timeline:function(e){return e==null?(this._timeline=this._timeline||new Eo,this._timeline):(this._timeline=e,this)}}});class rt extends _e{constructor(t){super(),this.id=rt.id++,t=t??Se.duration,t=typeof t=="function"?new bn(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof t=="number"&&t,this._isDeclarative=t instanceof bn,this._stepper=this._isDeclarative?t:new Xi,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new S,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(t,n,i){let r=1,s=!1,o=0;return t=t??Se.duration,n=n??Se.delay,i=i||"last",typeof t=="object"&&!(t instanceof Gi)&&(n=t.delay??n,i=t.when??i,s=t.swing||s,r=t.times??r,o=t.wait??o,t=t.duration??Se.duration),{duration:t,delay:n,swing:s,times:r,wait:o,when:i}}active(t){return t==null?this.enabled:(this.enabled=t,this)}addTransform(t){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,n,i){const r=rt.sanitise(t,n,i),s=new rt(r.duration);return this._timeline&&s.timeline(this._timeline),this._element&&s.element(this._element),s.loop(r).schedule(r.delay,r.when)}clearTransform(){return this.transforms=new S,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Xi(t),this}element(t){return t==null?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,n,i){return typeof t=="object"&&(n=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=n||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(t){const n=this._duration+this._wait;if(t==null){const o=Math.floor(this._time/n),l=(this._time-o*n)/this._duration;return Math.min(o+l,this._times)}const i=Math.floor(t),r=t%1,s=n*i+this._duration*r;return this.time(s)}persist(t){return t==null?this._persist:(this._persist=t,this)}position(t){const n=this._time,i=this._duration,r=this._wait,s=this._times,o=this._swing,a=this._reverse;let l;if(t==null){const f=function(m){const y=o*Math.floor(m%(2*(r+i))/(r+i)),g=y&&!a||!y&&a,p=Math.pow(-1,g)*(m%(r+i))/i+g;return Math.max(Math.min(p,1),0)},d=s*(r+i)-r;return l=n<=0?Math.round(f(1e-5)):n<d?f(n):Math.round(f(d-1e-5)),l}const u=Math.floor(this.loops()),h=o&&u%2===0;return l=u+(h&&!a||a&&h?t:1-t),this.loops(l)}progress(t){return t==null?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,n,i,r){return this._queue.push({initialiser:t||fo,runner:n||fo,retarget:i,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(t){return this._reverse=t??!this._reverse,this}schedule(t,n,i){if(t instanceof Eo||(i=n,n=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,n,i),this}step(t){if(!this.enabled)return this;t=t??16,this._time+=t;const n=this.position(),i=this._lastPosition!==n&&this._time>=0;this._lastPosition=n;const r=this.duration(),s=this._lastTime<=0&&this._time>0,o=this._lastTime<r&&this._time>=r;this._lastTime=this._time,s&&this.fire("start",this);const a=this._isDeclarative;this.done=!a&&!o&&this._time>=r,this._reseted=!1;let l=!1;return(i||a)&&(this._initialise(i),this.transforms=new S,l=this._run(a?t:n),this.fire("step",this)),this.done=this.done||l&&a,o&&this.fire("finished",this),this}time(t){if(t==null)return this._time;const n=t-this._time;return this.step(n),this}timeline(t){return typeof t>"u"?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(!(!t&&!this._isDeclarative))for(let n=0,i=this._queue.length;n<i;++n){const r=this._queue[n],s=this._isDeclarative||!r.initialised&&t;t=!r.finished,s&&t&&(r.initialiser.call(this),r.initialised=!0)}}_rememberMorpher(t,n){if(this._history[t]={morpher:n,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(t){let n=!0;for(let i=0,r=this._queue.length;i<r;++i){const s=this._queue[i],o=s.runner.call(this,t);s.finished=s.finished||o===!0,n=n&&s.finished}return n}_tryRetarget(t,n,i){if(this._history[t]){if(!this._history[t].caller.initialised){const s=this._queue.indexOf(this._history[t].caller);return this._queue.splice(s,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,n,i):this._history[t].morpher.to(n),this._history[t].caller.finished=!1;const r=this.timeline();return r&&r.play(),!0}return!1}}rt.id=0;class xn{constructor(t=new S,n=-1,i=!0){this.transforms=t,this.id=n,this.done=i}clearTransformsFromQueue(){}}P([rt,xn],{mergeWith(e){return new xn(e.transforms.lmultiply(this.transforms),e.id)}});const Co=(e,t)=>e.lmultiplyO(t),To=e=>e.transforms;function Vc(){const t=this._transformationRunners.runners.map(To).reduce(Co,new S);this.transform(t),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class $c{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const n=t.id+1;return this.runners.push(t),this.ids.push(n),this}clearBefore(t){const n=this.ids.indexOf(t+1)||1;return this.ids.splice(0,n,0),this.runners.splice(0,n,new xn).forEach(i=>i.clearTransformsFromQueue()),this}edit(t,n){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,n),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let n=0;n<this.runners.length;++n){const i=this.runners[n];if(t&&i.done&&t.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(i.id);const s=i.mergeWith(t);this.edit(t.id,s),t=s,--n}else t=i}return this}remove(t){const n=this.ids.indexOf(t+1);return this.ids.splice(n,1),this.runners.splice(n,1),this}}N({Element:{animate(e,t,n){const i=rt.sanitise(e,t,n),r=this.timeline();return new rt(i.duration).loop(i).element(this).timeline(r.play()).schedule(i.delay,i.when)},delay(e,t){return this.animate(0,e,t)},_clearTransformRunnersBefore(e){this._transformationRunners.clearBefore(e.id)},_currentTransform(e){return this._transformationRunners.runners.filter(t=>t.id<=e.id).map(To).reduce(Co,new S)},_addRunner(e){this._transformationRunners.add(e),D.cancelImmediate(this._frameId),this._frameId=D.immediate(Vc.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new $c().add(new xn(new S(this))))}}});const Jc=(e,t)=>e.filter(n=>!t.includes(n));P(rt,{attr(e,t){return this.styleAttr("attr",e,t)},css(e,t){return this.styleAttr("css",e,t)},styleAttr(e,t,n){if(typeof t=="string")return this.styleAttr(e,{[t]:n});let i=t;if(this._tryRetarget(e,i))return this;let r=new jt(this._stepper).to(i),s=Object.keys(i);return this.queue(function(){r=r.from(this.element()[e](s))},function(o){return this.element()[e](r.at(o).valueOf()),r.done()},function(o){const a=Object.keys(o),l=Jc(a,s);if(l.length){const h=this.element()[e](l),c=new Pe(r.from()).valueOf();Object.assign(c,h),r.from(c)}const u=new Pe(r.to()).valueOf();Object.assign(u,o),r.to(u),s=a,i=o}),this._rememberMorpher(e,r),this},zoom(e,t){if(this._tryRetarget("zoom",e,t))return this;let n=new jt(this._stepper).to(new T(e));return this.queue(function(){n=n.from(this.element().zoom())},function(i){return this.element().zoom(n.at(i),t),n.done()},function(i,r){t=r,n.to(i)}),this._rememberMorpher("zoom",n),this},transform(e,t,n){if(t=e.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",e))return this;const i=S.isMatrixLike(e);n=e.affine!=null?e.affine:n??!i;const r=new jt(this._stepper).type(n?Le:S);let s,o,a,l,u;function h(){o=o||this.element(),s=s||Ti(e,o),u=new S(t?void 0:o),o._addRunner(this),t||o._clearTransformRunnersBefore(this)}function c(d){t||this.clearTransform();const{x:m,y}=new G(s).transform(o._currentTransform(this));let g=new S({...e,origin:[m,y]}),p=this._isDeclarative&&a?a:u;if(n){g=g.decompose(m,y),p=p.decompose(m,y);const x=g.rotate,A=p.rotate,M=[x-360,x,x+360],k=M.map(L=>Math.abs(L-A)),I=Math.min(...k),_=k.indexOf(I);g.rotate=M[_]}t&&(i||(g.rotate=e.rotate||0),this._isDeclarative&&l&&(p.rotate=l)),r.from(p),r.to(g);const b=r.at(d);return l=b.rotate,a=new S(b),this.addTransform(a),o._addRunner(this),r.done()}function f(d){(d.origin||"center").toString()!==(e.origin||"center").toString()&&(s=Ti(d,o)),e={...d,origin:s}}return this.queue(h,c,f,!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(e){return this._queueNumber("x",e)},y(e){return this._queueNumber("y",e)},ax(e){return this._queueNumber("ax",e)},ay(e){return this._queueNumber("ay",e)},dx(e=0){return this._queueNumberDelta("x",e)},dy(e=0){return this._queueNumberDelta("y",e)},dmove(e,t){return this.dx(e).dy(t)},_queueNumberDelta(e,t){if(t=new T(t),this._tryRetarget(e,t))return this;const n=new jt(this._stepper).to(t);let i=null;return this.queue(function(){i=this.element()[e](),n.from(i),n.to(i+t)},function(r){return this.element()[e](n.at(r)),n.done()},function(r){n.to(i+new T(r))}),this._rememberMorpher(e,n),this},_queueObject(e,t){if(this._tryRetarget(e,t))return this;const n=new jt(this._stepper).to(t);return this.queue(function(){n.from(this.element()[e]())},function(i){return this.element()[e](n.at(i)),n.done()}),this._rememberMorpher(e,n),this},_queueNumber(e,t){return this._queueObject(e,new T(t))},cx(e){return this._queueNumber("cx",e)},cy(e){return this._queueNumber("cy",e)},move(e,t){return this.x(e).y(t)},amove(e,t){return this.ax(e).ay(t)},center(e,t){return this.cx(e).cy(t)},size(e,t){let n;return(!e||!t)&&(n=this._element.bbox()),e||(e=n.width/n.height*t),t||(t=n.height/n.width*e),this.width(e).height(t)},width(e){return this._queueNumber("width",e)},height(e){return this._queueNumber("height",e)},plot(e,t,n,i){if(arguments.length===4)return this.plot([e,t,n,i]);if(this._tryRetarget("plot",e))return this;const r=new jt(this._stepper).type(this._element.MorphArray).to(e);return this.queue(function(){r.from(this._element.array())},function(s){return this._element.plot(r.at(s)),r.done()}),this._rememberMorpher("plot",r),this},leading(e){return this._queueNumber("leading",e)},viewbox(e,t,n,i){return this._queueObject("viewbox",new W(e,t,n,i))},update(e){return typeof e!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",e.offset),this)}}),P(rt,{rx:Hi,ry:Yi,from:Mo,to:Ao}),R(rt,"Runner");class Qi extends et{constructor(t,n=t){super(j("svg",t),n),this.namespace()}defs(){return this.isRoot()?st(this.node.querySelector("defs"))||this.put(new ji):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof z.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Li,version:"1.1"}).attr("xmlns:xlink",Ae,Pi):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Pi).attr("xmlns:svgjs",null,Pi)}root(){return this.isRoot()?this:super.root()}}N({Container:{nested:H(function(){return this.put(new Qi)})}}),R(Qi,"Svg",!0);let tr=class extends et{constructor(t,n=t){super(j("symbol",t),n)}};N({Container:{symbol:H(function(){return this.put(new tr)})}}),R(tr,"Symbol");function Wc(e){return this._build===!1&&this.clear(),this.node.appendChild(z.document.createTextNode(e)),this}function Zc(){return this.node.getComputedTextLength()}function Kc(e,t=this.bbox()){return e==null?t.x:this.attr("x",this.attr("x")+e-t.x)}function Qc(e,t=this.bbox()){return e==null?t.y:this.attr("y",this.attr("y")+e-t.y)}function tf(e,t,n=this.bbox()){return this.x(e,n).y(t,n)}function ef(e,t=this.bbox()){return e==null?t.cx:this.attr("x",this.attr("x")+e-t.cx)}function nf(e,t=this.bbox()){return e==null?t.cy:this.attr("y",this.attr("y")+e-t.cy)}function rf(e,t,n=this.bbox()){return this.cx(e,n).cy(t,n)}function sf(e){return this.attr("x",e)}function of(e){return this.attr("y",e)}function af(e,t){return this.ax(e).ay(t)}function lf(e){return this._build=!!e,this}const No=Object.freeze(Object.defineProperty({__proto__:null,amove:af,ax:sf,ay:of,build:lf,center:rf,cx:ef,cy:nf,length:Zc,move:tf,plain:Wc,x:Kc,y:Qc},Symbol.toStringTag,{value:"Module"}));class lt extends it{constructor(t,n=t){super(j("text",t),n),this.dom.leading=this.dom.leading??new T(1.3),this._rebuild=!0,this._build=!1}leading(t){return t==null?this.dom.leading:(this.dom.leading=new T(t),this.rebuild())}rebuild(t){if(typeof t=="boolean"&&(this._rebuild=t),this._rebuild){const n=this;let i=0;const r=this.dom.leading;this.each(function(s){if(Ni(this.node))return;const o=z.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=r*new T(o);this.dom.newLined&&(this.attr("x",n.attr("x")),this.text()===`
`?i+=a:(this.attr("dy",s?a+i:0),i=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new T(t.leading||1.3),this}writeDataToDom(){return to(this,this.dom,{leading:1.3}),this}text(t){if(t===void 0){const n=this.node.childNodes;let i=0;t="";for(let r=0,s=n.length;r<s;++r){if(n[r].nodeName==="textPath"||Ni(n[r])){r===0&&(i=r+1);continue}r!==i&&n[r].nodeType!==3&&st(n[r]).dom.newLined===!0&&(t+=`
`),t+=n[r].textContent}return t}if(this.clear().build(!0),typeof t=="function")t.call(this,this);else{t=(t+"").split(`
`);for(let n=0,i=t.length;n<i;n++)this.newLine(t[n])}return this.build(!1).rebuild()}}P(lt,No),N({Container:{text:H(function(e=""){return this.put(new lt).text(e)}),plain:H(function(e=""){return this.put(new lt).plain(e)})}}),R(lt,"Text");class wn extends it{constructor(t,n=t){super(j("tspan",t),n),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof lt))return this;const n=t.index(this),i=z.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=t.dom.leading*new T(i);return this.dy(n?r:0).attr("x",t.x())}text(t){return t==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof t=="function"?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}P(wn,No),N({Tspan:{tspan:H(function(e=""){const t=new wn;return this._build||this.clear(),this.put(t).text(e)})},Text:{newLine:function(e=""){return this.tspan(e).newLine()}}}),R(wn,"Tspan");class er extends it{constructor(t,n=t){super(j("circle",t),n)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new T(t).divide(2))}}P(er,{x:mo,y:go,cx:bo,cy:yo,width:xo,height:wo}),N({Container:{circle:H(function(e=0){return this.put(new er).size(e).move(0,0)})}}),R(er,"Circle");class nr extends et{constructor(t,n=t){super(j("clipPath",t),n)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return ne("svg [clip-path*="+this.id()+"]")}}N({Container:{clip:H(function(){return this.defs().put(new nr)})},Element:{clipper(){return this.reference("clip-path")},clipWith(e){const t=e instanceof nr?e:this.parent().clip().add(e);return this.attr("clip-path","url(#"+t.id()+")")},unclip(){return this.attr("clip-path",null)}}}),R(nr,"ClipPath");class Lo extends ft{constructor(t,n=t){super(j("foreignObject",t),n)}}N({Container:{foreignObject:H(function(e,t){return this.put(new Lo).size(e,t)})}}),R(Lo,"ForeignObject");function uf(e,t){return this.children().forEach(n=>{let i;try{i=n.node instanceof fh().SVGSVGElement?new W(n.attr(["x","y","width","height"])):n.bbox()}catch{return}const r=new S(n),s=r.translate(e,t).transform(r.inverse()),o=new G(i.x,i.y).transform(s);n.move(o.x,o.y)}),this}function hf(e){return this.dmove(e,0)}function cf(e){return this.dmove(0,e)}function ff(e,t=this.bbox()){return e==null?t.height:this.size(t.width,e,t)}function df(e=0,t=0,n=this.bbox()){const i=e-n.x,r=t-n.y;return this.dmove(i,r)}function pf(e,t,n=this.bbox()){const i=Qt(this,e,t,n),r=i.width/n.width,s=i.height/n.height;return this.children().forEach(o=>{const a=new G(n).transform(new S(o).inverse());o.scale(r,s,a.x,a.y)}),this}function mf(e,t=this.bbox()){return e==null?t.width:this.size(e,t.height,t)}function gf(e,t=this.bbox()){return e==null?t.x:this.move(e,t.y,t)}function bf(e,t=this.bbox()){return e==null?t.y:this.move(t.x,e,t)}const Po=Object.freeze(Object.defineProperty({__proto__:null,dmove:uf,dx:hf,dy:cf,height:ff,move:df,size:pf,width:mf,x:gf,y:bf},Symbol.toStringTag,{value:"Module"}));class ir extends et{constructor(t,n=t){super(j("g",t),n)}}P(ir,Po),N({Container:{group:H(function(){return this.put(new ir)})}}),R(ir,"G");class vn extends et{constructor(t,n=t){super(j("a",t),n)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,Ae)}}P(vn,Po),N({Container:{link:H(function(e){return this.put(new vn).to(e)})},Element:{unlink(){const e=this.linker();if(!e)return this;const t=e.parent();if(!t)return this.remove();const n=t.index(e);return t.add(this,n),e.remove(),this},linkTo(e){let t=this.linker();return t||(t=new vn,this.wrap(t)),typeof e=="function"?e.call(t,t):t.to(e),this},linker(){const e=this.parent();return e&&e.node.nodeName.toLowerCase()==="a"?e:null}}}),R(vn,"A");class rr extends et{constructor(t,n=t){super(j("mask",t),n)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return ne("svg [mask*="+this.id()+"]")}}N({Container:{mask:H(function(){return this.defs().put(new rr)})},Element:{masker(){return this.reference("mask")},maskWith(e){const t=e instanceof rr?e:this.parent().mask().add(e);return this.attr("mask","url(#"+t.id()+")")},unmask(){return this.attr("mask",null)}}}),R(rr,"Mask");class zo extends ft{constructor(t,n=t){super(j("stop",t),n)}update(t){return(typeof t=="number"||t instanceof T)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",new T(t.offset)),this}}N({Gradient:{stop:function(e,t,n){return this.put(new zo).update(e,t,n)}}}),R(zo,"Stop");function yf(e,t){if(!e)return"";if(!t)return e;let n=e+"{";for(const i in t)n+=uh(i)+":"+t[i]+";";return n+="}",n}class sr extends ft{constructor(t,n=t){super(j("style",t),n)}addText(t=""){return this.node.textContent+=t,this}font(t,n,i={}){return this.rule("@font-face",{fontFamily:t,src:n,...i})}rule(t,n){return this.addText(yf(t,n))}}N("Dom",{style(e,t){return this.put(new sr).rule(e,t)},fontface(e,t,n){return this.put(new sr).font(e,t,n)}}),R(sr,"Style");class or extends lt{constructor(t,n=t){super(j("textPath",t),n)}array(){const t=this.track();return t?t.array():null}plot(t){const n=this.track();let i=null;return n&&(i=n.plot(t)),t==null?i:this}track(){return this.reference("href")}}N({Container:{textPath:H(function(e,t){return e instanceof lt||(e=this.text(e)),e.path(t)})},Text:{path:H(function(e,t=!0){const n=new or;e instanceof oe||(e=this.defs().path(e)),n.attr("href","#"+e,Ae);let i;if(t)for(;i=this.node.firstChild;)n.node.appendChild(i);return this.put(n)}),textPath(){return this.findOne("textPath")}},Path:{text:H(function(e){return e instanceof lt||(e=new lt().addTo(this.parent()).text(e)),e.path(this)}),targets(){return ne("svg textPath").filter(e=>(e.attr("href")||"").includes(this.id()))}}}),or.prototype.MorphArray=qt,R(or,"TextPath");class Ro extends it{constructor(t,n=t){super(j("use",t),n)}use(t,n){return this.attr("href",(n||"")+"#"+t,Ae)}}N({Container:{use:H(function(e,t){return this.put(new Ro).use(e,t)})}}),R(Ro,"Use");const ar=K;P([Qi,tr,mn,Te,gn],tt("viewbox")),P([Ne,Re,ze,oe],tt("marker")),P(lt,tt("Text")),P(oe,tt("Path")),P(ji,tt("Defs")),P([lt,wn],tt("Tspan")),P([yn,pn,Ce,rt],tt("radius")),P(_e,tt("EventTarget")),P(_t,tt("Dom")),P(ft,tt("Element")),P(it,tt("Shape")),P([et,vo],tt("Container")),P(Ce,tt("Gradient")),P(rt,tt("Runner")),Dt.extend(ah()),Fc([T,F,W,S,re,St,qt,G]),qc();const ae=(e,t,n)=>(1-n)*e+n*t,lr=(e,t,n)=>Math.max(e,Math.min(t,n));function Io(e){return function(){return e=(1664525*e+1013904223)%4294967296,e/4294967296}}function xf(e,t){e=e.slice();for(let n=e.length-1;n>0;n--){const i=Math.floor(t()*(n+1)),r=e[n];e[n]=e[i],e[i]=r}return e}function wf(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ot(e){const t=[];function n(i){t.push(i);for(const r of i.children)n(r)}return n(e),t}function*Et(e){yield e;for(const t of e.children)yield*Et(t)}function vf(e,t,n,i){const r=new Map;for(const s of e){const o=i(s);r.set(t(s),o)}for(const s of e){const o=r.get(n(s)),a=r.get(t(s));o&&(a.parent=o,o.children.push(a))}for(const s of r.values())if(s.parent==null)return s}function Oo(e,t,n,i,r,s){const o=e.group().addClass("sample-taken-label"),a=1,l=3,u=i>t?1:-1,h=Fn(1);return h.moveTo(t,n),h.lineTo(i-l*u,n),h.arcTo(i,n,i,r,l),h.lineTo(i,r),o.path(h.toString()).addClass("arrow").stroke({color:"#606060",width:a,linecap:"round"}).fill("none").attr("marker-end","url(#small-arrowhead)"),o.plain(s).font({family:"sans-serif",size:10,anchor:u==1?"end":"start"}).attr({"alignment-baseline":"middle"}).translate(t-3*u,n),o}function Mf(e,t,n,i,r,s,o=1,a=1,l=1,u="none"){const h=e.group().addClass("bell"),c=qo(t,n,0);function f(d){const m=n.get(d.subclone),y=m(0,0),g=m(1,0),p=m(0,1),b=m(1,1);if(Math.abs(g-b)<.001)return;let x;const A=M=>Math.round(M*10)/10;if(y==g&&p==b){const M=c.get(d.subclone);M[1]-M[0]>.001&&(x=h.rect(A(o),A((p-y)*a)).move(0,A(y*a)))}else{let k=0;for(let _=0;_<=50;_++){const L=_/50;if(m(L,0)-m(L,1)!=0){k=Math.max(0,_-1);break}}const I=Fn(1);I.moveTo(k/50*o,m(k/50,1)*a);for(let _=k+1;_<=50;_++){const L=_/50;I.lineTo(L*o,m(L,1)*a)}for(let _=50;_>=k;_--){const L=_/50;I.lineTo(L*o,m(L,0)*a)}I.lineTo(k/50*o,m(k/50,1)*a),x=h.path(I.toString())}if(x){const M=r.get(d.subclone);x.fill(M).stroke({color:Tt(M).darker(.6).toString(),width:s.bellStrokeWidth??1}).addClass("subclone").data("subclone",d.subclone),m.emerging&&x.data("descendant-subclones",ot(d).map(k=>k.subclone)),x.add(ar(`<title>${Af(d.subclone,m.subcloneMetrics)}</title>`))}for(const M of d.children)f(M)}f(t);for(const d of i){const m=r.get(d),y=n.get(d)(1,0)*a;h.line(0,y,o,y).stroke({color:m,width:l,dasharray:"6,4"}).addClass("pass-through").attr({"pointer-events":"none"}).data("subclone",d)}if(u!="none"){const d=s.bellStrokeWidth??1,m=Math.round(o*s.bellPlateauPos);if(h.line(m,d,m,a-d).stroke({color:"black",width:d,dasharray:[1,4].map(y=>y*d).join(","),linecap:"round",opacity:u=="all"?.5:.2}).addClass("sample-taken-line"),u=="all"){const y=m+(o-m)/2;Oo(h,y-14,12,y,5,"Sample taken").translate(0,a)}}return h}const Do=Ue(".3f");function Af(e,t){let n=`Subclone: ${e}`;return t&&(n+=`
Clonal prevalence: ${Do(t.clonalPrevalence)}`,n+=`
Cancer cell fraction: ${Do(t.cancerCellFraction)}`),n}function kf(e,t,n,i){function r(a){return(a.children??[]).filter(l=>t.get(l.subclone).cancerCellFraction>.001).map(l=>r(l)).reduce((l,u)=>Math.max(l,u),0)+1}const s=new Map;function o(a,l=(c,f)=>f,u=0,h=c=>c){var I;const c=a.parent,f=a.subclone,d=t.get(f),m=n.has(f),y=r(a),g=m?0:(1-u)/(y+1);c&&(u+=g);const p=(I=a.parent)==null?void 0:I.subclone;if(!m&&p&&n.has(p)){const _=g/2,L=1/i.bellPlateauPos;h=q=>q*(L-_)+_}const b=_=>{const L=lr(0,.9999,i.bellTipShape);return Ef(u,1,h(_),L)},x=(_,L)=>l(_,ae(b(_),1,m?1:0)*d.fractionOfParent*(L-.5)+.5);x.subcloneMetrics=d,x.emerging=!m,s.set(a.subclone,x);const A=Fo(a,t,!0),M=Fo(a,t,!1),k=_=>m?()=>M[_]:L=>{const q=u+g;let E=q>=1?1:_f(q,1,h(L));const B=1-i.bellTipSpread;return E=E*(1-B)+B,ae(A[_],M[_],E)};for(let _=0;_<a.children.length;_++){const L=a.children[_],q=k(_);o(L,(E,B)=>x(E,B+q(E)),u,h)}}return o(e),s}function Fo(e,t,n=!1){const i=e.children.map(l=>t.get(l.subclone).fractionOfParent),r=[],s=1-i.reduce((l,u)=>l+u,0),o=n?s/(i.length+1):0;let a=n?o:s;for(const l of i)r.push(a+(l-1)/2),a+=l+o;return r}function qo(e,t,n=1){const i=new Map;function r(o){const a=t.get(o.subclone),l=a(n,0);let h=a(n,1);for(const c of o.children){const f=r(c);t.get(c.subclone).subcloneMetrics.cancerCellFraction>0&&(h=Math.min(h,f))}return i.set(o.subclone,[l,h]),l}r(e);const s=Array.from(i.values()).filter(o=>o[1]-o[0]>0).sort((o,a)=>o[0]-a[0]);for(let o=0;o<s.length-1;o++)s[o][1]=Math.max(s[o][1],s[o+1][0]);return s.length>0&&(s[s.length-1][1]=Array.from(t.values()).map(o=>o(n,1)).filter(o=>!isNaN(o)).reduce((o,a)=>Math.max(o,a),0)),i}function _f(e,t,n){return n=lr(0,1,(n-e)/(t-e)),n*n*(3-2*n)}function Sf(e,t,n){return n=lr(0,1,(n-e)/(t-e)),n*n*n*(3*n*(2*n-5)+10)}function Ef(e,t,n,i=.1){const r=t-e,s=a=>Sf(e-r*(1/(1-i)-1),t,a),o=s(e);return Math.max(0,s(n)-o)/(1-o)}const Y={REAL_SAMPLE:"real",INFERRED_SAMPLE:"inferred",GAP:"gap"};function Cf(e,t){const n={sample:{sample:"root",displayName:"Inferred root",rank:0,parent:null,indexNumber:null},type:Y.INFERRED_SAMPLE,parent:null,children:[],rank:0},i=e.map((r,s)=>({sample:{...r,indexNumber:s},type:t(r)?Y.REAL_SAMPLE:Y.INFERRED_SAMPLE,parent:null,children:[],rank:r.rank}));return Tf(i),[n,...i]}function Tf(e){if(e.some(t=>t.rank==null)&&e.some(t=>t.rank!=null))throw new Error("Rank must be either defined for all samples or none.");if(e.some(t=>t.rank===0))throw new Error("Rank 0 is reserved for the inferred root.")}function Nf(e){const t=e.find(i=>i.rank==0),n=new Map(e.map(i=>[i.sample.sample,i]));for(const i of e){const r=n.get(i.sample.parent);if(i.sample.parent&&!r)throw new Error(`Parent "${i.sample.parent}" not found!`);if(r){if(r.rank>=i.rank)throw new Error(`Parent "${r.sample.sample}" has rank ${r.rank} >= ${i.sample.sample}'s rank ${i.rank}`);i.parent=r,r.children.push(i)}!i.parent&&i!=t&&(i.parent=t,t.children.push(i))}return Lf(t),t}function Lf(e){for(const t of Et(e))if(t.rank==null){if(!t.parent)throw new Error("Rank must be defined for the root node.");t.rank=t.parent.rank+1}}const jo=e=>Array.from(new Set(e.map(t=>t.rank)).values()).sort((t,n)=>t-n);function Pf(e){e=structuredClone(e);const t=ot(e),n=jo(t);for(const i of t){const r=i.parent;if(!r)continue;const s=n.slice(n.indexOf(r.rank)+1,n.indexOf(i.rank));let o=r;for(const a of s){const l={sample:null,type:Y.GAP,parent:o,children:[i],rank:a};i.parent=l,o.children[o.children.findIndex(u=>u==i)]=l,o=l}}return e}function zf(e){return new Map(e.map((t,n)=>[t,n]))}function Rf(e,t){e=structuredClone(e);for(const n of Et(e))n.rank=t.get(n.rank);return e}function If(e,t){const n=Cf(e,t),i=Nf(n),r=zf(jo(ot(i)));return{sampleTree:Pf(Rf(i,r)),rankPackMap:r}}const Of={bellTipShape:.1,bellTipSpread:.5,bellStrokeWidth:1,bellPlateauPos:.75,sampleHeight:110,sampleWidth:90,inferredSampleHeight:120,gapHeight:60,sampleSpacing:60,columnSpacing:90,tentacleWidth:2,tentacleSpacing:5,inOutCPDistance:.3,bundleCPDistance:.6,sampleFontSize:12,showLegend:!0,phylogenyColorScheme:!0,phylogenyHueOffset:0,sampleTakenGuide:"text"},ur={crossing:10,pathLength:2,orderMismatch:2,bundleMismatch:3,divergence:4};function Ho(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const s of e)t=Math.min(t,s.x),n=Math.min(n,s.y),i=Math.max(i,s.x+s.width),r=Math.max(r,s.y+s.height);return{x:t,y:n,width:i-t,height:r-n}}function Df(e,t){const n=Math.max(e.x,t.x),i=Math.max(e.y,t.y),r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-n),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-i);return r>0&&s>0?{x:n,y:i,width:r,height:s}:null}function Ff(e,t){for(const n of t)if(Df(e,n)!==null)return!0;return!1}function qf(e){const t=ot(e),n=t.map(r=>r.rank).reduce((r,s)=>Math.max(r,s),0),i=[];for(let r=0;r<=n;r++)i[r]=[];for(const r of t)i[r.rank].push(r);return i}function jf(e,t){const n=e.length,i=[];for(let s=0;s<n;s++)i.push({left:(t.sampleWidth+t.columnSpacing)*s,width:t.sampleWidth});const r=new Map;for(let s=0;s<n;s++){const o=e[s],a=i[s];for(let l=0;l<o.length;l++){const u=o[l];r.set(u.node,{x:a.left,y:u.top,width:a.width,height:u.height})}}return r}function Hf(e,t,n,i,r){const s=[];for(let g=1;g<e.length;g++){const p=[];s.push(p);const b=e[g],x=e[g-1];for(const A of b){const M=A.node,k=x.find(I=>I.node==M.parent);k&&p.push([k.top+k.height/2,A.top+A.height/2])}}function o(g){let p=0;for(const b of g)for(const x of g)b!=x&&b[0]<x[0]&&b[1]>x[1]&&(p+=1);return p}function a(g){let p=0;for(const b of g){const x=b[1]-b[0],A=Math.sqrt(t.columnSpacing**2+x**2);p+=A}return p}function l(g){var x;let p=0,b=-1;for(const A of g){const M=A.node.type==Y.REAL_SAMPLE?(x=A.node.sample)==null?void 0:x.indexNumber:-1;M>=0&&(b>=0&&(p+=i[b][M]),b=M)}return p}function u(g){for(;g.type==Y.GAP;)g=g.children[0];return g}function h(g,p){let b=0,x=-1;for(const{node:A}of g){const M=p?u(A):A,k=M.sample?n[M.sample.indexNumber]:-1;k>=0&&(x>=0&&p==(A.type==Y.GAP)&&(b+=Math.max(0,x-k)),(p||!p&&A.type!=Y.GAP)&&(x=k))}return b}const c=r.crossing>0?s.reduce((g,p)=>g+o(p),0):0,f=r.pathLength>0?s.reduce((g,p)=>g+a(p),0)/(t.sampleHeight+t.sampleSpacing):0,d=r.orderMismatch>0?e.reduce((g,p)=>g+h(p,!1),0):0,m=r.divergence>0?e.reduce((g,p)=>g+l(p),0):0,y=r.bundleMismatch>0?e.reduce((g,p)=>g+h(p,!0),0):0;return c*r.crossing+f*r.pathLength+d*r.orderMismatch+m*r.divergence+y*r.bundleMismatch}const Yf={[Y.REAL_SAMPLE]:"sampleHeight",[Y.INFERRED_SAMPLE]:"inferredSampleHeight",[Y.GAP]:"gapHeight"};function Bf(e,t){let n=0;const i=[];let r;for(const o of e){const a=o.type;r&&(a!=Y.GAP&&r!=Y.GAP?n+=t.sampleSpacing:a==Y.GAP&&r==Y.GAP&&(n-=t.gapHeight/2.5));const l=t[Yf[a]];i.push({node:o,top:n,height:l}),n+=l,r=a}const s=n/2;for(const o of i)o.top-=s;return i}function Gf(e,t,n,i,r=ur,s=Io(0),o=1e4){let a,l=1/0;for(let u=0;u<o;u++){const c=e.map(d=>xf(d,s)).map(d=>Bf(d,t)),f=Hf(c,t,n,i,r);f<l&&(a=c,l=f)}return{stackedColumns:a,cost:l}}function Xf(e,t,n){const i=Array.from(e.values()),r=30,s=10,o=t+s*2,a=n+r*2,l=Ho(i),u={x:l.x+l.width-o,y:l.y+l.height-a},h={x:l.x+l.width-o,y:l.y},c={x:l.x,y:l.y+l.height-a},f={x:l.x,y:l.y};for(const d of[u,h,c,f]){const m={...d,width:o,height:a};if(!Ff(m,i))return{x:d.x+s,y:d.y+r,width:t,height:n}}return{x:l.x+l.width+40,y:l.y+Math.round((l.height-n)/2),width:t,height:n}}const hr={rectWidth:12,rectHeight:12,rectSpacing:5,fontSize:12};function Uf(e,t=hr){return e*(t.rectHeight+t.rectSpacing)-t.rectSpacing}function Vf(e,t,n,i=hr){const r=e.group().addClass("legend"),s=Array.from(t.entries()),o=a=>a*(i.rectHeight+i.rectSpacing);for(let a=0;a<s.length;a++){const[l,u]=s[a],h=o(a),c=r.rect(i.rectWidth,i.rectHeight).fill(u).stroke(Tt(u).darker(.6)).move(0,h).addClass("legend-rect").data("subclone",l);if(r.plain(l).font({family:"sans-serif",size:i.fontSize}).attr({"alignment-baseline":"middle"}).move(i.rectWidth+i.rectSpacing,h),n){const f=n.get(l);f&&c.add(ar(`<title>Branch length: ${f}</title>`))}}return n&&(Oo(r,15,-17,i.rectWidth/2,-i.rectSpacing,"Subclone"),$f(r,s.map(([a])=>a),n,o,i)),r}function $f(e,t,n,i,r=hr){const h={width:1,color:"#a0a0a0",linecap:"round"},c=3,f=Array.from(n.values()),[d,m]=n?[Ma,va].map(x=>x(f)):[0,0],y=Xr([d<m?d:m/10,m/(1+.2)],[0,40]).nice(),g=e.group().translate(r.rectWidth+r.rectSpacing+20,0);for(let x=0;x<t.length;x++){const A=t[x],M=n==null?void 0:n.get(A);if(M){const k=i(x),I=Math.max(1,y(M)),_=0,L=_+I,q=k+r.rectHeight/2;g.line(_,q,L,q).stroke({width:c,color:"#b0b0b0",linecap:"round"})}}const p=g.group().addClass("legend-ticks").translate(0,i(t.length)),b=y.tickFormat(2);for(const x of y.ticks(2)){const A=y(x);p.line(A,0,A,4).stroke(h),b(x)!=""&&p.plain(x.toString()).font({family:"sans-serif",size:r.fontSize*.8,anchor:"end"}).attr({"alignment-baseline":"middle",transform:`translate(${A}, ${4*2}) rotate(-45)`})}return p.line(0,0,40,0).stroke(h),g.plain("Variants").font({family:"sans-serif",size:10}).translate(-3,1).addClass("legend-title"),g}function Jf(e){const t=vf(e,n=>n.subclone,n=>n.parent,n=>({subclone:n.subclone,branchLength:n.branchLength,parent:null,children:[]}));for(const n of Et(t))n.totalBranchLength=n.branchLength??0,n.parent&&(n.totalBranchLength+=n.parent.totalBranchLength);return t}function Wf(e,t){const n=structuredClone(e),i=(o,a)=>t.get(a.subclone)-t.get(o.subclone),r=(o,a)=>o.totalBranchLength-a.totalBranchLength,s=(o,a)=>{const l=i(o,a);return l!=0?l:r(o,a)};for(const o of Et(n))o.children=o.children.sort(s);return n}function Zf(e,t=0){const n=ot(e),i=n.reduce((m,y)=>Math.max(m,y.totalBranchLength),0),r=n.reduce((m,y)=>Math.min(m,y.branchLength),1/0),s=[e.totalBranchLength,i+r],o=Hn().domain(s).range([.9,.68]),a=Hn().domain(s).range([.025,.21]);let l=n.length-1;l+=Math.max(1,l*.15);function u(m){const y=new Map;let g=0;function p(b){const x=(g/l*360+m)%360,A=g==0?0:a(b.totalBranchLength),k={mode:"oklch",l:o(b.totalBranchLength),c:A,h:x},I=sh(oh(k)),_=Xs(I);y.set(b.subclone,_),g++;const L=Array.from(b.children).sort((q,E)=>q.branchLength-E.branchLength);for(const q of L)p(q)}return p(e),y}const h=Io(i);let c=0,f=0;const d=Kl("oklch");for(let m=0;m<20;m++){const y=h()*360,g=Array.from(u(y).values()).map(p=>Kf.map(b=>d(p,b))).flat().reduce((p,b)=>Math.min(p,b),1/0);if(g>c&&(c=g,f=y),c>.08)break}return u(f+t)}const Kf=["#b99f00","#c09900","#c3a500","#c39100","#b8ad00","#cab547","#9a8200"].map(e=>Ws(e));function Qf(e){const t=Array.from(new Set(e.map(n=>n.subclone)));return gr(e,n=>new Map(t.map(i=>{var r;return[i,((r=n.find(s=>s.subclone===i))==null?void 0:r.clonalPrevalence)??0]})),n=>n.sample)}function Yo(e,t){const n=new Map;function i(s){const o=s.subclone,a=t.get(o)??0;let l=a;for(const u of s.children)l+=i(u);return n.set(o,{clonalPrevalence:a,cancerCellFraction:l,fractionOfParent:1}),l}function r(s,o=1){const a=s.subclone,l=n.get(a);l.fractionOfParent=o>0?l.cancerCellFraction/o:0;for(const u of s.children)r(u,l.cancerCellFraction)}return i(e),r(e),n}function td(e,t){const n=new Map,i=ot(e),r=new Map(i.map((s,o)=>[s.subclone,o/i.length]));for(const[s,o]of t){let a=0,l=0;for(const[u,h]of o)a+=h.clonalPrevalence*r.get(u),l+=h.clonalPrevalence;n.set(s,a/l)}return n}function Bo(e,t){let n=0;for(let i=0;i<e.length;i++)e[i]!==0&&t[i]!==0&&(n+=e[i]*Math.log(e[i]/t[i]));return n}function ed(e,t){const n=e.map((i,r)=>(i+t[r])/2);return .5*Bo(e,n)+.5*Bo(t,n)}function nd(e,t){const n=e.length,i=Array.from({length:n},()=>Array(n).fill(0));for(let r=0;r<n;r++)for(let s=r+1;s<n;s++){const o=t(e[r],e[s]);i[r][s]=o,i[s][r]=o}return i}function id(e,t,n=ur){const{samples:i,phylogeny:r,compositions:s}=e,o=Qf(s),{sampleTree:a}=If(i,k=>o.has(k.sample)),l=ot(a),u=Jf(r),h=new Map(l.filter(k=>k.type==Y.REAL_SAMPLE).map(k=>k.sample.sample).map(k=>[k,Yo(u,o.get(k))])),c=ad(a,u,h),f=Wf(u,hd(c));for(const k of Et(a))k.type==Y.INFERRED_SAMPLE&&h.set(k.sample.sample,ld(k.sample.sample,f,c));const d=qf(a),m=td(f,h),y=new Array(i.length).fill(-1);for(const k of l)k.sample&&(y[k.sample.indexNumber]=m.get(k.sample.sample));const g=cd(l,h),{stackedColumns:p}=Gf(d,t,y,g,n),b=jf(p,t),x=ud(a,f,h,t),A=sd(a,x,c),M=t.phylogenyColorScheme?Zf(f,t.phylogenyHueOffset??0):new Map(r.map(k=>[k.subclone,k.color]));return gd(b,f,x,A,M,t,t.sampleTakenGuide=="text"?rd(c,p,b):null)}function rd(e,t,n){var r;const i=new Set;for(const s of t)for(let o=0;o<s.length-1;o++){const a=s[o].node;a.type==Y.REAL_SAMPLE&&s[o+1].node.type==Y.GAP&&i.add(a)}return(r=Array.from(e.values()).filter(s=>s.type==Y.REAL_SAMPLE).map(s=>({node:s,score:n.get(s).y+(i.has(s)?1e3:0)})).sort((s,o)=>s.score-o.score).at(0))==null?void 0:r.node}function sd(e,t,n){var o;const i=new Map,r=new Map;for(const[a,{inputRegions:l,outputRegions:u}]of t)i.set(a,new Set(cr(l))),r.set(a,new Set(cr(u)));const s=new Map;for(const a of Et(e)){const l=(o=a.sample)==null?void 0:o.sample;l&&s.set(l,new Set)}for(const a of Et(e))if(!(!a.sample||!a.parent))for(const l of i.get(a.sample.sample)){const u=n.get(l);let h=a.parent;for(;h&&h!=u;){if(h.type==Y.GAP){h=h.parent;continue}if(r.get(h.sample.sample).has(l)||i.get(h.sample.sample).has(l))break;s.get(h.sample.sample).add(l),h=h.parent}}return s}function od(e,t,n){let i=e.parent;for(;i;){if(i.sample&&n.get(i.sample.sample).get(t).cancerCellFraction>0)return!0;i=i.parent}return!1}function ad(e,t,n){function i(r){let s;function o(a){var c,f;let l=0;const u=(c=a.sample)==null?void 0:c.sample,h=(u&&((f=n.get(u))==null?void 0:f.get(r).cancerCellFraction))??0;if(h>0)return s=a,1;for(const d of a.children)l+=o(d);return l>1&&(s=a,a.type==Y.REAL_SAMPLE&&h==0)?2:l>0?1:0}return o(e),s}return new Map(ot(t).map(r=>r.subclone).map(r=>[r,i(r)]))}function ld(e,t,n){const i=ma(ot(t),o=>o.subclone),r=new Set(Array.from(n.entries()).filter(([,o])=>o.sample.sample==e).map(([o])=>o));for(const o of r){let a=i.get(o);for(;a;)r.add(a.subclone),a=a.parent}const s=1/r.size;return Yo(t,new Map(Array.from(r.values()).map(o=>[o,s])))}function ud(e,t,n,i){const r=ot(t).map(o=>o.subclone),s=o=>{const a=new Set(r.filter(d=>od(o,d,n))),l=n.get(o.sample.sample),u=kf(t,l,a,i),h=d=>qo(t,u,d),c=h(0),f=h(1);return{shapers:u,inputRegions:c,outputRegions:f}};return new Map(ot(e).filter(o=>o.sample).map(o=>[o.sample.sample,s(o)]))}function hd(e){return new Map(Array.from(e.entries()).map(([t,n])=>[t,n.rank]))}function cd(e,t){const n=e.filter(i=>{var r;return((r=i.sample)==null?void 0:r.indexNumber)!=null}).sort((i,r)=>i.sample.indexNumber-r.sample.indexNumber).map(i=>Array.from(t.get(i.sample.sample).values()).map(r=>r.clonalPrevalence));return nd(n,ed)}function cr(e,t=new Set){return Array.from(e.entries()).filter(([n,i])=>i[1]-i[0]>0||t.has(n)).sort((n,i)=>n[1][0]-i[1][0]+n[1][1]-i[1][1]).map(([n])=>n)}function fd(e,t,n){const i=[];for(const r of e){if(!r.sample||!r.parent)continue;const{inputRegions:s}=t.get(r.sample.sample),o=cr(s,n.get(r.sample.sample)),a=[];let l=r.parent;for(;l&&!l.sample;)a.push(l),l=l.parent;i.push({outputNode:l,inputNode:r,gaps:a,subclones:o})}return i}function dd(e,t){const n=[];for(const i of e){const r=i.gaps.length>0?i.gaps.at(-1):i.inputNode;for(const s of i.subclones)n.push({outputNode:i.outputNode,nextNode:r,subclone:s})}return gr(n,i=>i.map(r=>r.nextNode).sort((r,s)=>t.get(r).y-t.get(s).y),i=>i.outputNode,i=>i.subclone)}const Go=e=>Math.abs(Math.sqrt(e[0]**2+e[1]**2)/e[0]),Xo=(e,t,n,i=[1,0])=>(e-t/2+.5)*n*Go(i);function pd(e,t,n,i,r,s){var h;const{tentacleSpacing:o}=s,a=bd(r),l=dd(n,t),u=e.group().addClass("tentacle-group").attr({"pointer-events":"none"});for(const c of n){const f=Aa,{subclones:d}=c,m=c.inputNode.sample,{inputRegions:y}=i.get(m.sample),g=d.length,p=u.group().addClass("tentacle-bundle").data("sample",m.sample);for(let b=0;b<g;b++){let x=c.inputNode;const A=d[b];let M=x.parent,k=f(y.get(A))*t.get(x).height;const I=Fn(1);for(;M;){const _=t.get(M),L=t.get(x),q=M.sample?f(i.get(M.sample.sample).outputRegions.get(A))*_.height:_.height/2+Xo(b,g,o);let E=0;const B=(h=l.get(M))==null?void 0:h.get(A);if(B!=null&&B.length){const Jo=B.indexOf(x);if(Jo<0)throw new Error("Tentacle reservation not found");const Wo=i.get(M.sample.sample).outputRegions.get(A);E=(Wo[1]-Wo[0])*_.height*((Jo+1)/(B.length+1)-.5)}const U=_.x+_.width,nt=_.y+q+E,dt=L.x,ut=L.y+k,pt=L.y+L.height/2,mt=s.inOutCPDistance,Z=ae(U,dt,1-mt),Mn=ae(U,dt,mt),Ct=(U+dt)/2,wt=(_.y+L.y+(_.height+L.height)/2)/2,Ie=2,le=s.bundleCPDistance/((Go([Z-Mn,ut-nt])+Ie)/(1+Ie)),Oe=ae(dt,Ct,1-le*.5)-Ct,ue=ae(pt,wt,1-le)-wt,Ht=Xo(b,g,o,[Oe,ue]);x.sample&&I.moveTo(dt,ut),I.bezierCurveTo(Z,ut,Ct+Oe,wt+ue+Ht,Ct,wt+Ht),I.bezierCurveTo(Ct-Oe,wt-ue+Ht,Mn,nt,U-(M.type==Y.GAP?_.width/2:0),nt),k=q,x=M,M=M.sample?null:M.parent}p.path(I.toString()).stroke({color:a.get(A)??"black",width:s.tentacleWidth}).attr({"stroke-linecap":"square"}).fill("transparent").addClass("tentacle").data("subclone",A)}}return u}function md(e,t,n,i,r,s,o,a=null){const l=e.group().addClass("sample-group");for(const[u,h]of t.entries()){const c=u.sample;if(!c)continue;const f=l.group().translate(h.x,h.y).addClass("sample").data("sample",c.sample),d=c.sample,{shapers:m}=i.get(d);Mf(f,n,m,r.get(d),s,o,h.width,h.height,o.tentacleWidth,u==a?"all":u.type==Y.REAL_SAMPLE&&o.sampleTakenGuide!="none"?"line":"none");const y=c.displayName??c.sample;f.text(y).dx(h.width/2).dy(-6).font({family:"sans-serif",size:o.sampleFontSize,anchor:"middle"}).addClass("sample-display-name")}return l}function gd(e,t,n,i,r,s,o=null,a=40){const l=s.showLegend?80:0,u=Uf(r.size),h=ar();h.defs().svg(`<marker
      id="small-arrowhead"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="6"
      markerHeight="6"
      orient="auto-start-reverse">
      <path d="M 0 0 L 9 5 L 0 10 z" fill="#606060" />
    </marker>`);const c=h.group();md(c,e,t,n,i,r,s,o);const f=fd(e.keys(),n,i);pd(c,e,f,n,r,s);const d=[];if(s.showLegend){const p=new Map(ot(t).map(x=>[x.subclone,x.branchLength])),b=Xf(e,l,u);d.push(b),Vf(c,r,p).translate(b.x,b.y)}const m=Ho([...e.values(),...d]),y=m.width+2*a,g=m.height+2*a;return c.translate(a,m.height/2+a).translate(.5,.5),h.size(y,g),h}function bd(e){return new Map(Array.from(e.entries()).map(([n,i])=>{const r=Ws(i);r.l=Math.min(.86,r.l);const s=Xs(r);return[n,s]}))}const yd="#f8f8f8",xd="#d0d0d0",wd="#e8e8e8";function vd(e){const t=new Map;let n="normal";for(const r of Array.from(e.querySelectorAll(":is(.subclone, .tentacle, .legend-rect, .pass-through)[data-subclone]")))t.set(r,{fill:r.getAttribute("fill"),stroke:r.getAttribute("stroke")});const i=(r=new Set)=>{for(const[s,{fill:o,stroke:a}]of t.entries())r.has(s.dataset.subclone)||r.size===0?(s.setAttribute("fill",o),s.setAttribute("stroke",a),Uo(s)&&(s.style.mixBlendMode="normal")):Uo(s)?(s.setAttribute("stroke",wd),s.style.mixBlendMode="darken"):(s.setAttribute("fill",yd),s.setAttribute("stroke",xd))};e.addEventListener("mouseout",()=>{n=="hover"&&i()}),e.addEventListener("mouseover",r=>{if(n==="normal"||n==="hover"){const s=r.target,o=Vo(s.dataset);i(o),o.size>0&&(n="hover")}}),e.addEventListener("click",r=>{const s=r.target,o=Vo(s.dataset);i(o),n=o.size>0?"clicked":"normal"})}function Uo(e){return e.classList.contains("tentacle")||e.classList.contains("pass-through")}function Vo(e){return e.descendantSubclones?new Set(JSON.parse(e.descendantSubclones).map(t=>`${t}`)):e.subclone!=null?new Set([e.subclone]):new Set}function Md(e,t="plot.png",n=2){const i=e.clientWidth*n,r=e.clientHeight*n,s=document.createElement("canvas");s.width=i,s.height=r;const o=new Image,a=new Blob([e.outerHTML],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(a);o.onload=()=>{const u=s.getContext("2d");u&&(u.fillStyle="white",u.fillRect(0,0,i,r),u.drawImage(o,0,0,i,r)),s.toBlob(h=>{if(h){const c=document.createElement("a");c.href=URL.createObjectURL(h),c.download=t,c.click(),c.remove(),URL.revokeObjectURL(l)}},"image/png")},o.src=l}function Ad(e,t="plot.svg"){let n=e.outerHTML;n.match(/^<svg[^>]+xmlns="http:\/\/www\.w3\.org\/2000\/svg"/)||(n=n.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),n.match(/^<svg[^>]+"http:\/\/www\.w3\.org\/1999\/xlink"/)||(n=n.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"'));const i=new Blob([n],{type:"image/svg+xml"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,s.click(),s.remove()}const kd={patient:null,zoom:1};function _d(e,t){e.innerHTML=Pd;const n=e.querySelector(".jellyfish-gui"),{generalProps:i,layoutProps:r,costWeights:s}=Td(),o=()=>Cd(i,r,s),a=Array.from(new Set(t.samples.map(p=>p.patient)));i.patient??(i.patient=a[0]);const l=()=>Sd(n,a.length>1?Al(t,i.patient):t,r,s),u=new Sn({container:n});u.onChange(o);let h;a.length>1&&(h=u.add(i,"patient",a).onChange(l));const c=p=>n.querySelector(".jellyfish-plot").style.transform=`scale(${p})`;u.add(i,"zoom",.2,2).onChange(c);const f=u.addFolder("Layout");f.add(r,"sampleHeight",50,200),f.add(r,"sampleWidth",50,200),f.add(r,"inferredSampleHeight",50,200),f.add(r,"gapHeight",10,100),f.add(r,"sampleSpacing",10,200),f.add(r,"columnSpacing",10,200),f.add(r,"tentacleWidth",.1,5),f.add(r,"tentacleSpacing",0,10),f.add(r,"inOutCPDistance",.1,.45),f.add(r,"bundleCPDistance",.1,1.2),f.add(r,"bellTipShape",0,1),f.add(r,"bellTipSpread",0,1),f.add(r,"bellStrokeWidth",0,3),f.add(r,"bellPlateauPos",.2,1),f.add(r,"sampleFontSize",8,16),f.add(r,"showLegend"),f.add(r,"phylogenyColorScheme"),f.add(r,"phylogenyHueOffset",0,360),f.add(r,"sampleTakenGuide",["none","line","text"]),f.onChange(l),f.close();const d=u.addFolder("Cost weights");d.add(s,"crossing",0,10),d.add(s,"pathLength",0,10),d.add(s,"orderMismatch",0,10),d.add(s,"divergence",0,10),d.add(s,"bundleMismatch",0,10),d.onChange(l),d.close();const m=()=>n.querySelector(".jellyfish-plot svg"),y=u.addFolder("Tools"),g={downloadSvg:()=>Ad(m(),(i.patient??"jellyfish")+".svg"),downloadPng:()=>{Md(m(),(i.patient??"jellyfish")+".png")}};y.add(g,"downloadSvg"),y.add(g,"downloadPng"),h&&Nd(n,a,i,()=>{h.updateDisplay(),l(),o()}),c(i.zoom),l()}function Sd(e,t,n,i){const r=e.querySelector(".jellyfish-plot");try{const s=id(t,n,i);r.innerHTML="",s.addTo(r),vd(r.querySelector("svg"))}catch(s){throw Ed(e,s.message),s}}function Ed(e,t){e.querySelector(".jellyfish-plot").innerHTML=`<div class="jellyfish-error-message">${wf(t)}</div>`}const $o="jellyfish-plotter-settings";function Cd(e,t,n){sessionStorage.setItem($o,JSON.stringify({generalProps:e,layoutProps:t,costWeights:n}))}function Td(){const e=sessionStorage.getItem($o)??"{}",t=JSON.parse(e);return{generalProps:{...kd,...t.generalProps??{}},layoutProps:{...Of,...t.layoutProps??{}},costWeights:{...ur,...t.costWeights??{}}}}function Nd(e,t,n,i){const r=Ld(t,n,i),s=e.querySelector(".jellyfish-patient-nav");s.style.display=null,s.querySelector(".jellyfish-prev-patient").addEventListener("click",()=>r(-1)),s.querySelector(".jellyfish-next-patient").addEventListener("click",()=>r(1)),(e==null?void 0:e.parentElement.id)==="app"&&document.addEventListener("keydown",o=>{o.key==="ArrowLeft"?r(-1):o.key==="ArrowRight"&&r(1)})}function Ld(e,t,n){const i=r=>{const o=(e.indexOf(t.patient)+r+e.length)%e.length;return e[o]};return function(s){const o=t.patient,a=i(s);a&&a!==o&&(t.patient=a,n(a))}}const Pd=`
  <div class="jellyfish-gui">
    <div class="jellyfish-plot-container">
      <div class="jellyfish-plot"></div>
    </div>
    <div class="jellyfish-patient-nav" style="display: none">
      <button class="jellyfish-prev-patient">
        <svg viewBox="0 0 8 16" fill="currentColor">
          <polygon points="8,0 0,8 8,16" />
        </svg>
        <span>Previous</span>
      </button>
      <button class="jellyfish-next-patient">
        <span>Next</span>
        <svg viewBox="0 0 8 16" fill="currentColor">
          <polygon points="0,0 8,8 0,16" />
        </svg>
      </button>
    </div>
  </div>
`;Yt.setupGui=_d,Object.defineProperty(Yt,Symbol.toStringTag,{value:"Module"})});
